import e from"http://localhost:5173/@react-refresh";import{r as t,b as s,a as r}from"./vendor-oau-82tP.js";import{L as n,u as a,a as i,O as o,N as l,b as c,B as d,R as u,c as h}from"./router-nH3qszsw.js";import{d as m,S as p,e as x,c as g,g as f}from"./swiper-H_8oqUks.js";import{G as b}from"./icons-4xjtOrbs.js";import{c as y,u as v,a as w,b as j,p as N,d as _,e as k,P as S}from"./redux-FdzwKNE_.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),e.injectIntoGlobalHook(window),window.$RefreshReg$=()=>{},window.$RefreshSig$=()=>e=>e,window.__vite_plugin_react_preamble_installed__=!0;var E={exports:{}},T={},A=t,C=Symbol.for("react.element"),P=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,I=A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0};function U(e,t,s){var r,n={},a=null,i=null;for(r in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)R.call(t,r)&&!O.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:C,type:e,key:a,ref:i,props:n,_owner:I.current}}T.Fragment=P,T.jsx=U,T.jsxs=U,E.exports=T;var L=E.exports,D={},M=s;D.createRoot=M.createRoot,D.hydrateRoot=M.hydrateRoot;const F=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function B(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function $(e,t){const s=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>s.indexOf(e)<0)).forEach((s=>{void 0===e[s]?e[s]=t[s]:B(t[s])&&B(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:$(e[s],t[s]):e[s]=t[s]}))}function q(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function z(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function V(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function H(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),s=[];return t.forEach((e=>{s.indexOf(e)<0&&s.push(e)})),s.join(" ")}function W(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},J.apply(this,arguments)}function K(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function G(e){const t=[];return r.Children.toArray(e).forEach((e=>{K(e)?t.push(e):e.props&&e.props.children&&G(e.props.children).forEach((e=>t.push(e)))})),t}function X(e){const t=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return r.Children.toArray(e).forEach((e=>{if(K(e))t.push(e);else if(e.props&&e.props.slot&&s[e.props.slot])s[e.props.slot].push(e);else if(e.props&&e.props.children){const r=G(e.props.children);r.length>0?r.forEach((e=>t.push(e))):s["container-end"].push(e)}else s["container-end"].push(e)})),{slides:t,slots:s}}function Y(e,s){return"undefined"==typeof window?t.useEffect(e,s):t.useLayoutEffect(e,s)}const Z=t.createContext(null),Q=t.createContext(null),ee=t.forwardRef((function(e,s){let{className:n,tag:a="div",wrapperTag:i="div",children:o,onSwiper:l,...c}=void 0===e?{}:e,d=!1;const[u,h]=t.useState("swiper"),[x,g]=t.useState(null),[f,b]=t.useState(!1),y=t.useRef(!1),v=t.useRef(null),w=t.useRef(null),j=t.useRef(null),N=t.useRef(null),_=t.useRef(null),k=t.useRef(null),S=t.useRef(null),E=t.useRef(null),{params:T,passedParams:A,rest:C,events:P}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const s={on:{}},r={},n={};$(s,m),s._emitClasses=!0,s.init=!1;const a={},i=F.map((e=>e.replace(/_/,""))),o=Object.assign({},e);return Object.keys(o).forEach((o=>{void 0!==e[o]&&(i.indexOf(o)>=0?B(e[o])?(s[o]={},n[o]={},$(s[o],e[o]),$(n[o],e[o])):(s[o]=e[o],n[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?t?r[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:s.on[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:a[o]=e[o])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===s[e]&&(s[e]={}),!1===s[e]&&delete s[e]})),{params:s,passedParams:n,rest:a,events:r}}(c),{slides:R,slots:I}=X(o),O=()=>{b(!f)};Object.assign(T.on,{_containerClasses(e,t){h(t)}});const U=()=>{Object.assign(T.on,P),d=!0;const e={...T};if(delete e.wrapperClass,w.current=new p(e),w.current.virtual&&w.current.params.virtual.enabled){w.current.virtual.slides=R;const e={cache:!1,slides:R,renderExternal:g,renderExternalUpdate:!1};$(w.current.params.virtual,e),$(w.current.originalParams.virtual,e)}};v.current||U(),w.current&&w.current.on("_beforeBreakpoint",O);return t.useEffect((()=>()=>{w.current&&w.current.off("_beforeBreakpoint",O)})),t.useEffect((()=>{!y.current&&w.current&&(w.current.emitSlidesClasses(),y.current=!0)})),Y((()=>{if(s&&(s.current=v.current),v.current)return w.current.destroyed&&U(),function(e,t){let{el:s,nextEl:r,prevEl:n,paginationEl:a,scrollbarEl:i,swiper:o}=e;q(t)&&r&&n&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),z(t)&&a&&(o.params.pagination.el=a,o.originalParams.pagination.el=a),V(t)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(s)}({el:v.current,nextEl:_.current,prevEl:k.current,paginationEl:S.current,scrollbarEl:E.current,swiper:w.current},T),l&&l(w.current),()=>{w.current&&!w.current.destroyed&&w.current.destroy(!0,!1)}}),[]),Y((()=>{!d&&P&&w.current&&Object.keys(P).forEach((e=>{w.current.on(e,P[e])}));const e=function(e,t,s,r,n){const a=[];if(!t)return a;const i=e=>{a.indexOf(e)<0&&a.push(e)};if(s&&r){const e=r.map(n),t=s.map(n);e.join("")!==t.join("")&&i("children"),r.length!==s.length&&i("children")}return F.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((s=>{if(s in e&&s in t)if(B(e[s])&&B(t[s])){const r=Object.keys(e[s]),n=Object.keys(t[s]);r.length!==n.length?i(s):(r.forEach((r=>{e[s][r]!==t[s][r]&&i(s)})),n.forEach((r=>{e[s][r]!==t[s][r]&&i(s)})))}else e[s]!==t[s]&&i(s)})),a}(A,j.current,R,N.current,(e=>e.key));return j.current=A,N.current=R,e.length&&w.current&&!w.current.destroyed&&function(e){let{swiper:t,slides:s,passedParams:r,changedParams:n,nextEl:a,prevEl:i,scrollbarEl:o,paginationEl:l}=e;const c=n.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:d,pagination:u,navigation:h,scrollbar:m,virtual:p,thumbs:x}=t;let g,f,b,y,v,w,j,N;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(g=!0),n.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(f=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(d.pagination||!1===d.pagination)&&u&&!u.el&&(b=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(d.scrollbar||!1===d.scrollbar)&&m&&!m.el&&(y=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||i)&&(r.navigation.nextEl||a)&&(d.navigation||!1===d.navigation)&&h&&!h.prevEl&&!h.nextEl&&(v=!0);const _=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),d[e].prevEl=void 0,d[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),d[e].el=void 0,t[e].el=void 0))};n.includes("loop")&&t.isElement&&(d.loop&&!r.loop?w=!0:!d.loop&&r.loop?j=!0:N=!0),c.forEach((e=>{if(B(d[e])&&B(r[e]))Object.assign(d[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||_(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?d[e]=r[e]:!1===t&&_(e)}})),c.includes("controller")&&!f&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),n.includes("children")&&s&&p&&d.virtual.enabled?(p.slides=s,p.update(!0)):n.includes("virtual")&&p&&d.virtual.enabled&&(s&&(p.slides=s),p.update(!0)),n.includes("children")&&s&&d.loop&&(N=!0),g&&x.init()&&x.update(!0);f&&(t.controller.control=d.controller.control),b&&(!t.isElement||l&&"string"!=typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(d.pagination.el=l),u.init(),u.render(),u.update()),y&&(!t.isElement||o&&"string"!=typeof o||(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(d.scrollbar.el=o),m.init(),m.updateSize(),m.setTranslate()),v&&(t.isElement&&(a&&"string"!=typeof a||(a=document.createElement("div"),a.classList.add("swiper-button-next"),a.innerHTML=t.hostEl.constructor.nextButtonSvg,a.part.add("button-next"),t.el.appendChild(a)),i&&"string"!=typeof i||(i=document.createElement("div"),i.classList.add("swiper-button-prev"),i.innerHTML=t.hostEl.constructor.prevButtonSvg,i.part.add("button-prev"),t.el.appendChild(i))),a&&(d.navigation.nextEl=a),i&&(d.navigation.prevEl=i),h.init(),h.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&t.changeDirection(r.direction,!1),(w||N)&&t.loopDestroy(),(j||N)&&t.loopCreate(),t.update()}({swiper:w.current,slides:R,passedParams:A,changedParams:e,nextEl:_.current,prevEl:k.current,scrollbarEl:E.current,paginationEl:S.current}),()=>{P&&w.current&&Object.keys(P).forEach((e=>{w.current.off(e,P[e])}))}})),Y((()=>{var e;!(e=w.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[x]),r.createElement(a,J({ref:v,className:H(`${u}${n?` ${n}`:""}`)},C),r.createElement(Q.Provider,{value:w.current},I["container-start"],r.createElement(i,{className:W(T.wrapperClass)},I["wrapper-start"],T.virtual?function(e,t,s){if(!s)return null;const n=e=>{let s=e;return e<0?s=t.length+e:s>=t.length&&(s-=t.length),s},a=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:i,to:o}=s,l=e.params.loop?-t.length:0,c=e.params.loop?2*t.length:t.length,d=[];for(let r=l;r<c;r+=1)r>=i&&r<=o&&d.push(t[n(r)]);return d.map(((t,s)=>r.cloneElement(t,{swiper:e,style:a,key:`slide-${s}`})))}(w.current,R,x):R.map(((e,t)=>r.cloneElement(e,{swiper:w.current,swiperSlideIndex:t}))),I["wrapper-end"]),q(T)&&r.createElement(r.Fragment,null,r.createElement("div",{ref:k,className:"swiper-button-prev"}),r.createElement("div",{ref:_,className:"swiper-button-next"})),V(T)&&r.createElement("div",{ref:E,className:"swiper-scrollbar"}),z(T)&&r.createElement("div",{ref:S,className:"swiper-pagination"}),I["container-end"]))}));ee.displayName="Swiper";const te=t.forwardRef((function(e,s){let{tag:n="div",children:a,className:i="",swiper:o,zoom:l,lazy:c,virtualIndex:d,swiperSlideIndex:u,...h}=void 0===e?{}:e;const m=t.useRef(null),[p,x]=t.useState("swiper-slide"),[g,f]=t.useState(!1);function b(e,t,s){t===m.current&&x(s)}Y((()=>{if(void 0!==u&&(m.current.swiperSlideIndex=u),s&&(s.current=m.current),m.current&&o){if(!o.destroyed)return o.on("_slideClass",b),()=>{o&&o.off("_slideClass",b)};"swiper-slide"!==p&&x("swiper-slide")}})),Y((()=>{o&&m.current&&!o.destroyed&&x(o.getSlideClasses(m.current))}),[o]);const y={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},v=()=>"function"==typeof a?a(y):a;return r.createElement(n,J({ref:m,className:H(`${p}${i?` ${i}`:""}`),"data-swiper-slide-index":d,onLoad:()=>{f(!0)}},h),l&&r.createElement(Z.Provider,{value:y},r.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof l?l:void 0},v(),c&&!g&&r.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&r.createElement(Z.Provider,{value:y},v(),c&&!g&&r.createElement("div",{className:"swiper-lazy-preloader"})))}));function se(e){let{swiper:t,extendParams:s,on:r,emit:n}=e;s({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};const a=e=>(Array.isArray(e)?e:[e]).filter((e=>!!e));function i(e){let s;return e&&"string"==typeof e&&t.isElement&&(s=t.el.querySelector(e),s)?s:(e&&("string"==typeof e&&(s=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&s.length>1&&1===t.el.querySelectorAll(e).length&&(s=t.el.querySelector(e))),e&&!s?e:s)}function o(e,s){const r=t.params.navigation;(e=a(e)).forEach((e=>{e&&(e.classList[s?"add":"remove"](...r.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=s),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](r.lockClass))}))}function l(){const{nextEl:e,prevEl:s}=t.navigation;if(t.params.loop)return o(s,!1),void o(e,!1);o(s,t.isBeginning&&!t.params.rewind),o(e,t.isEnd&&!t.params.rewind)}function c(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function d(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function u(){const e=t.params.navigation;if(t.params.navigation=function(e,t,s,r){return e.params.createElements&&Object.keys(r).forEach((n=>{if(!s[n]&&!0===s.auto){let a=x(e.el,`.${r[n]}`)[0];a||(a=g("div",r[n]),a.className=r[n],e.el.append(a)),s[n]=a,t[n]=a}})),s}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let s=i(e.nextEl),r=i(e.prevEl);Object.assign(t.navigation,{nextEl:s,prevEl:r}),s=a(s),r=a(r);const n=(s,r)=>{s&&s.addEventListener("click","next"===r?d:c),!t.enabled&&s&&s.classList.add(...e.lockClass.split(" "))};s.forEach((e=>n(e,"next"))),r.forEach((e=>n(e,"prev")))}function h(){let{nextEl:e,prevEl:s}=t.navigation;e=a(e),s=a(s);const r=(e,s)=>{e.removeEventListener("click","next"===s?d:c),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>r(e,"next"))),s.forEach((e=>r(e,"prev")))}r("init",(()=>{!1===t.params.navigation.enabled?m():(u(),l())})),r("toEdge fromEdge lock unlock",(()=>{l()})),r("destroy",(()=>{h()})),r("enable disable",(()=>{let{nextEl:e,prevEl:s}=t.navigation;e=a(e),s=a(s),t.enabled?l():[...e,...s].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),r("click",((e,s)=>{let{nextEl:r,prevEl:i}=t.navigation;r=a(r),i=a(i);const o=s.target;if(t.params.navigation.hideOnClick&&!i.includes(o)&&!r.includes(o)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;let e;r.length?e=r[0].classList.contains(t.params.navigation.hiddenClass):i.length&&(e=i[0].classList.contains(t.params.navigation.hiddenClass)),n(!0===e?"navigationShow":"navigationHide"),[...r,...i].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const m=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),l()},disable:m,update:l,init:u,destroy:h})}function re(e){let t,s,{swiper:r,extendParams:n,on:a,emit:i,params:o}=e;r.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,u,h,m,p,x,g=o&&o.autoplay?o.autoplay.delay:3e3,b=o&&o.autoplay?o.autoplay.delay:3e3,y=(new Date).getTime();function v(e){r&&!r.destroyed&&r.wrapperEl&&e.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",v),x||S())}const w=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?c=!0:c&&(b=l,c=!1);const e=r.autoplay.paused?l:y+b-(new Date).getTime();r.autoplay.timeLeft=e,i("autoplayTimeLeft",e,e/g),s=requestAnimationFrame((()=>{w()}))},j=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(s),w();let n=void 0===e?r.params.autoplay.delay:e;g=r.params.autoplay.delay,b=r.params.autoplay.delay;const a=(()=>{let e;if(e=r.virtual&&r.params.virtual.enabled?r.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:r.slides[r.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(a)&&a>0&&void 0===e&&(n=a,g=a,b=a),l=n;const o=r.params.speed,c=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(o,!0,!0),i("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,o,!0,!0),i("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(o,!0,!0),i("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,o,!0,!0),i("autoplay")),r.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame((()=>{j()}))))};return n>0?(clearTimeout(t),t=setTimeout((()=>{c()}),n)):requestAnimationFrame((()=>{c()})),n},N=()=>{y=(new Date).getTime(),r.autoplay.running=!0,j(),i("autoplayStart")},_=()=>{r.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(s),i("autoplayStop")},k=(e,s)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(t),e||(p=!0);const n=()=>{i("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",v):S()};if(r.autoplay.paused=!0,s)return m&&(l=r.params.autoplay.delay),m=!1,void n();const a=l||r.params.autoplay.delay;l=a-((new Date).getTime()-y),r.isEnd&&l<0&&!r.params.loop||(l<0&&(l=0),n())},S=()=>{r.isEnd&&l<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(y=(new Date).getTime(),p?(p=!1,j(l)):j(),r.autoplay.paused=!1,i("autoplayResume"))},E=()=>{if(r.destroyed||!r.autoplay.running)return;const e=f();"hidden"===e.visibilityState&&(p=!0,k(!0)),"visible"===e.visibilityState&&S()},T=e=>{"mouse"===e.pointerType&&(p=!0,x=!0,r.animating||r.autoplay.paused||k(!0))},A=e=>{"mouse"===e.pointerType&&(x=!1,r.autoplay.paused&&S())};a("init",(()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",T),r.el.addEventListener("pointerleave",A)),f().addEventListener("visibilitychange",E),N())})),a("destroy",(()=>{r.el.removeEventListener("pointerenter",T),r.el.removeEventListener("pointerleave",A),f().removeEventListener("visibilitychange",E),r.autoplay.running&&_()})),a("_freeModeStaticRelease",(()=>{(u||p)&&S()})),a("_freeModeNoMomentumRelease",(()=>{r.params.autoplay.disableOnInteraction?_():k(!0,!0)})),a("beforeTransitionStart",((e,t,s)=>{!r.destroyed&&r.autoplay.running&&(s||!r.params.autoplay.disableOnInteraction?k(!0,!0):_())})),a("sliderFirstMove",(()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?_():(d=!0,u=!1,p=!1,h=setTimeout((()=>{p=!0,u=!0,k(!0)}),200)))})),a("touchEnd",(()=>{if(!r.destroyed&&r.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),r.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&r.params.cssMode&&S(),u=!1,d=!1}})),a("slideChange",(()=>{!r.destroyed&&r.autoplay.running&&(m=!0)})),Object.assign(r.autoplay,{start:N,stop:_,pause:k,resume:S})}function ne(e){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}te.displayName="SwiperSlide";const ae=({listing:e})=>L.jsx("div",{className:"bg-white shadow-md hover:shadow-lg transition-shadow overflow-hidden rounded-lg w-full sm:w-[330px]",children:L.jsxs(n,{to:`/listing/${e._id}`,children:[L.jsx("img",{src:e.imageUrls[0],alt:"listing cover",className:"h-[320px] sm:h-[220px] w-full object-cover hover:scale-105 transition-scale duration-300"}),L.jsxs("div",{className:"p-3 flex flex-col gap-2 w-full",children:[L.jsx("p",{className:"text-lg font-semibold text-slate-700 truncate",children:e.name}),L.jsxs("div",{className:"flex items-center gap-1",children:[L.jsx(ne,{className:"h-4 w-4 text-green-700"}),L.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.address})]}),L.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),L.jsxs("p",{className:"text-slate-500 mt-2 font-semibold",children:["$",e.offer?e.discountPrice.toLocaleString("en-US"):e.regularPrice.toLocaleString("en-US"),"rent"===e.type&&" / month"]}),L.jsxs("div",{className:"flex gap-4",children:[L.jsx("div",{className:"font-bold text-xs",children:e.bedrooms>1?`${e.bedrooms} bedrooms `:`${e.bedrooms} bedroom`}),L.jsx("div",{className:"font-bold text-xs",children:e.bathrooms>1?`${e.bathrooms} bathrooms `:`${e.bathrooms} bathroom `})]})]})]})});function ie(){const[e,s]=t.useState([]),[r,a]=t.useState([]),[i,o]=t.useState([]),[l,c]=t.useState(!0),[d,u]=t.useState(null);if(p.use([se,re]),t.useEffect((()=>{const e=async()=>{try{const e=await fetch("/api/listing/get?type=rent&limit=4");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();o(Array.isArray(s)?s:s.listings||[]),t()}catch(e){u("Failed to load listings. Please try again later."),c(!1)}},t=async()=>{try{const e=await fetch("/api/listing/get?type=sale&limit=4");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();a(Array.isArray(t)?t:t.listings||[]),c(!1)}catch(e){u("Failed to load listings. Please try again later."),c(!1)}};(async()=>{try{const t=await fetch("/api/listing/get?offer=true&limit=4");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();s(Array.isArray(r)?r:r.listings||[]),e()}catch(t){u("Failed to load listings. Please try again later."),c(!1)}})()}),[]),l)return L.jsx("div",{className:"flex justify-center items-center h-screen",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(d)return L.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d})});const h=[];return e.length>0&&(h.push(e[0]),e.length>1&&h.push(e[e.length-1])),i.length>0&&(h.push(i[0]),i.length>1&&h.push(i[i.length-1])),r.length>0&&(h.push(r[0]),r.length>1&&h.push(r[r.length-1])),L.jsxs("div",{children:[L.jsxs("div",{className:"relative h-screen",children:[h.length>0&&L.jsx(ee,{navigation:!0,loop:!0,autoplay:{delay:4e3,disableOnInteraction:!1},modules:[se,re],className:"absolute inset-0 h-full w-full z-10",children:h.map(((e,t)=>L.jsx(te,{children:L.jsx("div",{style:{background:`url(${e.imageUrls[0]}) center no-repeat`,backgroundSize:"cover",filter:"brightness(1.1) contrast(1.1)"},className:"h-full w-full"})},`slider-${e._id}-${t}`)))}),L.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-25 z-20"}),L.jsxs("div",{className:"relative z-30 flex flex-col justify-center items-center h-full text-center px-3 max-w-6xl mx-auto",children:[L.jsxs("h1",{className:"text-white font-bold text-4xl lg:text-7xl mb-6 drop-shadow-2xl",children:["Find your next ",L.jsx("span",{className:"text-blue-400",children:"perfect"}),L.jsx("br",{}),"place with ease"]}),L.jsxs("div",{className:"text-gray-100 text-sm sm:text-lg mb-8 max-w-2xl drop-shadow-lg bg-black bg-opacity-20 p-4 rounded-lg backdrop-blur-sm",children:["Exela Realtors' Estate is the best place to find your next perfect place to live.",L.jsx("br",{}),"We have a wide range of beautiful properties for you to choose from."]}),L.jsx(n,{to:"/search",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition-colors duration-300 shadow-lg hover:shadow-xl backdrop-blur-sm",children:"Let's get started"})]})]}),L.jsxs("div",{className:"max-w-6xl mx-auto p-3 flex flex-col gap-8 my-10",children:[e&&e.length>0&&L.jsxs("div",{children:[L.jsxs("div",{className:"my-3",children:[L.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:"Recent offers"}),L.jsx(n,{className:"text-sm text-blue-800 hover:underline",to:"/search?offer=true",children:"Show more offers"})]}),L.jsx("div",{className:"flex flex-wrap gap-4",children:e.map((e=>L.jsx(ae,{listing:e},e._id)))})]}),i&&i.length>0&&L.jsxs("div",{children:[L.jsxs("div",{className:"my-3",children:[L.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:"Recent places for rent"}),L.jsx(n,{className:"text-sm text-blue-800 hover:underline",to:"/search?type=rent",children:"Show more places for rent"})]}),L.jsx("div",{className:"flex flex-wrap gap-4",children:i.map((e=>L.jsx(ae,{listing:e},e._id)))})]}),r&&r.length>0&&L.jsxs("div",{children:[L.jsxs("div",{className:"my-3",children:[L.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:"Recent places for sale"}),L.jsx(n,{className:"text-sm text-blue-800 hover:underline",to:"/search?type=sale",children:"Show more places for sale"})]}),L.jsx("div",{className:"flex flex-wrap gap-4",children:r.map((e=>L.jsx(ae,{listing:e},e._id)))})]})]})]})}const oe=y({name:"user",initialState:{currentUser:null,error:null,loading:!1},reducers:{signInStart:e=>{e.loading=!0},signInSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},signInFailure:(e,t)=>{e.error=t.payload,e.loading=!1},updateUserStart:e=>{e.loading=!0},updateUserSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},updateUserFailure:(e,t)=>{e.error=t.payload,e.loading=!1},deleteUserStart:e=>{e.loading=!0},deleteUserSuccess:e=>{e.currentUser=null,e.loading=!1,e.error=null},deleteUserFailure:(e,t)=>{e.error=t.payload,e.loading=!1},signOutUserStart:e=>{e.loading=!0},signOutUserSuccess:e=>{e.currentUser=null,e.loading=!1,e.error=null},signOutUserFailure:(e,t)=>{e.error=t.payload,e.loading=!1},deleteListingFailure:(e,t)=>{e.error=t.payload,e.loading=!1},updateAdminStatus:(e,t)=>{e.currentUser&&(e.currentUser.isAdmin=t.payload)}}}),{signInStart:le,signInSuccess:ce,signInFailure:de,updateUserStart:ue,updateUserSuccess:he,updateUserFailure:me,deleteUserSuccess:pe,deleteUserFailure:xe,deleteUserStart:ge,signOutUserStart:fe,signOutUserSuccess:be,signOutUserFailure:ye,deleteListingFailure:ve,updateAdminStatus:we}=oe.actions,je=oe.reducer;var Ne={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(e){const t=[];let s=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[s++]=n:n<2048?(t[s++]=n>>6|192,t[s++]=63&n|128):55296==(64512&n)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[s++]=n>>18|240,t[s++]=n>>12&63|128,t[s++]=n>>6&63|128,t[s++]=63&n|128):(t[s++]=n>>12|224,t[s++]=n>>6&63|128,t[s++]=63&n|128)}return t},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<e.length;n+=3){const t=e[n],a=n+1<e.length,i=a?e[n+1]:0,o=n+2<e.length,l=o?e[n+2]:0,c=t>>2,d=(3&t)<<4|i>>4;let u=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(u=64)),r.push(s[c],s[d],s[u],s[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let s=0,r=0;for(;s<e.length;){const n=e[s++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){const a=e[s++];t[r++]=String.fromCharCode((31&n)<<6|63&a)}else if(n>239&&n<365){const a=((7&n)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[s++],i=e[s++];t[r++]=String.fromCharCode((15&n)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<e.length;){const t=s[e.charAt(n++)],a=n<e.length?s[e.charAt(n)]:0;++n;const i=n<e.length?s[e.charAt(n)]:64;++n;const o=n<e.length?s[e.charAt(n)]:64;if(++n,null==t||null==a||null==i||null==o)throw new Se;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ee=function(e){return function(e){const t=_e(e);return ke.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Te=function(e){try{return ke.decodeString(e,!0)}catch(t){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ae=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ce=()=>{try{return Ae()||(()=>{if("undefined"==typeof process)return;const e=Ne.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const t=e&&Te(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Pe=e=>{var t,s;return null===(s=null===(t=Ce())||void 0===t?void 0:t.emulatorHosts)||void 0===s?void 0:s[e]},Re=()=>{var e;return null===(e=Ce())||void 0===e?void 0:e.config},Ie=e=>{var t;return null===(t=Ce())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,s))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class Le extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,Le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,n=this.errors[e],a=n?function(e,t){return e.replace(Me,((e,s)=>{const r=t[s];return null!=r?String(r):`<${s}?>`}))}(n,s):"Error",i=`${this.serviceName}: ${a} (${r}).`;return new Le(r,i,s)}}const Me=/\{\$([^}]+)}/g;function Fe(e,t){if(e===t)return!0;const s=Object.keys(e),r=Object.keys(t);for(const n of s){if(!r.includes(n))return!1;const s=e[n],a=t[n];if(Be(s)&&Be(a)){if(!Fe(s,a))return!1}else if(s!==a)return!1}for(const n of r)if(!s.includes(n))return!1;return!0}function Be(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(e){const t=[];for(const[s,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class qe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,s){let r;if(void 0===e&&void 0===t&&void 0===s)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const s of t)if(s in e&&"function"==typeof e[s])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:s},void 0===r.next&&(r.next=ze),void 0===r.error&&(r.error=ze),void 0===r.complete&&(r.complete=ze);const n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(s){"undefined"!=typeof console&&console.error}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ze(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(e){return e&&e._delegate?e._delegate:e}class He{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Oe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&e.resolve(s)}catch(s){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(n){if(r)return null;throw n}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:We})}catch(t){}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});s.resolve(e)}catch(t){}}}}clearInstance(e=We){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=We){return this.instances.has(e)}getOptions(e=We){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[n,a]of this.instancesDeferred.entries()){s===this.normalizeInstanceIdentifier(n)&&a.resolve(r)}return r}onInit(e,t){var s;const r=this.normalizeInstanceIdentifier(t),n=null!==(s=this.onInitCallbacks.get(r))&&void 0!==s?s:new Set;n.add(e),this.onInitCallbacks.set(r,n);const a=this.instances.get(r);return a&&e(a,r),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const n of s)try{n(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===We?void 0:r),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch(n){}var r;return s||null}normalizeInstanceIdentifier(e=We){return this.component?this.component.multipleInstances?e:We:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ke{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Je(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,Xe;(Xe=Ge||(Ge={}))[Xe.DEBUG=0]="DEBUG",Xe[Xe.VERBOSE=1]="VERBOSE",Xe[Xe.INFO=2]="INFO",Xe[Xe.WARN=3]="WARN",Xe[Xe.ERROR=4]="ERROR",Xe[Xe.SILENT=5]="SILENT";const Ye={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Ze=Ge.INFO,Qe={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},et=(e,t,...s)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Qe[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tt{constructor(e){this.name=e,this._logLevel=Ze,this._logHandler=et,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}let st,rt;const nt=new WeakMap,at=new WeakMap,it=new WeakMap,ot=new WeakMap,lt=new WeakMap;let ct={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return at.get(e);if("objectStoreNames"===t)return e.objectStoreNames||it.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ht(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function dt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rt||(rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(mt(this),t),ht(nt.get(this))}:function(...t){return ht(e.apply(mt(this),t))}:function(t,...s){const r=e.call(mt(this),t,...s);return it.set(r,t.sort?t.sort():[t]),ht(r)}}function ut(e){return"function"==typeof e?dt(e):(e instanceof IDBTransaction&&function(e){if(at.has(e))return;const t=new Promise(((t,s)=>{const r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",a),e.removeEventListener("abort",a)},n=()=>{t(),r()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",a),e.addEventListener("abort",a)}));at.set(e,t)}(e),t=e,(st||(st=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ct):e);var t}function ht(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,s)=>{const r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",a)},n=()=>{t(ht(e.result)),r()},a=()=>{s(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&nt.set(t,e)})).catch((()=>{})),lt.set(t,e),t}(e);if(ot.has(e))return ot.get(e);const t=ut(e);return t!==e&&(ot.set(e,t),lt.set(t,e)),t}const mt=e=>lt.get(e);const pt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],gt=new Map;function ft(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(gt.get(t))return gt.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,n=xt.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!n&&!pt.includes(s))return;const a=async function(e,...t){const a=this.transaction(e,n?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[s](...t),n&&a.done]))[0]};return gt.set(t,a),a}ct=(e=>({...e,get:(t,s,r)=>ft(t,s)||e.get(t,s,r),has:(t,s)=>!!ft(t,s)||e.has(t,s)}))(ct);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const yt="@firebase/app",vt="0.10.13",wt=new tt("@firebase/app"),jt="@firebase/app-compat",Nt="@firebase/analytics-compat",_t="@firebase/analytics",kt="@firebase/app-check-compat",St="@firebase/app-check",Et="@firebase/auth",Tt="@firebase/auth-compat",At="@firebase/database",Ct="@firebase/data-connect",Pt="@firebase/database-compat",Rt="@firebase/functions",It="@firebase/functions-compat",Ot="@firebase/installations",Ut="@firebase/installations-compat",Lt="@firebase/messaging",Dt="@firebase/messaging-compat",Mt="@firebase/performance",Ft="@firebase/performance-compat",Bt="@firebase/remote-config",$t="@firebase/remote-config-compat",qt="@firebase/storage",zt="@firebase/storage-compat",Vt="@firebase/firestore",Ht="@firebase/vertexai-preview",Wt="@firebase/firestore-compat",Jt="firebase",Kt="[DEFAULT]",Gt={[yt]:"fire-core",[jt]:"fire-core-compat",[_t]:"fire-analytics",[Nt]:"fire-analytics-compat",[St]:"fire-app-check",[kt]:"fire-app-check-compat",[Et]:"fire-auth",[Tt]:"fire-auth-compat",[At]:"fire-rtdb",[Ct]:"fire-data-connect",[Pt]:"fire-rtdb-compat",[Rt]:"fire-fn",[It]:"fire-fn-compat",[Ot]:"fire-iid",[Ut]:"fire-iid-compat",[Lt]:"fire-fcm",[Dt]:"fire-fcm-compat",[Mt]:"fire-perf",[Ft]:"fire-perf-compat",[Bt]:"fire-rc",[$t]:"fire-rc-compat",[qt]:"fire-gcs",[zt]:"fire-gcs-compat",[Vt]:"fire-fst",[Wt]:"fire-fst-compat",[Ht]:"fire-vertex","fire-js":"fire-js",[Jt]:"fire-js-all"},Xt=new Map,Yt=new Map,Zt=new Map;function Qt(e,t){try{e.container.addComponent(t)}catch(s){wt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function es(e){const t=e.name;if(Zt.has(t))return wt.debug(`There were multiple attempts to register component ${t}.`),!1;Zt.set(t,e);for(const s of Xt.values())Qt(s,e);for(const s of Yt.values())Qt(s,e);return!0}function ts(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}function ss(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new De("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ns{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new He("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="10.14.1";function is(e,t={}){let s=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},t),n=r.name;if("string"!=typeof n||!n)throw rs.create("bad-app-name",{appName:String(n)});if(s||(s=Re()),!s)throw rs.create("no-options");const a=Xt.get(n);if(a){if(Fe(s,a.options)&&Fe(r,a.config))return a;throw rs.create("duplicate-app",{appName:n})}const i=new Ke(n);for(const l of Zt.values())i.addComponent(l);const o=new ns(s,r,i);return Xt.set(n,o),o}function os(e=Kt){const t=Xt.get(e);if(!t&&e===Kt&&Re())return is();if(!t)throw rs.create("no-app",{appName:e});return t}function ls(e,t,s){var r;let n=null!==(r=Gt[e])&&void 0!==r?r:e;s&&(n+=`-${s}`);const a=n.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${n}" with version "${t}":`];return a&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void wt.warn(e.join(" "))}es(new He(`${n}-version`,(()=>({library:n,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="firebase-heartbeat-store";let ds=null;function us(){return ds||(ds=function(e,t,{blocked:s,upgrade:r,blocking:n,terminated:a}={}){const i=indexedDB.open(e,t),o=ht(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(ht(i.result),e.oldVersion,e.newVersion,ht(i.transaction),e)})),s&&i.addEventListener("blocked",(e=>s(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),n&&e.addEventListener("versionchange",(e=>n(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(cs)}catch(s){}}}).catch((e=>{throw rs.create("idb-open",{originalErrorMessage:e.message})}))),ds}async function hs(e,t){try{const s=(await us()).transaction(cs,"readwrite"),r=s.objectStore(cs);await r.put(t,ms(e)),await s.done}catch(s){if(s instanceof Le)wt.warn(s.message);else{const e=rs.create("idb-set",{originalErrorMessage:null==s?void 0:s.message});wt.warn(e.message)}}}function ms(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gs(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xs();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(s){wt.warn(s)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xs(),{heartbeatsToSend:s,unsentEntries:r}=function(e,t=1024){const s=[];let r=e.slice();for(const n of e){const e=s.find((e=>e.agent===n.agent));if(e){if(e.dates.push(n.date),fs(s)>t){e.dates.pop();break}}else if(s.push({agent:n.agent,dates:[n.date]}),fs(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}(this._heartbeatsCache.heartbeats),n=Ee(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(t){return wt.warn(t),""}}}function xs(){return(new Date).toISOString().substring(0,10)}class gs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),s||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{s=!1},n.onerror=()=>{var e;t((null===(e=n.error)||void 0===e?void 0:e.message)||"")}}catch(s){t(s)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await us()).transaction(cs),s=await t.objectStore(cs).get(ms(e));return await t.done,s}catch(t){if(t instanceof Le)wt.warn(t.message);else{const e=rs.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});wt.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return hs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return hs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}}}function fs(e){return Ee(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs;function ys(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}function vs(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}bs="",es(new He("platform-logger",(e=>new bt(e)),"PRIVATE")),es(new He("heartbeat",(e=>new ps(e)),"PRIVATE")),ls(yt,vt,bs),ls(yt,vt,"esm2017"),ls("fire-js",""),"function"==typeof SuppressedError&&SuppressedError;const ws=vs,js=new De("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ns=new tt("@firebase/auth");function _s(e,...t){Ns.logLevel<=Ge.ERROR&&Ns.error(`Auth (${as}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e,...t){throw As(e,...t)}function Ss(e,...t){return As(e,...t)}function Es(e,t,s){const r=Object.assign(Object.assign({},ws()),{[t]:s});return new De("auth","Firebase",r).create(t,{appName:e.name})}function Ts(e){return Es(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function As(e,...t){if("string"!=typeof e){const s=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(s,...r)}return js.create(e,...t)}function Cs(e,t,...s){if(!e)throw As(t,...s)}function Ps(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _s(t),new Error(t)}function Rs(e,t){e||Ps(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Os(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Os()&&"https:"!==Os()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ls{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Us()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(e,t){Rs(e.emulator,"Emulator should always be set here");const{url:s}=e.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bs=new Ls(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qs(e,t,s,r,n={}){return zs(e,n,(async()=>{let n={},a={};r&&("GET"===t?a=r:n={body:JSON.stringify(r)});const i=$e(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},n);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ms.fetch()(Vs(e,e.config.apiHost,s,i),l)}))}async function zs(e,t,s){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fs),t);try{const t=new Hs(e),n=await Promise.race([s(),t.promise]);t.clearNetworkTimeout();const a=await n.json();if("needConfirmation"in a)throw Ws(e,"account-exists-with-different-credential",a);if(n.ok&&!("errorMessage"in a))return a;{const t=n.ok?a.errorMessage:a.error.message,[s,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===s)throw Ws(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===s)throw Ws(e,"email-already-in-use",a);if("USER_DISABLED"===s)throw Ws(e,"user-disabled",a);const o=r[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw Es(e,o,i);ks(e,o)}}catch(n){if(n instanceof Le)throw n;ks(e,"network-request-failed",{message:String(n)})}}function Vs(e,t,s,r){const n=`${t}${s}?${r}`;return e.config.emulator?Ds(e.config,n):`${e.config.apiScheme}://${n}`}class Hs{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ss(this.auth,"network-request-failed"))),Bs.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ws(e,t,s){const r={appName:e.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const n=Ss(e,t,r);return n.customData._tokenResponse=s,n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(e,t){return qs(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Gs(e){return 1e3*Number(e)}function Xs(e){const[t,s,r]=e.split(".");if(void 0===t||void 0===s||void 0===r)return _s("JWT malformed, contained fewer than 3 sections"),null;try{const e=Te(s);return e?JSON.parse(e):(_s("Failed to decode base64 JWT payload"),null)}catch(n){return _s("Caught error parsing JWT payload as JSON",null==n?void 0:n.toString()),null}}function Ys(e){const t=Xs(e);return Cs(t,"internal-error"),Cs(void 0!==t.exp,"internal-error"),Cs(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(e,t,s=!1){if(s)return t;try{return await t}catch(r){throw r instanceof Le&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class Qs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ks(this.lastLoginAt),this.creationTime=Ks(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tr(e){var t;const s=e.auth,r=await e.getIdToken(),n=await Zs(e,Js(s,{idToken:r}));Cs(null==n?void 0:n.users.length,s,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const i=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?sr(a.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const d=e.isAnonymous,u=!(e.email&&a.passwordHash||(null==o?void 0:o.length)),h=!!d&&u,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new er(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,m)}function sr(e){return e.map((e=>{var{providerId:t}=e,s=ys(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cs(e.idToken,"internal-error"),Cs(void 0!==e.idToken,"internal-error"),Cs(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Ys(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Cs(0!==e.length,"internal-error");const t=Ys(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Cs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:n}=await async function(e,t){const s=await zs(e,{},(async()=>{const s=$e({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:n}=e.config,a=Vs(e,r,"/v1/token",`key=${n}`),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",Ms.fetch()(a,{method:"POST",headers:i,body:s})}));return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}(e,t);this.updateTokensAndExpiration(s,r,Number(n))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*s}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:n}=t,a=new rr;return s&&(Cs("string"==typeof s,"internal-error",{appName:e}),a.refreshToken=s),r&&(Cs("string"==typeof r,"internal-error",{appName:e}),a.accessToken=r),n&&(Cs("number"==typeof n,"internal-error",{appName:e}),a.expirationTime=n),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rr,this.toJSON())}_performRefresh(){return Ps("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(e,t){Cs("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ar{constructor(e){var{uid:t,auth:s,stsTokenManager:r}=e,n=ys(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new er(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const t=await Zs(this,this.stsTokenManager.getToken(this.auth,e));return Cs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const s=Ve(e),r=await s.getIdToken(t),n=Xs(r);Cs(n&&n.exp&&n.auth_time&&n.iat,s.auth,"internal-error");const a="object"==typeof n.firebase?n.firebase:void 0,i=null==a?void 0:a.sign_in_provider;return{claims:n,token:r,authTime:Ks(Gs(n.auth_time)),issuedAtTime:Ks(Gs(n.iat)),expirationTime:Ks(Gs(n.exp)),signInProvider:i||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ve(e);await tr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Cs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Cs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await tr(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await Zs(this,async function(e,t){return qs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,r,n,a,i,o,l,c;const d=null!==(s=t.displayName)&&void 0!==s?s:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(n=t.phoneNumber)&&void 0!==n?n:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(i=t.tenantId)&&void 0!==i?i:void 0,x=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,f=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:y,isAnonymous:v,providerData:w,stsTokenManager:j}=t;Cs(b&&j,e,"internal-error");const N=rr.fromJSON(this.name,j);Cs("string"==typeof b,e,"internal-error"),nr(d,e.name),nr(u,e.name),Cs("boolean"==typeof y,e,"internal-error"),Cs("boolean"==typeof v,e,"internal-error"),nr(h,e.name),nr(m,e.name),nr(p,e.name),nr(x,e.name),nr(g,e.name),nr(f,e.name);const _=new ar({uid:b,auth:e,email:u,emailVerified:y,displayName:d,isAnonymous:v,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:N,createdAt:g,lastLoginAt:f});return w&&Array.isArray(w)&&(_.providerData=w.map((e=>Object.assign({},e)))),x&&(_._redirectEventId=x),_}static async _fromIdTokenResponse(e,t,s=!1){const r=new rr;r.updateFromServerResponse(t);const n=new ar({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await tr(n),n}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];Cs(void 0!==r.localId,"internal-error");const n=void 0!==r.providerUserInfo?sr(r.providerUserInfo):[],a=!(r.email&&r.passwordHash||(null==n?void 0:n.length)),i=new rr;i.updateFromIdToken(s);const o=new ar({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:n,metadata:new er(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==n?void 0:n.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Map;function or(e){Rs(e instanceof Function,"Expected a class definition");let t=ir.get(e);return t?(Rs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ir.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lr.type="NONE";const cr=lr;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(e,t,s){return`firebase:${e}:${t}:${s}`}class ur{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:n}=this.auth;this.fullUserKey=dr(this.userKey,r.apiKey,n),this.fullPersistenceKey=dr("persistence",r.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ur(or(cr),e,s);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let n=r[0]||or(cr);const a=dr(s,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(a);if(t){const s=ar._fromJSON(e,t);c!==n&&(i=s),n=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return n._shouldAllowMigration&&o.length?(n=o[0],i&&await n._set(a,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==n)try{await e._remove(a)}catch(l){}}))),new ur(n,e,s)):new ur(n,e,s)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(br(t))return"Blackberry";if(yr(t))return"Webos";if(pr(t))return"Safari";if((t.includes("chrome/")||xr(t))&&!t.includes("edge/"))return"Chrome";if(fr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(t);if(2===(null==s?void 0:s.length))return s[1]}return"Other"}function mr(e=Ue()){return/firefox\//i.test(e)}function pr(e=Ue()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xr(e=Ue()){return/crios\//i.test(e)}function gr(e=Ue()){return/iemobile/i.test(e)}function fr(e=Ue()){return/android/i.test(e)}function br(e=Ue()){return/blackberry/i.test(e)}function yr(e=Ue()){return/webos/i.test(e)}function vr(e=Ue()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wr(){return function(){const e=Ue();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function jr(e=Ue()){return vr(e)||fr(e)||yr(e)||br(e)||/windows phone/i.test(e)||gr(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e,t=[]){let s;switch(e){case"Browser":s=hr(Ue());break;case"Worker":s=`${hr(Ue())}-${e}`;break;default:s=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${as}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=t=>new Promise(((s,r)=>{try{s(e(t))}catch(n){r(n)}}));s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==s?void 0:s.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){var t,s,r,n;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(s=e.allowedNonAlphanumericCharacters)||void 0===s?void 0:s.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(n=e.forceUpgradeOnSignin)&&void 0!==n&&n,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,r,n,a,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(s=o.meetsMaxPasswordLength)||void 0===s||s),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(n=o.containsUppercaseLetter)||void 0===n||n),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let s;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tr(this),this.idTokenSubscription=new Tr(this),this.beforeStateQueue=new _r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=js,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=or(t)),this._initializationPromise=this.queue((async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await ur.create(this,e),!this._deleted)){if(null===(s=this._popupRedirectResolver)||void 0===s?void 0:s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Js(this,{idToken:e}),s=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ss(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,n=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null==r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);s&&s!==a||!(null==i?void 0:i.user)||(r=i.user,n=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=s,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(a)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Cs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(s){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tr(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ss(this.app))return Promise.reject(Ts(this));const t=e?Ve(e):null;return t&&Cs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Cs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ss(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ss(this.app)?Promise.reject(Ts(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(or(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return qs(e,"GET","/v2/passwordPolicy",$s(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new kr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new De("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged((()=>{s(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qs(e,"POST","/v2/accounts:revokeToken",$s(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return null===e?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&or(e)||this._popupRedirectResolver;Cs(t,this,"argument-error"),this.redirectPersistenceManager=await ur.create(this,[or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const n="function"==typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cs(i,this,"internal-error"),i.then((()=>{a||n(this.currentUser)})),"function"==typeof t){const n=e.addObserver(t,s,r);return()=>{a=!0,n()}}{const s=e.addObserver(t);return()=>{a=!0,s()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Ns.logLevel<=Ge.WARN&&Ns.warn(`Auth (${as}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Er(e){return Ve(e)}class Tr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const s=new qe(e,t);return s.subscribe.bind(s)}((e=>this.observer=e))}get next(){return Cs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ar={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cr(e,t,s){const r=Er(e);Cs(r._canInitEmulator,r,"emulator-config-failed"),Cs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const n=!!(null==s?void 0:s.disableWarnings),a=Pr(t),{host:i,port:o}=function(e){const t=Pr(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const e=n[1];return{host:e,port:Rr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Rr(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${a}//${i}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:n})}),n||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Pr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ir{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,t){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(e,t){return async function(e,t,s,r,n={}){const a=await qs(e,t,s,r,n);return"mfaPendingCredential"in a&&ks(e,"multi-factor-auth-required",{_serverResponse:a}),a}(e,"POST","/v1/accounts:signInWithIdp",$s(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ks("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:s,signInMethod:r}=t,n=ys(t,["providerId","signInMethod"]);if(!s||!r)return null;const a=new Ur(s,r);return a.idToken=n.idToken||void 0,a.accessToken=n.accessToken||void 0,a.secret=n.secret,a.nonce=n.nonce,a.pendingToken=n.pendingToken||null,a}_getIdTokenResponse(e){return Or(e,this.buildRequest())}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Or(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Or(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$e(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Dr{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch(t){return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mr.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fr extends Dr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ur._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Fr.credential(t,s)}catch(r){return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com",Fr.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Br extends Dr{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch(t){return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com",Br.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $r extends Dr{constructor(){super("twitter.com")}static credential(e,t){return Ur._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return $r.credential(t,s)}catch(r){return null}}}$r.TWITTER_SIGN_IN_METHOD="twitter.com",$r.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const n=await ar._fromIdTokenResponse(e,s,r),a=zr(s);return new qr({user:n,providerId:a,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=zr(s);return new qr({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function zr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Le{constructor(e,t,s,r){var n;super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Vr.prototype),this.customData={appName:e.name,tenantId:null!==(n=e.tenantId)&&void 0!==n?n:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new Vr(e,t,s,r)}}function Hr(e,t,s,r){return("reauthenticate"===t?s._getReauthenticationResolver(e):s._getIdTokenResponse(e)).catch((s=>{if("auth/multi-factor-auth-required"===s.code)throw Vr._fromErrorAndOperation(e,s,t,r);throw s}))}const Wr="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wr,"1"),this.storage.removeItem(Wr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Jr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,s)=>{this.notifyListeners(e,s)}));const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(s);(t||this.localCache[s]!==e)&&this.notifyListeners(s,e)},n=this.storage.getItem(s);wr()&&n!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kr.type="LOCAL";const Gr=Kr;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Jr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xr.type="SESSION";const Yr=Xr;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const s=new Zr(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:n}=t.data,a=this.handlersMap[r];if(!(null==a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const i=Array.from(a).map((async e=>e(t.origin,n))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qr(e="",t=10){let s="";for(let r=0;r<t;r++)s+=Math.floor(10*Math.random());return e+s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr.receivers=[];class en{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let n,a;return new Promise(((i,o)=>{const l=Qr("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),s);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),n=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(n),i(t.data.response);break;default:clearTimeout(c),clearTimeout(n),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sn(){return void 0!==tn().WorkerGlobalScope&&"function"==typeof tn().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rn="firebaseLocalStorageDb",nn="firebaseLocalStorage",an="fbase_key";class on{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ln(e,t){return e.transaction([nn],t?"readwrite":"readonly").objectStore(nn)}function cn(){const e=indexedDB.open(rn,1);return new Promise(((t,s)=>{e.addEventListener("error",(()=>{s(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(nn,{keyPath:an})}catch(r){s(r)}})),e.addEventListener("success",(async()=>{const s=e.result;s.objectStoreNames.contains(nn)?t(s):(s.close(),await function(){const e=indexedDB.deleteDatabase(rn);return new on(e).toPromise()}(),t(await cn()))}))}))}async function dn(e,t,s){const r=ln(e,!0).put({[an]:t,value:s});return new on(r).toPromise()}function un(e,t){const s=ln(e,!0).delete(t);return new on(s).toPromise()}class hn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await cn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(s){if(t++>3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zr._getInstance(sn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new en(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&(null===(e=s[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=s[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cn();return await dn(e,Wr,"1"),await un(e,Wr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((s=>dn(s,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const s=ln(e,!1).get(t),r=await new on(s).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>un(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ln(e,!1).getAll();return new on(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],s=new Set;if(0!==e.length)for(const{fbase_key:r,value:n}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(n)&&(this.notifyListeners(r,n),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hn.type="LOCAL";const mn=hn;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pn(e,t){return t?or(t):(Cs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ls(3e4,6e4);class xn extends Ir{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Or(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gn(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,s=!1){if(ss(e.app))return Promise.reject(Ts(e));const r="signIn",n=await Hr(e,r,t),a=await qr._fromIdTokenResponse(e,r,n);return s||await e._updateCurrentUser(a.user),a}(e.auth,new xn(e),e.bypassAuthState)}function fn(e){const{auth:t,user:s}=e;return Cs(s,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,s=!1){const{auth:r}=e;if(ss(r.app))return Promise.reject(Ts(r));const n="reauthenticate";try{const a=await Zs(e,Hr(r,n,t,e),s);Cs(a.idToken,r,"internal-error");const i=Xs(a.idToken);Cs(i,r,"internal-error");const{sub:o}=i;return Cs(e.uid===o,r,"user-mismatch"),qr._forOperation(e,n,a)}catch(a){throw"auth/user-not-found"===(null==a?void 0:a.code)&&ks(r,"user-mismatch"),a}}(s,new xn(e),e.bypassAuthState)}async function bn(e){const{auth:t,user:s}=e;return Cs(s,t,"internal-error"),async function(e,t,s=!1){const r=await Zs(e,t._linkToIdToken(e.auth,await e.getIdToken()),s);return qr._forOperation(e,"link",r)}(s,new xn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,s,r,n=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:n,error:a,type:i}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:s,tenantId:n||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gn;case"linkViaPopup":case"linkViaRedirect":return bn;case"reauthViaPopup":case"reauthViaRedirect":return fn;default:ks(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new Ls(2e3,1e4);async function wn(e,t,s){if(ss(e.app))return Promise.reject(Ss(e,"operation-not-supported-in-this-environment"));const r=Er(e);!function(e,t,s){if(!(t instanceof s))throw s.name!==t.constructor.name&&ks(e,"argument-error"),Es(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,Lr);const n=pn(r,s);return new jn(r,"signInViaPopup",t,n).executeNotNull()}class jn extends yn{constructor(e,t,s,r,n){super(e,t,r,n),this.provider=s,this.authWindow=null,this.pollId=null,jn.currentPopupAction&&jn.currentPopupAction.cancel(),jn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Cs(e,this.auth,"internal-error"),e}async onExecution(){Rs(1===this.filter.length,"Popup operations only handle one event");const e=Qr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ss(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;(null===(s=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===s?void 0:s.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,vn.get())};e()}}jn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nn="pendingRedirect",_n=new Map;class kn extends yn{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=_n.get(this.auth._key());if(!e){try{const t=await async function(e,t){const s=function(e){return dr(Nn,e.config.apiKey,e.name)}(t),r=function(e){return or(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const n="true"===await r._get(s);return await r._remove(s),n}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}_n.set(this.auth._key(),e)}return this.bypassAuthState||_n.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Sn(e,t){_n.set(e._key(),t)}async function En(e,t,s=!1){if(ss(e.app))return Promise.reject(Ts(e));const r=Er(e),n=pn(r,t),a=new kn(r,n,s),i=await a.execute();return i&&!s&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cn(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Cn(e)){const r=(null===(s=e.error.code)||void 0===s?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ss(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(An(e))}saveEventToCache(e){this.cachedEventUids.add(An(e)),this.lastProcessedEventTime=Date.now()}}function An(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Cn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rn=/^https?/;async function In(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return qs(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(On(r))return}catch(s){}ks(e,"unauthorized-domain")}function On(e){const t=Is(),{protocol:s,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const n=new URL(e);return""===n.hostname&&""===r?"chrome-extension:"===s&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===s&&n.hostname===r}if(!Rn.test(s))return!1;if(Pn.test(e))return r===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new Ls(3e4,6e4);function Ln(){const e=tn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let s=0;s<e.CP.length;s++)e.CP[s]=null}function Dn(e){return new Promise(((t,s)=>{var r,n,a,i;function o(){Ln(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ln(),s(Ss(e,"network-request-failed"))},timeout:Un.get()})}if(null===(n=null===(r=tn().gapi)||void 0===r?void 0:r.iframes)||void 0===n?void 0:n.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=tn().gapi)||void 0===a?void 0:a.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return tn()[t]=()=>{gapi.load?o():s(Ss(e,"network-request-failed"))},(i=`${Ar.gapiScript}?onload=${t}`,Ar.loadJS(i)).catch((e=>s(e)))}o()}})).catch((e=>{throw Mn=null,e}))}let Mn=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fn=new Ls(5e3,15e3),Bn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$n=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qn(e){const t=e.config;Cs(t.authDomain,e,"auth-domain-config-required");const s=t.emulator?Ds(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:as},n=$n.get(e.config.apiHost);n&&(r.eid=n);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${$e(r).slice(1)}`}async function zn(e){const t=await function(e){return Mn=Mn||Dn(e),Mn}(e),s=tn().gapi;return Cs(s,e,"internal-error"),t.open({where:document.body,url:qn(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bn,dontclear:!0},(t=>new Promise((async(s,r)=>{await t.restyle({setHideOnLeave:!1});const n=Ss(e,"network-request-failed"),a=tn().setTimeout((()=>{r(n)}),Fn.get());function i(){tn().clearTimeout(a),s(t)}t.ping(i).then(i,(()=>{r(n)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Wn(e,t,s,r=500,n=600){const a=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Vn),{width:r.toString(),height:n.toString(),top:a,left:i}),c=Ue().toLowerCase();s&&(o=xr(c)?"_blank":s),mr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce(((e,[t,s])=>`${e}${t}=${s},`),"");if(function(e=Ue()){var t;return vr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const s=document.createElement("a");s.href=e,s.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Hn(null);const u=window.open(t||"",o,d);Cs(u,e,"popup-blocked");try{u.focus()}catch(h){}return new Hn(u)}const Jn="__/auth/handler",Kn="emulator/auth/handler",Gn=encodeURIComponent("fac");async function Xn(e,t,s,r,n,a){Cs(e.config.authDomain,e,"auth-domain-config-required"),Cs(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:r,v:as,eventId:n};if(t instanceof Lr){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof Dr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))void 0===o[d]&&delete o[d];const l=await e._getAppCheckToken(),c=l?`#${Gn}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Jn}`;return Ds(e,Kn)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${$e(o).slice(1)}${c}`}const Yn="webStorageSupport";const Zn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yr,this._completeRedirectFn=En,this._overrideRedirectResult=Sn}async _openPopup(e,t,s,r){var n;Rs(null===(n=this.eventManagers[e._key()])||void 0===n?void 0:n.manager,"_initialize() not called before _openPopup()");return Wn(e,await Xn(e,t,s,Is(),r),Qr())}async _openRedirect(e,t,s,r){await this._originValidation(e);return function(e){tn().location.href=e}(await Xn(e,t,s,Is(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:s}=this.eventManagers[t];return e?Promise.resolve(e):(Rs(s,"If manager is not set, promise should be"),s)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch((()=>{delete this.eventManagers[t]})),s}async initAndGetManager(e){const t=await zn(e),s=new Tn(e);return t.register("authEvent",(t=>{Cs(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:s.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yn,{type:Yn},(s=>{var r;const n=null===(r=null==s?void 0:s[0])||void 0===r?void 0:r[Yn];void 0!==n&&t(!!n),ks(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=In(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jr()||pr()||vr()}};var Qn="@firebase/auth",ea="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ta{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Cs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sa=Ie("authIdTokenMaxAge")||300;let ra=null;function na(e=os()){const t=ts(e,"auth");if(t.isInitialized())return t.getImmediate();const s=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const s=ts(e,"auth");if(s.isInitialized()){const e=s.getImmediate();if(Fe(s.getOptions(),null!=t?t:{}))return e;ks(e,"already-initialized")}return s.initialize({options:t})}(e,{popupRedirectResolver:Zn,persistence:[mn,Gr,Yr]}),r=Ie("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(n=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),s=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>sa)return;const r=null==t?void 0:t.token;ra!==r&&(ra=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,s){Ve(e).beforeAuthStateChanged(t,s)}(s,t,(()=>t(s.currentUser))),function(e,t,s,r){Ve(e).onIdTokenChanged(t,s,r)}(s,(e=>t(e)))}}var n;const a=Pe("auth");return a&&Cr(s,`http://${a}`),s}var aa;Ar={loadJS:e=>new Promise(((t,s)=>{const r=document.createElement("script");var n,a;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ss("internal-error");t.customData=e,s(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(a=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==a?a:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},aa="Browser",es(new He("auth",((e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),n=e.getProvider("app-check-internal"),{apiKey:a,authDomain:i}=s.options;Cs(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const o={apiKey:a,authDomain:i,clientPlatform:aa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nr(aa)},l=new Sr(s,r,n,o);return function(e,t){const s=(null==t?void 0:t.persistence)||[],r=(Array.isArray(s)?s:[s]).map(or);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,s)=>{e.getProvider("auth-internal").initialize()}))),es(new He("auth-internal",(e=>{const t=Er(e.getProvider("auth").getImmediate());return new ta(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),ls(Qn,ea,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(aa)),ls(Qn,ea,"esm2017");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ls("firebase","10.14.1","app");const ia=is({apiKey:"AIzaSyDg_cmpyq7cQMR8ZiIixdQLsXw2GNfXfYk",authDomain:"real-estate-8b3a6.firebaseapp.com",projectId:"real-estate-8b3a6",storageBucket:"real-estate-8b3a6.appspot.com",messagingSenderId:"763543249582",appId:"1:763543249582:web:a7ca00d13129353498433f"}),oa=()=>{const e=v(),t=a();return L.jsx("button",{onClick:async()=>{try{const s=new Fr,r=na(ia),n=await wn(r,s),a=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.user.displayName,email:n.user.email,photo:n.user.photoURL})}),i=await a.json();e(ce(i)),t("/")}catch(s){}},type:"button",className:"bg-gradient-to-r from-red-700 via-blue-700 to-green-700 text-white \n      p-3 rounded-lg uppercase hover:opacity-95",children:"Continue with Google"})};function la(e){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function ca(e){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32,384a95.4,95.4,0,0,0,32,71.09V496a16,16,0,0,0,16,16h32a16,16,0,0,0,16-16V480H384v16a16,16,0,0,0,16,16h32a16,16,0,0,0,16-16V455.09A95.4,95.4,0,0,0,480,384V336H32ZM496,256H80V69.25a21.26,21.26,0,0,1,36.28-15l19.27,19.26c-13.13,29.88-7.61,59.11,8.62,79.73l-.17.17A16,16,0,0,0,144,176l11.31,11.31a16,16,0,0,0,22.63,0L283.31,81.94a16,16,0,0,0,0-22.63L272,48a16,16,0,0,0-22.62,0l-.17.17c-20.62-16.23-49.83-21.75-79.73-8.62L150.22,20.28A69.25,69.25,0,0,0,32,69.25V256H16A16,16,0,0,0,0,272v16a16,16,0,0,0,16,16H496a16,16,0,0,0,16-16V272A16,16,0,0,0,496,256Z"},child:[]}]})(e)}function da(e){return b({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M176 256c44.11 0 80-35.89 80-80s-35.89-80-80-80-80 35.89-80 80 35.89 80 80 80zm352-128H304c-8.84 0-16 7.16-16 16v144H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v352c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16v-48h512v48c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V240c0-61.86-50.14-112-112-112z"},child:[]}]})(e)}function ua(e){return b({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M112 128c0-29.5 16.2-55 40-68.9V256h48V48h48v208h48V59.1c23.8 13.9 40 39.4 40 68.9v128h48V128C384 57.3 326.7 0 256 0h-64C121.3 0 64 57.3 64 128v128h48zm334.3 213.9l-10.7-32c-4.4-13.1-16.6-21.9-30.4-21.9H42.7c-13.8 0-26 8.8-30.4 21.9l-10.7 32C-5.2 362.6 10.2 384 32 384v112c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V384h256v112c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V384c21.8 0 37.2-21.4 30.3-42.1z"},child:[]}]})(e)}function ha(e){return b({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function ma(e){return b({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM240 320h-48v48c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16V144c0-8.8 7.2-16 16-16h96c52.9 0 96 43.1 96 96s-43.1 96-96 96zm0-128h-48v64h48c17.6 0 32-14.4 32-32s-14.4-32-32-32z"},child:[]}]})(e)}function pa(e){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function xa(e){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(e)}const ga=()=>{const e=v(),t=a();return L.jsxs("button",{onClick:async()=>{try{const s=new Mr,r=na(ia),n=await wn(r,s),a=await fetch("/api/auth/facebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.user.displayName,email:n.user.email,photo:n.user.photoURL})}),i=await a.json();e(ce(i)),t("/")}catch(s){}},type:"button",className:"bg-blue-600 text-white p-3 rounded-lg uppercase hover:opacity-95 flex items-center justify-center",children:[L.jsx(la,{className:"mr-2 text-xl"}),"Continue with Facebook"]})};function fa(){const[e,s]=t.useState({}),{loading:r,error:o,currentUser:l}=w((e=>e.user)),c=a(),d=v(),u=i(),h=new URLSearchParams(u.search).get("redirect")||"/";t.useEffect((()=>{l&&c(h)}),[l,c,h]);const m=t=>{s({...e,[t.target.id]:t.target.value})},p=h.includes("post-listing-preview");return L.jsx("div",{className:"h-full items-center justify-center bg-sage-300 max-w-lg mx-auto",children:L.jsxs("div",{className:"bg-white bg-opacity-90 p-8 rounded-md w-full max-w-md mt-12",children:[p&&L.jsxs("div",{className:"mb-6 text-center",children:[L.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Sign in to continue"}),L.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account to post your rental property"})]}),L.jsx("h1",{className:"text-2xl text-center font-semibold mb-7 text-slate-600",children:"Sign-in"}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{d(le());const t=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!1===s.success)return d(de(s.message)),void setTimeout((()=>{d(de(null))}),4e3);d(ce(s)),c(h)}catch(s){d(de(s.message)),setTimeout((()=>{d(de(null))}),4e3)}},className:"flex flex-col gap-4",children:[L.jsx("input",{type:"text",placeholder:"Email",className:"border p-3 rounded-md",id:"email",onChange:m}),L.jsx("input",{type:"password",placeholder:"Password",className:"border p-3 rounded-md",id:"password",onChange:m}),L.jsxs("div",{className:"justify-between items-center mt-5",children:[L.jsx("button",{disabled:r,className:"bg-slate-500 hover:opacity-95 text-white p-3 rounded-md uppercase disabled:opacity-80 w-full",children:r?"Loading...":"Sign In"}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("h1",{className:"text-slate-600 font-semibold",children:"Forgot your password?"}),L.jsx(n,{to:"/forgot-password",children:L.jsx("span",{className:"text-blue-700 font-semibold hover:underline",children:"Reset"})})]})]}),L.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[L.jsx(oa,{}),L.jsx(ga,{})]})]}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("h1",{className:"text-slate-600 font-semibold",children:"Do not have an account?"}),L.jsx(n,{to:"/sign-up"+("/"!==h?`?redirect=${encodeURIComponent(h)}`:""),children:L.jsx("span",{className:"text-blue-700 font-semibold hover:underline",children:"Sign up"})})]}),o&&L.jsx("p",{className:"text-red-500 mt-5",children:o})]})})}function ba(){const[e,s]=t.useState({}),[r,i]=t.useState(null),[o,l]=t.useState(!1),c=a(),d=t=>{s({...e,[t.target.id]:t.target.value})};return t.useEffect((()=>{const e=setTimeout((()=>{i(null)}),4e3);return()=>clearTimeout(e)}),[r]),L.jsx("div",{className:"p-3 max-w-lg mx-auto",children:L.jsxs("div",{className:"bg-white p-6 rounded-lg mt-10",children:[L.jsx("h1",{className:"text-2xl text-center font-semibold my-7 text-slate-600",children:"Sign-Up"}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{l(!0);const t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!1===s.success)return l(!1),void i(s.message);l(!1),i(null),c("/sign-in")}catch(s){l(!1),i(s.message)}},className:"flex flex-col gap-4",children:[L.jsx("input",{type:"text",placeholder:"Username",className:"border p-3 rounded-lg",id:"username",onChange:d}),L.jsx("input",{type:"text",placeholder:"Email",className:"border p-3 rounded-lg",id:"email",onChange:d}),L.jsx("input",{type:"password",placeholder:"Password",className:"border p-3 rounded-lg",id:"password",onChange:d}),L.jsx("button",{disabled:o,className:"bg-slate-500 text-white p-3 rounded-lg uppercase hover:opacity-90 disabled:opacity-80",children:o?"Loading...":"Sign Up"}),L.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[L.jsx(oa,{}),L.jsx(ga,{})]})]}),L.jsxs("div",{className:"flex gap-2 mt-5",children:[L.jsx("h1",{children:"Have an account?"}),L.jsx(n,{to:"/sign-in",children:L.jsx("span",{className:"text-blue-700",children:"Sign in"})})]}),r&&L.jsx("p",{className:"text-red-500 mt-5",children:r})]})})}function ya(){return L.jsxs("div",{className:"py-20 px-4 max-w-6xl mx-auto",children:[L.jsx("h1",{className:"text-3xl font-bold mb-4 text-slate-800",children:"About Real Time Estate"}),L.jsx("p",{className:"mb-4 text-slate-700",children:"Welcome to Your Real Time Estate, your premier destination for finding the perfect property that suits your lifestyle and aspirations. Whether you're in search of a dream home, an investment opportunity, or a rental property, our platform is designed to make your real estate journey seamless and rewarding. At Real Time, we pride ourselves on being more than just a listings site. We are a comprehensive real estate marketplace committed to delivering an unparalleled user experience. Explore a curated collection of diverse listings, ranging from luxurious residences in sought-after neighborhoods to charming spaces that cater to various budgets and preferences."}),L.jsx("p",{className:"mb-4 text-slate-700",children:"Our user-friendly interface empowers you to effortlessly navigate through an extensive database of properties, providing detailed information, vivid imagery, and advanced search features. Whether you're a seasoned investor, a first-time homebuyer, or someone looking for a temporary residence, our platform is tailored to meet your unique needs. Discover the latest market trends, neighborhood insights, and expert advice through our informative articles and resources. [Your Real Estate Website Name] is not just a website; it's your gateway to a world of opportunities in the real estate realm. Start your journey with us and turn your property dreams into reality."})]})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="firebasestorage.googleapis.com",wa="storageBucket";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ja extends Le{constructor(e,t,s=0){super(Ea(e),`Firebase Storage: ${t} (${Ea(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ja.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ea(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Na,_a,ka,Sa;function Ea(e){return"storage/"+e}function Ta(){return new ja(Na.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Aa(){return new ja(Na.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ca(){return new ja(Na.CANCELED,"User canceled the upload/download.")}function Pa(){return new ja(Na.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ra(e){return new ja(Na.INVALID_ARGUMENT,e)}function Ia(){return new ja(Na.APP_DELETED,"The Firebase app was deleted.")}function Oa(e,t){return new ja(Na.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ua(e){throw new ja(Na.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(_a=Na||(Na={})).UNKNOWN="unknown",_a.OBJECT_NOT_FOUND="object-not-found",_a.BUCKET_NOT_FOUND="bucket-not-found",_a.PROJECT_NOT_FOUND="project-not-found",_a.QUOTA_EXCEEDED="quota-exceeded",_a.UNAUTHENTICATED="unauthenticated",_a.UNAUTHORIZED="unauthorized",_a.UNAUTHORIZED_APP="unauthorized-app",_a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",_a.INVALID_CHECKSUM="invalid-checksum",_a.CANCELED="canceled",_a.INVALID_EVENT_NAME="invalid-event-name",_a.INVALID_URL="invalid-url",_a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",_a.NO_DEFAULT_BUCKET="no-default-bucket",_a.CANNOT_SLICE_BLOB="cannot-slice-blob",_a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",_a.NO_DOWNLOAD_URL="no-download-url",_a.INVALID_ARGUMENT="invalid-argument",_a.INVALID_ARGUMENT_COUNT="invalid-argument-count",_a.APP_DELETED="app-deleted",_a.INVALID_ROOT_OPERATION="invalid-root-operation",_a.INVALID_FORMAT="invalid-format",_a.INTERNAL_ERROR="internal-error",_a.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class La{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=La.makeFromUrl(e,t)}catch(n){return new La(e,"")}if(""===s.path)return s;throw r=e,new ja(Na.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let s=null;const r="([A-Za-z0-9.\\-_]+)";const n=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),o=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${i}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp(`^https?://${t===va?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let n=r[t.indices.path];n||(n=""),s=new La(e,n),t.postModify(s);break}}if(null==s)throw function(e){return new ja(Na.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return s}}class Da{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(e){return"string"==typeof e||e instanceof String}function Fa(e){return Ba()&&e instanceof Blob}function Ba(){return"undefined"!=typeof Blob}function $a(e,t,s,r){if(r<t)throw Ra(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>s)throw Ra(`Invalid value for '${e}'. Expected ${s} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(e,t,s){let r=t;return null==s&&(r=`https://${t}`),`${s}://${r}/v0${e}`}function za(e){const t=encodeURIComponent;let s="?";for(const r in e)if(e.hasOwnProperty(r)){s=s+(t(r)+"="+t(e[r]))+"&"}return s=s.slice(0,-1),s}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Va(e,t){const s=e>=500&&e<600,r=-1!==[408,429].indexOf(e),n=-1!==t.indexOf(e);return s||r||n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Sa=ka||(ka={}))[Sa.NO_ERROR=0]="NO_ERROR",Sa[Sa.NETWORK_ERROR=1]="NETWORK_ERROR",Sa[Sa.ABORT=2]="ABORT";class Ha{constructor(e,t,s,r,n,a,i,o,l,c,d,u=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=n,this.additionalRetryCodes_=a,this.callback_=i,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Wa(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const r=e=>{const t=e.loaded,s=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,s)};null!==this.progressCallback_&&s.addUploadProgressListener(r),s.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(r),this.pendingConnection_=null;const t=s.getErrorCode()===ka.NO_ERROR,n=s.getStatus();if(!t||Va(n,this.additionalRetryCodes_)&&this.retry){const t=s.getErrorCode()===ka.ABORT;return void e(!1,new Wa(!1,null,t))}const a=-1!==this.successCodes_.indexOf(n);e(!0,new Wa(a,s))}))},t=(e,t)=>{const s=this.resolve_,r=this.reject_,n=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(n,n.getResponse());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0!==e}(e)?s():s(e)}catch(a){r(a)}else if(null!==n){const e=Ta();e.serverResponse=n.getErrorText(),this.errorCallback_?r(this.errorCallback_(n,e)):r(e)}else if(t.canceled){r(this.appDelete_?Ia():Ca())}else{r(Aa())}};this.canceled_?t(0,new Wa(!1,null,!0)):this.backoffId_=function(e,t,s){let r=1,n=null,a=null,i=!1,o=0;function l(){return 2===o}let c=!1;function d(...e){c||(c=!0,t.apply(null,e))}function u(t){n=setTimeout((()=>{n=null,e(m,l())}),t)}function h(){a&&clearTimeout(a)}function m(e,...t){if(c)return void h();if(e)return h(),void d.call(null,e,...t);if(l()||i)return h(),void d.call(null,e,...t);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),u(s)}let p=!1;function x(e){p||(p=!0,h(),c||(null!==n?(e||(o=2),clearTimeout(n),u(0)):e||(o=1)))}return u(0),a=setTimeout((()=>{i=!0,x(!0)}),s),x}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Wa{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function Ja(...e){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const s=new t;for(let t=0;t<e.length;t++)s.append(e[t]);return s.getBlob()}if(Ba())return new Blob(e);throw new ja(Na.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ka(e){if("undefined"==typeof atob)throw t="base-64",new ja(Na.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="raw",Xa="base64",Ya="base64url",Za="data_url";class Qa{constructor(e,t){this.data=e,this.contentType=t||null}}function ei(e,t){switch(e){case Ga:return new Qa(ti(t));case Xa:case Ya:return new Qa(si(e,t));case Za:return new Qa(function(e){const t=new ri(e);return t.base64?si(Xa,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(s){throw Oa(Za,"Malformed data URL.")}return ti(t)}(t.rest)}(t),new ri(t).contentType)}throw Ta()}function ti(e){const t=[];for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(s<e.length-1&&56320==(64512&e.charCodeAt(s+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++s),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function si(e,t){switch(e){case Xa:{const s=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(s||r){throw Oa(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?")}break}case Ya:{const s=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(s||r){throw Oa(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=Ka(t)}catch(n){if(n.message.includes("polyfill"))throw n;throw Oa(e,"Invalid character found")}const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);return r}class ri{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Oa(Za,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;null!=s&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class ni{constructor(e,t){let s=0,r="";Fa(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Fa(this.data_)){const a=this.data_,i=(r=e,n=t,(s=a).webkitSlice?s.webkitSlice(r,n):s.mozSlice?s.mozSlice(r,n):s.slice?s.slice(r,n):null);return null===i?null:new ni(i)}{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ni(s,!0)}var s,r,n}static getBlob(...e){if(Ba()){const t=e.map((e=>e instanceof ni?e.data_:e));return new ni(Ja.apply(null,t))}{const t=e.map((e=>Ma(e)?ei(Ga,e).data:e.data_));let s=0;t.forEach((e=>{s+=e.byteLength}));const r=new Uint8Array(s);let n=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[n++]=e[t]})),new ni(r,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e){let t;try{t=JSON.parse(e)}catch(s){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(e,t){return t}class li{constructor(e,t,s,r){this.server=e,this.local=t||e,this.writable=!!s,this.xform=r||oi}}let ci=null;function di(){if(ci)return ci;const e=[];e.push(new li("bucket")),e.push(new li("generation")),e.push(new li("metageneration")),e.push(new li("name","fullPath",!0));const t=new li("name");t.xform=function(e,t){return function(e){return!Ma(e)||e.length<2?e:ii(e)}(t)},e.push(t);const s=new li("size");return s.xform=function(e,t){return void 0!==t?Number(t):t},e.push(s),e.push(new li("timeCreated")),e.push(new li("updated")),e.push(new li("md5Hash",null,!0)),e.push(new li("cacheControl",null,!0)),e.push(new li("contentDisposition",null,!0)),e.push(new li("contentEncoding",null,!0)),e.push(new li("contentLanguage",null,!0)),e.push(new li("contentType",null,!0)),e.push(new li("metadata","customMetadata",!0)),ci=e,ci}function ui(e,t,s){const r={type:"file"},n=s.length;for(let a=0;a<n;a++){const e=s[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const s=e.bucket,r=e.fullPath,n=new La(s,r);return t._makeStorageReference(n)}})}(r,e),r}function hi(e,t,s){const r=ai(t);if(null===r)return null;return ui(e,r,s)}function mi(e,t){const s={},r=t.length;for(let n=0;n<r;n++){const r=t[n];r.writable&&(s[r.server]=e[r.local])}return JSON.stringify(s)}class pi{constructor(e,t,s,r){this.url=e,this.method=t,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e){if(!e)throw Ta()}function gi(e,t){return function(s,r){const n=hi(e,r,t);return xi(null!==n),n}}function fi(e,t){return function(s,r){const n=hi(e,r,t);return xi(null!==n),function(e,t,s,r){const n=ai(t);if(null===n)return null;if(!Ma(n.downloadTokens))return null;const a=n.downloadTokens;if(0===a.length)return null;const i=encodeURIComponent;return a.split(",").map((t=>{const n=e.bucket,a=e.fullPath;return qa("/b/"+i(n)+"/o/"+i(a),s,r)+za({alt:"media",token:t})}))[0]}(n,r,e.host,e._protocol)}}function bi(e){return function(t,s){let r;var n,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ja(Na.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ja(Na.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ja(Na.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=e.path,r=new ja(Na.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):r=s,r.status=t.getStatus(),r.serverResponse=s.serverResponse,r}}function yi(e){const t=bi(e);return function(s,r){let n=t(s,r);var a;return 404===s.getStatus()&&(a=e.path,n=new ja(Na.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),n.serverResponse=r.serverResponse,n}}function vi(e,t,s){const r=Object.assign({},s);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class wi{constructor(e,t,s,r){this.current=e,this.total=t,this.finalized=!!s,this.metadata=r||null}}function ji(e,t){let s=null;try{s=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){xi(!1)}return xi(!!s&&-1!==(t||["active"]).indexOf(s)),s}const Ni=262144;function _i(e,t,s,r,n,a,i,o){const l=new wi(0,0);if(i?(l.current=i.current,l.total=i.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new ja(Na.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let d=c;n>0&&(d=Math.min(d,n));const u=l.current,h=u+d;let m="";m=0===d?"finalize":c===d?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},x=r.slice(u,h);if(null===x)throw Pa();const g=t.maxUploadRetryTime,f=new pi(s,"POST",(function(e,s){const n=ji(e,["active","final"]),i=l.current+d,o=r.size();let c;return c="final"===n?gi(t,a)(e,s):null,new wi(i,o,"final"===n,c)}),g);return f.headers=p,f.body=x.uploadData(),f.progressCallback=o||null,f.errorHandler=bi(e),f}const ki="running",Si="paused",Ei="success",Ti="canceled",Ai="error";function Ci(e){switch(e){case"running":case"pausing":case"canceling":return ki;case"paused":return Si;case"success":return Ei;case"canceled":return Ti;default:return Ai}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,s){const r=function(e){return"function"==typeof e}(e)||null!=t||null!=s;if(r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=s?s:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e){return(...t)=>{Promise.resolve().then((()=>e(...t)))}}class Ii{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ka.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=ka.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=ka.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,s,r){if(this.sent_)throw Ua("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const n in r)r.hasOwnProperty(n)&&this.xhr_.setRequestHeader(n,r[n].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Oi extends Ii{initXhr(){this.xhr_.responseType="text"}}function Ui(){return new Oi}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=di(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Na.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Va(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Aa()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Na.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const s=function(e,t,s,r,n){const a=t.bucketOnlyServerUrl(),i=vi(t,r,n),o={name:i.fullPath},l=qa(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},d=mi(i,s),u=e.maxUploadRetryTime,h=new pi(l,"POST",(function(e){let t;ji(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(s){xi(!1)}return xi(Ma(t)),t}),u);return h.urlParams=o,h.headers=c,h.body=d,h.errorHandler=bi(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Ui,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,s)=>{const r=function(e,t,s,r){const n=e.maxUploadRetryTime,a=new pi(s,"POST",(function(e){const t=ji(e,["active","final"]);let s=null;try{s=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){xi(!1)}s||xi(!1);const n=Number(s);return xi(!isNaN(n)),new wi(n,r.size(),"final"===t)}),n);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=bi(t),a}(this._ref.storage,this._ref._location,e,this._blob),n=this._ref.storage._makeRequest(r,Ui,t,s);this._request=n,n.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Ni*this._chunkMultiplier,t=new wi(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken(((r,n)=>{let a;try{a=_i(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(o){return this._error=o,void this._transition("error")}const i=this._ref.storage._makeRequest(a,Ui,r,n,!1);this._request=i,i.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Ni*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const s=function(e,t,s){const r=qa(t.fullServerUrl(),e.host,e._protocol),n=e.maxOperationRetryTime,a=new pi(r,"GET",gi(e,s),n);return a.errorHandler=yi(t),a}(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,Ui,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const s=function(e,t,s,r,n){const a=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"},o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i["Content-Type"]="multipart/related; boundary="+o;const l=vi(t,r,n),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mi(l,s)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",d="\r\n--"+o+"--",u=ni.getBlob(c,r,d);if(null===u)throw Pa();const h={name:l.fullPath},m=qa(a,e.host,e._protocol),p=e.maxUploadRetryTime,x=new pi(m,"POST",gi(e,s),p);return x.urlParams=h,x.headers=i,x.body=u.uploadData(),x.errorHandler=bi(t),x}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Ui,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ca(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ci(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,r){const n=new Pi(t||void 0,s||void 0,r||void 0);return this._addObserver(n),()=>{this._removeObserver(n)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ci(this._state)){case Ei:Ri(this._resolve.bind(null,this.snapshot))();break;case Ti:case Ai:Ri(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ci(this._state)){case ki:case Si:e.next&&Ri(e.next.bind(e,this.snapshot))();break;case Ei:e.complete&&Ri(e.complete.bind(e))();break;default:e.error&&Ri(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this._service=e,this._location=t instanceof La?t:La.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Di(e,t)}get root(){const e=new La(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ii(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new La(this._location.bucket,e);return new Di(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ja(Na.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Mi(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,s){const r=qa(t.fullServerUrl(),e.host,e._protocol),n=e.maxOperationRetryTime,a=new pi(r,"GET",fi(e,s),n);return a.errorHandler=yi(t),a}(e.storage,e._location,di());return e.storage.makeRequestWithTokens(t,Ui).then((e=>{if(null===e)throw new ja(Na.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Fi(e,t){if(e instanceof zi){const s=e;if(null==s._bucket)throw new ja(Na.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wa+"' property when initializing the app?");const r=new Di(s,s._bucket);return null!=t?Fi(r,t):r}return void 0!==t?function(e,t){const s=function(e,t){const s=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?s:e+"/"+s}(e._location.path,t),r=new La(e._location.bucket,s);return new Di(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t):e}function Bi(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof zi)return new Di(e,t);throw Ra("To use ref(service, url), the first argument must be a Storage instance.")}return Fi(e,t)}function $i(e,t){const s=null==t?void 0:t[wa];return null==s?null:La.makeFromBucketSpec(s,e)}function qi(e,t,s,r={}){e.host=`${t}:${s}`,e._protocol="http";const{mockUserToken:n}=r;n&&(e._overrideAuthToken="string"==typeof n?n:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(a)),""].join(".")}(n,e.app.options.projectId))}class zi{constructor(e,t,s,r,n){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=n,this._bucket=null,this._host=va,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?La.makeFromBucketSpec(r,this._host):$i(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=La.makeFromBucketSpec(this._url,e):this._bucket=$i(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$a("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$a("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Di(this,e)}_makeRequest(e,t,s,r,n=!0){if(this._deleted)return new Da(Ia());{const a=function(e,t,s,r,n,a,i=!0){const o=za(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,s),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Ha(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,this._appId,s,r,t,this._firebaseVersion,n);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}const Vi="@firebase/storage",Hi="0.13.2",Wi="storage";function Ji(e,t,s){return function(e,t,s){return e._throwIfRoot("uploadBytesResumable"),new Li(e,new ni(t),s)}(e=Ve(e),t,s)}function Ki(e){return Mi(e=Ve(e))}function Gi(e,t){return Bi(e=Ve(e),t)}function Xi(e=os(),t){const s=ts(e=Ve(e),Wi).getImmediate({identifier:t}),r=(e=>{const t=Pe(e);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return"["===t[0]?[t.substring(1,s-1),r]:[t.substring(0,s),r]})("storage");return r&&function(e,t,s,r={}){qi(e,t,s,r)}(s,...r),s}function Yi(e,{instanceIdentifier:t}){const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new zi(s,r,n,t,as)}function Zi(){const e=t.useRef(null),{currentUser:s,loading:r,error:a}=w((e=>e.user)),[i,o]=t.useState(void 0),[l,c]=t.useState(0),[d,u]=t.useState(!1),[h,m]=t.useState({}),[p,x]=t.useState(!1),[g,f]=t.useState([]),[b,y]=t.useState(!1),j=v();t.useEffect((()=>{i&&N(i)}),[i]),t.useEffect((()=>{s&&k()}),[s]);const N=e=>{const t=Ji(Gi(Xi(ia),(new Date).getTime()+e.name),e);t.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;c(Math.round(t))}),(()=>{u(!0)}),(()=>{Ki(t.snapshot.ref).then((e=>m({...h,avatar:e})))}))},_=e=>{m({...h,[e.target.id]:e.target.value})},k=async()=>{try{y(!1);const e=await fetch(`/api/user/listings/${s._id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();if(!1===t.success)return void y(!0);f(t)}catch(e){y(!0)}};return L.jsxs("div",{className:"p-3 max-w-lg mx-auto text-center mt-5",children:[L.jsx("img",{onClick:()=>e.current.click(),src:h.avatar||s.avatar,alt:"profile",className:"rounded-full h-20 w-20 object-cover cursor-pointer mx-auto mb-5"}),L.jsx("div",{className:"bg-white p-5 rounded-lg mt-2",children:L.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{j(ue());const e=await fetch(`/api/user/update/${s._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(h)}),t=await e.json();if(!1===t.success)return j(me(t.message)),void setTimeout((()=>{j(me(null))}),4e3);j(he(t)),x(!0),setTimeout((()=>{x(!1)}),4e3)}catch(t){j(me(t.message)),setTimeout((()=>{j(me(null))}),4e3),setTimeout((()=>{x(!1)}),4e3)}},className:"flex flex-col gap-4",children:[L.jsx("h1",{className:"text-2xl font-semibold",children:"Profile"}),L.jsx("hr",{}),L.jsx("input",{type:"file",onChange:e=>o(e.target.files[0]),ref:e,hidden:!0,accept:"image/*"}),L.jsx("p",{className:"text-sm self-center",children:d?L.jsx("span",{className:"text-red-700",children:"Error image upload (image must be less than 2MB)"}):l>0&&l<100?L.jsx("span",{className:"text-slate-700",children:`Uploading ${l}%`}):100===l?L.jsx("span",{className:"text-green-700",children:"Image successfully uploaded"}):""}),L.jsx("input",{type:"text",placeholder:"username",defaultValue:s.username,className:"border p-3 rounded-lg",id:"username",onChange:_}),L.jsx("input",{type:"text",placeholder:"email",defaultValue:s.email,className:"border p-3 rounded-lg",id:"email",onChange:_}),L.jsx("input",{type:"password",placeholder:"password",className:"border p-3 rounded-lg",id:"password",onChange:_}),L.jsx("button",{disabled:r,className:"bg-slate-700 text-white rounded-lg p-3 uppercase hover:opacity-95 disabled:opacity-80",children:r?"Loading...":"Update"})]})}),L.jsx("p",{className:"text-red-700 mt-5",children:a||""}),L.jsx("p",{className:"text-green-700 mt-5",children:p?"User is updated successfully":""}),L.jsx("button",{onClick:k,className:"bg-green-700 text-white p-3 rounded-lg uppercase text-center w-full max-w-lg mx-auto mt-5",children:"Show Listings"}),g&&g.length>0&&L.jsxs("div",{className:"flex flex-col gap-4",children:[L.jsx("h1",{className:"text-center mt-7 text-2xl font-semibold",children:"My Listings"}),g.map((e=>L.jsxs("div",{className:"border rounded-lg p-3 flex justify-between items-center gap-4 bg-white",children:[L.jsx(n,{to:`/listing/${e._id}`,children:L.jsx("img",{src:e.imageUrls[0]||"/placeholder.svg",alt:"listing cover",className:"h-16 w-16 object-contain"})}),L.jsx(n,{className:"text-slate-700 font-semibold  hover:underline truncate flex-1",to:`/listing/${e._id}`,children:L.jsx("p",{children:e.name})}),L.jsxs("div",{className:"flex flex-col item-center",children:[L.jsx("button",{onClick:()=>(async e=>{try{const t=await fetch(`/api/listing/delete/${e}`,{method:"DELETE",credentials:"include"}),s=await t.json();if(!1===s.success)return j(ve(s.message)),void setTimeout((()=>{j(ve(null))}),4e3);f((t=>t.filter((t=>t._id!==e))))}catch(t){j(ve(t.message)),setTimeout((()=>{j(ve(null))}),4e3)}})(e._id),className:"text-red-700 uppercase",children:"Delete"}),L.jsx(n,{to:`/update-listing/${e._id}`,children:L.jsx("button",{className:"text-green-700 uppercase",children:"Edit"})})]})]},e._id)))]}),b&&L.jsx("p",{className:"text-red-700 mt-5",children:"Error showing listings"})]})}es(new He(Wi,Yi,"PUBLIC").setMultipleInstances(!0)),ls(Vi,Hi,""),ls(Vi,Hi,"esm2017");function Qi(){const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState(""),[i,o]=t.useState(!1),[l,c]=t.useState(!1),d=t.useRef(null),u=a(),h=v(),[m,p]=t.useState(!1);t.useEffect((()=>{(async()=>{if(e&&!m)try{if(!0===e.isAdmin)return o(!0),void p(!0);const t=await fetch(`/api/user/check-admin/${e._id}`),s=await t.json();o(s.isAdmin),p(!0),s.isAdmin&&!e.isAdmin&&h(we(!0))}catch(t){p(!0)}})()}),[e,h,m]),t.useEffect((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);t.useEffect((()=>{const e=new URLSearchParams(location.search).get("searchTerm");e&&r(e)}),[location.search]);return L.jsx("header",{className:"bg-slate-200 shadow-md relative z-40",children:L.jsxs("div",{className:"flex justify-between items-center max-w-6xl mx-auto p-3",children:[L.jsx(n,{to:"/",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASkAAACxCAYAAACY20sYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC/JJREFUeNrs3U9S40gWx/GciYle9KY9J0C1JjowB+jAXICmToB9AiBi9ob9RBhOgDkBhgtgog6AKypqjeoGnk0tejOdD73E6bQty7ZkS/b3E6EA/EeWBPrxMpWSjAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwBX79/Y+anepsCWDSP9kEGw8oCadnO52xNYBJ/2ITbDSgLuyXjv44ZIsAhFRpmnf2y4OdGmwNgOZe2QLq1H55I6AAKqkyVk9tO12wNQBCqmwBJZ3jd3biCB5Ac690ASWV0ysBBVBJlbF5J9XTKVsDIKTK2LyTo3cRWwOguVdGbQIKIKTKjCYeQEiVtqlHBQUQUqVGSAGEFABCCsviRGGAkCqvn9++DNgKACEFgJACAEIKAAgpAIQUFDdUAAipsquxCQBCCgAhBQCEFAAQUkWRKx7YqVHyZTy1U5PfFgip3QsouWaUXLs8vPPwoCTLJ7dulxuPcoVQEFI7GFBu56+FAfDz25fhpoPKu3U7t89C5XGN8wWbdxpO88ZC3ZsN3R1G707TNgyFAJXUzgXUIrem6top3kDzTgK0Q0CBkNqtcGrY6W2RnV+bfJ/XuYwaoFxbHYTUDoWTq0ykbyda9P16XanWGpazs+wyAoRUdQPKdTyvVJnYoJJm32ERTT9ZRjtJ9UTnOAipXaugNKBy6fjWikqCqpvjMl4Zbt0OQmpnuaEFuZE+Kju18qiotHnX5tcEQmo3q6im/dIo8COuc2iG0rwDIbXDzguef2/F93P0DoTUDldR0sQrtI9HhyYAIKSWQic0QEiVWsQmAAgpQqpCzV89VxHYKE4wHonZBB+n2MgBBOmkl6ORVxMv2j+RpnEnh4+7N9+fut58nxd+z2LLNbDvvdTXNs3kZXaWcWnnOVhw24yWI0/7J/JP5U1/kv7PT/ZzKt8PSkgRUn5Ayc41f4hDslMe253iYsoOeTzn3TUNBwnBl2C+Ms9TDcnGlN/PsX1NnGG5JFjb3vskbHtjO6wE3f5JT5e/ORYgEjzzq25ZxroJx9Slb5vkVCk/1PLVDLazbMsuIYVtCai74I98vu9PN3ZnPDL+0IjvT/0M7+zNrJq+P/X0+cnlSQuoyTBwX49nVhPJ4y0NxtpHBZJlHZKAe1to20hYFhdQRsM/9rouzrchpOiTUj+/fenv6rprE6+55Nu/Lvm+69Tq9ftTK9jBIrvTdzKER02rqPSAmh5qiwT0UNdhmHnbJAFcjP2ThgatXwXWtflJSKHyztf+iVKtzOpbmh1UF9qXlMZdEaJVeH+MVEvFVkaLVlE9DcI4eJyQQuWVeST7ZVDp3M2sDpImYqQV1GBnfntJ9Sjhfa+P3HrPNqu+eoTUjiv9beGTaug4aFY9TwTVqA/r804F1OifTOz1pfnVZy1D9UlIodTKf6nhyaCqaUVV04C60IBqZey438bm+m2wvXrb0uQjpLCJ5sndEkEVDg2QSupBq4SOBlR3bc2rLJ3461mWSLdF2Cl/733f0NcRUkCGnapulu0nSULocmznk4pKmjfrCqhE05TnXM9zk3SYx8G2CjvQK9vkY5wU8g6heaPGGys2/WT80UGw073kuAb1OevgrpZRlmalOzNgGqmm2l6T74qQAtIv7FfLJaiS/hc/pKR/apjTOKR4zjpEpixXRk0GoUbvy5yMk5q2LqPlltcXOVaLkEIlzOu43j+R599W2DEl6OQSzwMzfgdpCao4hyN7wwzrEJckqNwI8/ac0I281xNSwJwQG9qd/Hip9yYB9WySo3zHuvM9a1gl4bV/criGQZz998pts1WUOzfvMDWYkwMLdx9NQ3lfxU46puMcmwiqZaudB+OPJk/m8zloij1/DE0o5zrkpWmSqykM5ixn14yPMWtW7c+FkEI1JMMW6iYcTZ40zfybsOZ1GZmyk6bbfcbXdr3vz6u2ooQUqhJQTTPrMidJtdAdqxaSy7Vs6/aoaxh3M77jdqzanN7JTkgBKTtc2vNNL6B6Kc0aqab63iPttZwOkgzsjAqa96wTqt3YqGx9S8kYqkFQhRFSQKadMG2HGXX6XmccrCn9U/6Oe7eGS5W4ZmgRkjAKQzHpMH9ccF63QaVZq8qfCSGFVR2sUEG1Z+5s40elbjJWDEMzeW2o5wxBVV9yHZrvgTG7wvszeH20wLwvTNIxHlZLss0kYOIFlzZcxsrcZJYhCFi1EjoNHuvM+S8vO9iRcUeZwjFJSaCcm/GjUPKfvzu3eZP0tdSnfN6rfU4GaHbHTh9JqomOGT/JuqHhkxYCkbcOvalNwCQEwmV50OUYZpx3Kwi4phcuZ/axwQLDCS4mwi4Z79Ur+5AEQgrLVkHuCFp/SlWSpTIZTFQ946ej9IOKRKbjlGXq6OfOOiR/9D7tnyQ3Thi/EUO4Dln7bPoTgZy+bVwTLuu8eynzjDT0LueMk0pbnjMNu/s1n/tISKFg7mYD+c/3eIX3Xi74+q4p4vrfRWybVeZZ1O9qjeiTAkBIAQAhBYCQAgBCCgAIKQBVwRAEbL3//vJLZJJxRQ07xf/5668uW4WQAtJCo2mSwZnu9I4f+pQMuJTrlXdtkMQ5f6yElAyklHFDhBTNPWA2rWRutbL5YX++kskkd4KRIHnV6ievz3PV02BKYP7fTlf8VqikgCxhMrCBMdDwikxw/px9Ts4TdKfc9OT13nM1fZ97PrVZ5zUBxZ79uaHL0J/xebF+5lCfc6f/RBKw3mt7uh7uagXuM/rh/EElVTUvu74BNChkugnCom6nNxcI2lx7sI/deYEjz9e958/t489LLkdkp1dtkt7oPCV03rSp6kjV1/YqMblCQUcD6lWD0i3PmVn9LjlUUsAGHOlOfqbNsU9T+qPkBNmhffzGNd/se+41IG61ypGvPe95mVczrQko77OvM9rk9CscCb+afazlvf7GvvZIQ8hVS49eMEq4HZrkCgeuSmvYx2L9rFaeTVhCCosYbOlnra2C1OZSrOEgO3kreE1DA+UqePxaw2sowSHNK63GVr2gW8NMv4LBV23CTb05aND8/KyVlQTpUAP0mt2FkNqEHznNJ0tfxXBbN6L0H2lVcydf/SpGKyXjKpYpzbMrDYRDFxQrdobHZtSX5Nvzl2dOs7Vvl6Xn9ZWdaxPw3+wyhNQ6dX9++3Kz4Hs+6Q7gbtctenY+Waokd9mNaMpOdBT87M+/jKJgx58IKqk8tKkkR/2kD0puaXWpzTl3YTkJ9wNvnV0f1dGUz3TP11wHuAqvLtrSz2u6znftKJcqquU1R39znxc0Ud9DyT7e0s/p6fqM3cTz19//qOdQ9Y2Fq/07irdtJ/sHOTP2RyMdrS9BKHz8Mds/gP4WrnOU0ncTm8UvUzt3B9LO5zBkP8ZG2ecvvJ1XKpK+Bs+5F7zyu7n1AqvjzfNRw6ttRrdNvwgqtyv9rFMzuhCdP8/Ie/x/GkiPru9qyjrEXqC5JuefXqU91HUcsqcBAAAAAECfVBEK6BCdZSs7SgFCKj1gGt6Pftj8ZiaPlq0rjBYOLzPZ4e0fEPDvTzfMeGQRIKQKDp/IjA7dR/rwUcnDZpPh5kLNHeGkagMhlUMQubFBMu154VPf8A5flMYG10vCSw7N9wkwEFLTA8mF0YEXTHlVQ+Htul/SwqdM46e8oJ4VZnteJZl3gPd1u8nYoME2jisDIZW28zV0ZztaIZD88HkJQ2eXd6og3Nz29fvhlq3aBhpesr37dhszmBHbEVLah3SqoXS6YAjJ169eANEcybeCrXlBdqBfs4aYC61HKi1ULqT0v7k7TaE+p1nhgug9lPiDL1XFW/Oa4mkB5q4OcM/vD6UOKa2a2hpQtSCMYu3j6FMRVTq85HccaWDted8br9kt14Tq0iREaUJKKycXTrH2W0hlNCCMdjK8DvR7aQpesXVQiuadBhUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACACvtbgAEAQpoYrLuJFu8AAAAASUVORK5CYII=",alt:"Estate App Logo",className:"h-8 w-auto mr-2"}),L.jsxs("h1",{className:"font-bold text-sm sm:text-xl flex flex-wrap",children:[L.jsx("span",{className:"text-slate-700",children:"Exela"}),L.jsx("span",{className:"text-slate-500",children:"Realtors"})]})]})}),L.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new URLSearchParams(window.location.search);t.set("searchTerm",s);const r=t.toString();u(`/search?${r}`)},className:"bg-slate-100 p-3 rounded-lg flex items-center",children:[L.jsx("input",{type:"text",placeholder:"Search...",className:"bg-transparent focus:outline-none w-24 sm:w-64",value:s,onChange:e=>r(e.target.value)}),L.jsx("button",{children:L.jsx(pa,{className:"text-slate-600"})})]}),L.jsxs("ul",{className:"flex gap-4 items-center",children:[L.jsx(n,{to:"/",children:L.jsx("li",{className:"hidden sm:inline text-slate-700 hover:underline",children:"Home"})}),L.jsx(n,{to:"/about",children:L.jsx("li",{className:"hidden sm:inline text-slate-700 hover:underline",children:"About"})}),L.jsx("li",{onClick:()=>{u(e?"/create-listing":"/sign-in")},className:"hidden sm:inline text-slate-700 hover:underline cursor-pointer",children:"List Property"}),L.jsx("li",{onClick:()=>{u(e?"/advertise":"/sign-in")},className:"hidden sm:inline text-slate-700 hover:underline cursor-pointer",children:"Advertise"}),L.jsx("li",{onClick:e=>{e.preventDefault(),u("/rental-manager")},className:"hidden sm:inline text-slate-700 hover:underline cursor-pointer",children:"Rental Manager"}),e?L.jsxs("div",{className:"relative",ref:d,children:[L.jsx("img",{className:"rounded-full h-7 w-7 object-cover cursor-pointer",src:e.avatar||"/placeholder.svg",alt:"profile",onClick:()=>{c(!l)}}),l&&L.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:[L.jsx(n,{to:"/profile",children:L.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Update Profile"})}),L.jsx(n,{to:"/show-listings",children:L.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Listings"})}),L.jsx(n,{to:"/create-listing",children:L.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Create Listing"})}),L.jsx(n,{to:"/advertise",children:L.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Advertise"})}),L.jsx(n,{to:"/rental-manager",children:L.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Rental Manager"})}),i&&L.jsx("div",{onClick:()=>{c(!1),u("/admin")},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",children:"Admin Dashboard"}),L.jsx("div",{onClick:async()=>{try{h(fe());const e=await fetch("/api/auth/signout"),t=await e.json();if(!1===t.success)return void h(ye(t.message));h(be()),c(!1),u("/sign-in")}catch(e){h(ye(e.message))}},className:"block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 cursor-pointer border-t border-gray-200 mt-1 font-medium",children:"Sign Out"})]})]}):L.jsx(n,{to:"/sign-in",children:L.jsx("li",{className:"text-slate-700 hover:underline",children:"Sign in"})}),i&&e&&!l&&L.jsx(n,{to:"/admin",children:L.jsx("li",{className:"text-slate-700 hover:underline",children:"Admin"})})]})]})})}const eo=()=>{const{currentUser:e}=w((e=>e.user));return e?L.jsx(o,{}):L.jsx(l,{to:"/sign-in"})},to=()=>{const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState([]),[n,i]=t.useState({imageUrls:[],name:"",description:"",address:"",type:"rent",bedrooms:1,bathrooms:1,regularPrice:50,discountPrice:0,offer:!1,parking:!1,furnished:!1}),[o,l]=t.useState(!1),[c,d]=t.useState(!1),[u,h]=t.useState(!1),[m,p]=t.useState(!1),x=a(),g=async e=>new Promise(((t,s)=>{const r=Ji(Gi(Xi(ia),(new Date).getTime()+e.name),e);r.on("state_changed",(e=>{e.bytesTransferred,e.totalBytes}),(e=>{s(e)}),(()=>{Ki(r.snapshot.ref).then((e=>{t(e)}))}))})),f=e=>{"sale"!==e.target.id&&"rent"!==e.target.id||i({...n,type:e.target.id}),"parking"!==e.target.id&&"furnished"!==e.target.id&&"offer"!==e.target.id||i({...n,[e.target.id]:e.target.checked}),"number"!==e.target.type&&"text"!==e.target.type&&"textarea"!==e.target.type||i({...n,[e.target.id]:e.target.value})};return L.jsxs("main",{className:"p-3 max-w-4xl mx-auto bg-white mt-12",children:[L.jsxs("h1",{className:"text-3xl font-semibold text-center my-7 text-slate-700",children:[" ","Create Listing"]}),L.jsx("hr",{className:"mb-8"}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{if(n.imageUrls.length<1)return h("You must upload at least one image");if(+n.regularPrice<+n.discountPrice)return h("Discount price must be lower than regular price");p(!0),h(!1);const t=await fetch("/api/listing/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,userRef:e._id})}),s=await t.json();p(!1),!1===s.success&&h(s.message),x(`/listing/${s._id}`)}catch(s){h(s.message),p(!1)}},className:"flex flex-col sm:flex-row gap-4",children:[L.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[L.jsx("input",{type:"text",placeholder:"Name of listing",className:"border border-slate-700 p-3 rounded-lg",id:"name",maxLength:"62",minLength:"10",required:!0,onChange:f,value:n.name}),L.jsx("textarea",{type:"text",placeholder:"Description",className:"border border-slate-700 p-3 rounded-lg",id:"description",required:!0,onChange:f,value:n.description}),L.jsx("input",{type:"text",placeholder:"Address",className:"border border-slate-700 p-3 rounded-lg",id:"address",required:!0,onChange:f,value:n.address}),L.jsxs("div",{className:"flex gap-6 flex-wrap",children:[L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"sale",className:"w-5",onChange:f,checked:"sale"===n.type}),L.jsx("span",{children:"Sale"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"rent",className:"w-5",onChange:f,checked:"rent"===n.type}),L.jsx("span",{children:"Rent"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"parking",className:"w-5",onChange:f,checked:n.parking}),L.jsx("span",{children:"Parking spot"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"furnished",className:"w-5",onChange:f,checked:n.furnished}),L.jsx("span",{children:"Furnished"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"offer",className:"w-5",onChange:f,checked:n.offer}),L.jsx("span",{children:"Offer"})]})]}),L.jsxs("div",{className:"flex flex-wrap gap-6 ",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"bedrooms",min:"1",max:"10",required:!0,className:"p-3 border border-slate-700 rounded-lg",onChange:f,value:n.bedrooms}),L.jsx("p",{children:"Bedrooms"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"bathrooms",min:"1",max:"10",required:!0,className:"p-3 border border-slate-700 rounded-lg",onChange:f,value:n.bathrooms}),L.jsx("p",{children:"Baths"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"regularPrice",min:"50",max:"1000000",required:!0,className:"p-3 border border-slate-700 rounded-lg",onChange:f,value:n.regularPrice}),L.jsx("div",{className:"flex flex-col items-center",children:L.jsx("p",{children:"Regular price"})}),L.jsx("span",{className:"text-xs",children:"($/month)"})]}),n.offer&&L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"discountPrice",min:"0",max:"1000000",required:!0,className:"p-3 border border-slate-700 rounded-lg",onChange:f,value:n.discountPrice}),L.jsx("div",{className:"flex flex-col items-center",children:L.jsx("p",{children:"Discounted price"})}),L.jsx("span",{className:"text-xs",children:"($/month)"})]})]})]}),L.jsxs("div",{className:"flex flex-col flex-1 gap-4",children:[L.jsxs("p",{className:"font-semibold",children:["Images:",L.jsx("span",{className:"font-normal text-gray-600 ml-2",children:"The first image will be the cover (max 6)"})]}),L.jsxs("div",{className:"flex gap-4",children:[L.jsx("input",{onChange:e=>r(e.target.files),className:"p-3 border border-slate-700 rounded w-full",type:"file",id:"images",accept:"image/*",multiple:!0}),L.jsx("button",{type:"button",disabled:c,onClick:()=>{if(s.length>0&&s.length+n.imageUrls.length<7){d(!0),l(!1);const e=[];for(let t=0;t<s.length;t++)e.push(g(s[t]));Promise.all(e).then((e=>{i({...n,imageUrls:n.imageUrls.concat(e)}),l(!1),d(!1)})).catch((()=>{l("Image upload failed (2MB max per image )"),d(!1),setTimeout((()=>{l(!1)}),4e3)}))}else l("You can only upload up to 6 images per listing"),d(!1),setTimeout((()=>{l(!1)}),4e3)},className:"p-3 text-green-700 border border-green-700 rounded uppercase hover:shadow-lg disabled:opacity-80 ",children:c?"Uploading...":"Upload"})]}),L.jsx("p",{className:"text-red-700 text-sm",children:o&&o}),n.imageUrls.length>0&&n.imageUrls.map(((e,t)=>L.jsxs("div",{className:"flex justify-between p-3 border border-slate-700 items-center rounded-lg",children:[L.jsx("img",{src:e,alt:"listing image",className:"w-20 h-20 object-contain rounded-lg "}),L.jsx("button",{type:"button",onClick:()=>(e=>{i({...n,imageUrls:n.imageUrls.filter(((t,s)=>s!==e))})})(t),className:"p-3 text-red-700 rounded-lg uppercase hover:opacity-75",children:"Delete"})]},e))),L.jsx("button",{disabled:m||c,className:"p-3 bg-slate-700 text-white rounded-lg uppercase hover:opacity-95 disabled:opacity-80",children:m?"Creating...":"Create Listing"}),u&&L.jsx("p",{className:"text-red-700 text-sm",children:u})]})]})]})},so=()=>{const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState([]),[n,i]=t.useState({imageUrls:[],name:"",description:"",address:"",type:"rent",bedrooms:1,bathrooms:1,regularPrice:50,discountPrice:0,offer:!1,parking:!1,furnished:!1}),[o,l]=t.useState(!1),[d,u]=t.useState(!1),[h,m]=t.useState(!1),[p,x]=t.useState(!1),g=a(),f=c();t.useEffect((()=>{(async()=>{const e=f.listingId,t=await fetch(`/api/listing/get/${e}`),s=await t.json();s.success,i(s)})()}),[]);const b=async e=>new Promise(((t,s)=>{const r=Ji(Gi(Xi(ia),(new Date).getTime()+e.name),e);r.on("state_changed",(e=>{e.bytesTransferred,e.totalBytes}),(e=>{s(e)}),(()=>{Ki(r.snapshot.ref).then((e=>{t(e)}))}))})),y=e=>{"sale"!==e.target.id&&"rent"!==e.target.id||i({...n,type:e.target.id}),"parking"!==e.target.id&&"furnished"!==e.target.id&&"offer"!==e.target.id||i({...n,[e.target.id]:e.target.checked}),"number"!==e.target.type&&"text"!==e.target.type&&"textarea"!==e.target.type||i({...n,[e.target.id]:e.target.value})};return L.jsxs("main",{className:"p-3 max-w-4xl mx-auto bg-sage rounded-lg mt-5",children:[L.jsx("h1",{className:"text-2xl font-semibold text-center my-7 uppercase text-slate-500",children:"Update Listing"}),L.jsx("form",{onSubmit:async t=>{t.preventDefault();try{if(n.imageUrls.length<1)return m("You must upload at least one image");if(+n.regularPrice<+n.discountPrice)return m("Discount price must be lower than regular price");x(!0),m(!1);const t=await fetch(`/api/listing/update/${f.listingId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,userRef:e._id})}),s=await t.json();x(!1),!1===s.success&&m(s.message),g(`/listing/${s._id}`)}catch(s){m(s.message),x(!1)}},className:"flex flex-col sm:flex-row gap-4 mt-6",children:L.jsxs("div",{className:"flex bg-slate-200 p-6 rounded-lg gap-6",children:[L.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[L.jsx("input",{type:"text",placeholder:"Name",className:"border p-3 rounded-lg",id:"name",maxLength:"62",minLength:"10",required:!0,onChange:y,value:n.name}),L.jsx("textarea",{type:"text",placeholder:"Description",className:"border p-3 rounded-lg",id:"description",required:!0,onChange:y,value:n.description}),L.jsx("input",{type:"text",placeholder:"Address",className:"border p-3 rounded-lg",id:"address",required:!0,onChange:y,value:n.address}),L.jsxs("div",{className:"flex gap-6 flex-wrap",children:[L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"sale",className:"w-5",onChange:y,checked:"sale"===n.type}),L.jsx("span",{children:"Sell"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"rent",className:"w-5",onChange:y,checked:"rent"===n.type}),L.jsx("span",{children:"Rent"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"parking",className:"w-5",onChange:y,checked:n.parking}),L.jsx("span",{children:"Parking spot"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"furnished",className:"w-5",onChange:y,checked:n.furnished}),L.jsx("span",{children:"Furnished"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"offer",className:"w-5",onChange:y,checked:n.offer}),L.jsx("span",{children:"Offer"})]})]}),L.jsxs("div",{className:"flex flex-wrap gap-6 ",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"bedrooms",min:"1",max:"10",required:!0,className:"p-3 border border-gray-300 rounded-lg",onChange:y,value:n.bedrooms}),L.jsx("p",{children:"Bedrooms"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"bathrooms",min:"1",max:"10",required:!0,className:"p-3 border border-gray-300 rounded-lg",onChange:y,value:n.bathrooms}),L.jsx("p",{children:"Baths"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"regularPrice",min:"50",max:"1000000",required:!0,className:"p-3 border border-gray-300 rounded-lg",onChange:y,value:n.regularPrice}),L.jsx("div",{className:"flex flex-col items-center",children:L.jsx("p",{children:"Regular price"})}),L.jsx("span",{className:"text-xs",children:"($/month)"})]}),n.offer&&L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("input",{type:"number",id:"discountPrice",min:"0",max:"1000000",required:!0,className:"p-3 border border-gray-300 rounded-lg",onChange:y,value:n.discountPrice}),L.jsx("div",{className:"flex flex-col items-center",children:L.jsx("p",{children:"Discounted price"})}),L.jsx("span",{className:"text-xs",children:"($/month)"})]})]})]}),L.jsxs("div",{className:"flex flex-col flex-1 gap-4",children:[L.jsxs("p",{className:"font-semibold",children:["Images:",L.jsx("span",{className:"font-normal text-gray-600 ml-2",children:"The first image will be the cover (max 6)"})]}),L.jsxs("div",{className:"flex gap-4",children:[L.jsx("input",{onChange:e=>r(e.target.files),className:"p-3 border border-gray-300 rounded w-full bg-white",type:"file",id:"images",accept:"image/*",multiple:!0}),L.jsx("button",{type:"button",disabled:d,onClick:()=>{if(s.length>0&&s.length+n.imageUrls.length<7){u(!0),l(!1);const e=[];for(let t=0;t<s.length;t++)e.push(b(s[t]));Promise.all(e).then((e=>{i({...n,imageUrls:n.imageUrls.concat(e)}),l(!1),u(!1)})).catch((()=>{l("Image upload failed (2MB max per image )"),u(!1)}))}else l("You can only upload up to 6 images per listing"),u(!1)},className:"p-3 text-green-700 border border-green-700 rounded uppercase hover:shadow-lg disabled:opacity-80 bg-white ",children:d?"Uploading...":"Upload"})]}),L.jsx("p",{className:"text-red-700 text-sm",children:o&&o}),n.imageUrls.length>0&&n.imageUrls.map(((e,t)=>L.jsxs("div",{className:"flex justify-between p-3 border items-center bg-white rounded-lg gap-4",children:[L.jsx("img",{src:e,alt:"listing image",className:"w-20 h-20 object-contain rounded-lg "}),L.jsx("button",{type:"button",onClick:()=>(e=>{i({...n,imageUrls:n.imageUrls.filter(((t,s)=>s!==e))})})(t),className:"p-3 text-red-700 rounded-lg uppercase hover:opacity-75",children:"Delete"})]},e))),L.jsx("button",{disabled:p||d,className:"p-3 bg-slate-600 text-white rounded-lg uppercase hover:opacity-95 disabled:opacity-80",children:p?"Updating...":"Update Listing"}),h&&L.jsx("p",{className:"text-red-700 text-sm",children:h})]})]})})]})};function ro({listing:e}){const[s,r]=t.useState(null),[a,i]=t.useState("");return t.useEffect((()=>{(async()=>{try{const t=await fetch(`/api/user/${e.userRef}`),s=await t.json();r(s)}catch(t){}})()}),[e.userRef]),L.jsx(L.Fragment,{children:s&&L.jsxs("div",{className:"flex flex-col gap-2",children:[L.jsxs("p",{children:["Contact ",L.jsx("span",{className:"font-semibold",children:s.username})," ","for"," ",L.jsx("span",{className:"font-semibold",children:e.name.toLowerCase()})," "]}),L.jsx("textarea",{name:"message",id:"message",rows:"2",value:a,onChange:e=>{i(e.target.value)},placeholder:"Enter your message here...",className:"w-full border p-3 rounded-lg"}),L.jsx(n,{to:`mailto:${s.email}?subject=Regarding ${e.name}&body=${a}`,className:"bg-slate-700 text-white text-center p-3 rounded-lg uppercase hover:opacity-95",children:"Send Message"})]})})}const no=()=>{p.use([se]);const[e,s]=t.useState(null),[r,a]=t.useState(!1),[i,o]=t.useState(!1),[l,d]=t.useState(!1),[u,h]=t.useState(!1),m=c(),{currentUser:x}=w((e=>e.user));return t.useEffect((()=>{(async()=>{try{a(!0);const e=await fetch(`/api/listing/get/${m.listingId}`),t=await e.json();if(!1===t.success)return o(!0),a(!1),void setTimeout((()=>o(!1)),4e3);s(t),a(!1),o(!1)}catch(e){o(!0),a(!1),setTimeout((()=>o(!1)),4e3)}})()}),[m.listingId]),L.jsxs("main",{children:[r&&L.jsx("p",{className:"text-center my-7 text-2xl",children:"Loading..."}),i&&L.jsx("p",{className:"text-center my-7 text-2xl",children:"Something went wrong!"}),e&&!r&&!i&&L.jsxs("div",{children:[L.jsx(ee,{navigation:!0,children:e.imageUrls.map((e=>L.jsx(te,{children:L.jsx("div",{className:"h-[550px]",style:{background:`url(${e}) center no-repeat`,backgroundSize:"cover"}})},e)))}),L.jsx("div",{className:"fixed top-[13%] right-[3%] z-10 border rounded-full w-12 h-12 flex justify-center items-center bg-slate-100 cursor-pointer",children:L.jsx(xa,{className:"text-slate-500",onClick:()=>{navigator.clipboard.writeText(window.location.href),d(!0),setTimeout((()=>{d(!1)}),2e3)}})}),l&&L.jsx("p",{className:"fixed top-[23%] right-[5%] z-10 rounded-md bg-slate-100 p-2",children:"Link copied!"}),L.jsxs("div",{className:"flex flex-col max-w-4xl mx-auto p-3 my-7 gap-4",children:[L.jsxs("p",{className:"text-2xl font-semibold",children:[e.name," - $"," ",e.offer?e.discountPrice.toLocaleString("en-US"):e.regularPrice.toLocaleString("en-US"),"rent"===e.type&&" / month"]}),L.jsxs("p",{className:"flex items-center mt-6 gap-2 text-slate-600 text-sm",children:[L.jsx(ha,{className:"text-green-700"}),e.address]}),L.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[L.jsx("p",{className:"bg-red-900 w-full max-w-[200px] text-white text-center p-1 rounded-md",children:"rent"===e.type?"For Rent":"For Sale"}),e.offer&&L.jsxs("p",{className:"bg-green-900 w-full max-w-[200px] text-white text-center p-1 rounded-md",children:["$",+e.regularPrice-+e.discountPrice," OFF"]}),x&&e.userRef!==x._id&&!u&&L.jsx("button",{onClick:()=>h(!0),className:"bg-slate-900 w-full max-w-[200px] text-white text-center p-1 rounded-md",children:"Contact Landlord"}),u&&L.jsx(ro,{listing:e}),L.jsx(n,{to:"/",children:L.jsx("p",{className:"text-green-700 font-semibold underline",children:"To Home Page"})})]}),L.jsxs("p",{className:"text-slate-800",children:[L.jsx("span",{className:"font-semibold text-black truncate",children:"Description - "}),e.description]}),L.jsxs("ul",{className:"text-green-900 font-semibold text-sm flex flex-wrap items-center gap-4 sm:gap-6",children:[L.jsxs("li",{className:"flex items-center gap-1 whitespace-nowrap ",children:[L.jsx(da,{className:"text-lg"}),e.bedrooms>1?`${e.bedrooms} beds `:`${e.bedrooms} bed `]}),L.jsxs("li",{className:"flex items-center gap-1 whitespace-nowrap ",children:[L.jsx(ca,{className:"text-lg"}),e.bathrooms>1?`${e.bathrooms} baths `:`${e.bathrooms} bath `]}),L.jsxs("li",{className:"flex items-center gap-1 whitespace-nowrap ",children:[L.jsx(ma,{className:"text-lg"}),e.parking?"Parking spot":"No Parking"]}),L.jsxs("li",{className:"flex items-center gap-1 whitespace-nowrap ",children:[L.jsx(ua,{className:"text-lg"}),e.furnished?"Furnished":"Unfurnished"]})]})]})]}),L.jsx("hr",{style:{borderTop:"2px solid #ccc",margin:"20px 0"}})]})},ao=()=>{const e=a(),[s,r]=t.useState({searchTerm:"",type:"all",parking:!1,furnished:!1,offer:!1,sort:"createdAt",order:"desc"}),[n,i]=t.useState(!1),[o,l]=t.useState([]),[c,d]=t.useState(!1);t.useEffect((()=>{const e=new URLSearchParams(window.location.search),t=e.get("searchTerm"),s=e.get("type"),n=e.get("parking"),a=e.get("furnished"),o=e.get("offer"),c=e.get("sort"),u=e.get("order");(t||s||n||a||o||c||u)&&r({searchTerm:t||"",type:s||"all",parking:"true"===n,furnished:"true"===a,offer:"true"===o,sort:c||"created_at",order:u||"desc"});(async()=>{i(!0),d(!1);const t=e.toString(),s=await fetch(`/api/listing/get?${t}`),r=await s.json();r.length>8?d(!0):d(!1),l(r),i(!1)})()}),[location.search]);const u=e=>{if("all"!==e.target.id&&"rent"!==e.target.id&&"sale"!==e.target.id||r({...s,type:e.target.id}),"searchTerm"===e.target.id&&r({...s,searchTerm:e.target.value}),"parking"!==e.target.id&&"furnished"!==e.target.id&&"offer"!==e.target.id||r({...s,[e.target.id]:!(!e.target.checked&&"true"!==e.target.checked)}),"sort_order"===e.target.id){const t=e.target.value.split("_")[0]||"created_at",n=e.target.value.split("_")[1]||"desc";r({...s,sort:t,order:n})}};return L.jsxs("div",{className:"flex flex-col md:flex-row",children:[L.jsx("div",{className:"p-7 border-b-2 md:border-r-2 md:min-h-screen",children:L.jsxs("form",{onSubmit:t=>{t.preventDefault();const r=new URLSearchParams;r.set("searchTerm",s.searchTerm),r.set("type",s.type),r.set("parking",s.parking),r.set("furnished",s.furnished),r.set("offer",s.offer),r.set("sort",s.sort),r.set("order",s.order);const n=r.toString();e(`/search?${n}`)},className:"flex flex-col gap-8",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("label",{className:"whitespace-nowrap font-semibold",children:"Search Term:"}),L.jsx("input",{type:"text",id:"searchTerm",placeholder:"Enter Search Term...",className:"border rounded-lg p-3 w-full",value:s.searchTerm,onChange:u})]}),L.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[L.jsx("label",{className:"font-semibold",children:"Type:"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"all",className:"w-5",onChange:u,checked:"all"===s.type}),L.jsx("span",{children:"Rent & Sale"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"rent",className:"w-5",onChange:u,checked:"rent"===s.type}),L.jsx("span",{children:"Rent"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"sale",className:"w-5",onChange:u,checked:"sale"===s.type}),L.jsx("span",{children:"Sale"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"offer",className:"w-5",onChange:u,checked:s.offer}),L.jsx("span",{children:"Offer"})]})]}),L.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[L.jsx("label",{className:"font-semibold",children:"Amenities:"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"parking",className:"w-5",onChange:u,checked:s.parking}),L.jsx("span",{children:"Parking"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"checkbox",id:"furnished",className:"w-5",onChange:u,checked:s.furnished}),L.jsx("span",{children:"Furnished"})]})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("label",{className:"font-semibold",children:" Sort: "}),L.jsxs("select",{onChange:u,defaultValue:"created_at_desc",className:"border rounded-lg p-3",id:"sort_order",children:[L.jsx("option",{value:"regularPrice_desc",children:"Price high to low"}),L.jsx("option",{value:"regularPrice_asc",children:"Price low to high"}),L.jsx("option",{value:"createdAt_desc",children:"Latest"}),L.jsx("option",{value:"createdAt_asc",children:"Oldest"})]})]}),L.jsx("button",{className:"bg-slate-700 text-white rounded-lg p-3 uppercase hover:opacity-95",children:"Search"})]})}),L.jsxs("div",{className:"flex-1",children:[L.jsx("h1",{className:"text-3xl font-semibold border-b p-3 text-slate-700 mt-5",children:"Listing Results:"}),L.jsxs("div",{className:"p-7 flex flex-wrap gap-4",children:[!n&&0===o.length&&L.jsx("p",{className:"text-xl text-slate-700",children:"No listings found!"}),n&&L.jsx("p",{className:"text-xl text-slate-700 text-center w-full",children:"Loading..."}),!n&&o&&o.map((e=>L.jsx(ae,{listing:e},e._id))),c&&L.jsx("button",{onClick:async()=>{const e=o.length,t=new URLSearchParams(location.search);t.set("startIndex",e);const s=t.toString(),r=await fetch(`/api/listing/get?${s}`),n=await r.json();n.length<9&&d(!1),l([...o,...n])},className:"text-green-700 hover:underline text-lg font-semibold text-center w-full",children:"Show more"})]})]})]})};function io(){const[e,s]=t.useState(""),r=a();return L.jsx("div",{className:"d-flex justify-content-center align-items-center bg-secondary vh-100",children:L.jsxs("div",{className:"bg-white p-3 rounded w-25",children:[L.jsx("h4",{children:"Forgot Password"}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});await t.json();t.ok&&r("/sign-in")}catch(s){}},children:[L.jsxs("div",{className:"mb-3",children:[L.jsx("label",{htmlFor:"email",children:L.jsx("strong",{children:"Email"})}),L.jsx("input",{type:"email",placeholder:"Enter Email",autoComplete:"off",name:"email",className:"form-control rounded-0",onChange:e=>s(e.target.value)})]}),L.jsx("button",{type:"submit",className:"btn btn-success w-100 rounded-0",children:"Send"})]})]})})}function oo(){const[e,s]=t.useState(""),r=a(),{id:n,token:i}=c();return L.jsx("div",{className:"d-flex justify-content-center align-items-center bg-secondary vh-100",children:L.jsxs("div",{className:"bg-white p-3 rounded w-25",children:[L.jsx("h4",{children:"Reset Password"}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch(`/api/auth/reset-password/${n}/${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(t.ok)r("/sign-in");else{await t.json()}}catch(s){}},children:[L.jsxs("div",{className:"mb-3",children:[L.jsx("label",{htmlFor:"password",children:L.jsx("strong",{children:"New Password"})}),L.jsx("input",{type:"password",placeholder:"Enter Password",autoComplete:"off",name:"password",className:"form-control rounded-0",value:e,onChange:e=>s(e.target.value)})]}),L.jsx("button",{type:"submit",className:"btn btn-success w-100 rounded-0",children:"Update"})]})]})})}
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,s)=>s?s.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},co=(...e)=>e.filter(((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t)).join(" ").trim(),uo=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var ho={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=t.forwardRef((({color:e="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>t.createElement("svg",{ref:c,...ho,width:s,height:s,stroke:e,strokeWidth:n?24*Number(r)/Number(s):r,className:co("lucide",a),...!i&&!uo(l)&&{"aria-hidden":"true"},...l},[...o.map((([e,s])=>t.createElement(e,s))),...Array.isArray(i)?i:[i]]))),po=(e,s)=>{const r=t.forwardRef((({className:r,...n},a)=>{return t.createElement(mo,{ref:a,iconNode:s,className:co(`lucide-${i=lo(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n});var i}));return r.displayName=lo(e),r},xo=po("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),go=po("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),fo=po("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),bo=po("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),yo=po("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),vo=po("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wo=po("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),jo=po("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),No=po("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_o=po("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ko=po("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),So=po("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Eo=po("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),To=po("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Ao=po("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Co=po("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Po=po("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Ro=po("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Io=po("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Oo=po("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Uo=po("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Lo=po("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Do=po("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Mo=po("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Fo=po("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Bo=po("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$o=po("shield-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]),qo=po("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),zo=po("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Vo=po("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ho=po("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Wo=po("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Jo=po("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Ko=po("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Go=po("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Xo=po("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Yo=po("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Zo=po("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Qo=po("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function el({user:e,onClose:s,onSave:r}){const[n,a]=t.useState({username:"",email:"",isAdmin:!1}),[i,o]=t.useState(!1),[l,c]=t.useState(null);t.useEffect((()=>{e&&a({username:e.username||"",email:e.email||"",isAdmin:e.isAdmin||!1})}),[e]);const d=e=>{const{name:t,value:s,type:r,checked:i}=e.target;a({...n,[t]:"checkbox"===r?i:s})};return L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Edit User"}),L.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:L.jsx(Qo,{className:"h-6 w-6"})})]}),l&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault(),o(!0),c(null);try{const t=await fetch(`/api/user/role/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:n.isAdmin})}),s=await t.json();if(!1===s.success)return c(s.message),void o(!1);const a=await fetch(`/api/user/update/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,email:n.email})}),i=await a.json();if(!1===i.success)return c(i.message),void o(!1);o(!1),r({...i,isAdmin:n.isAdmin})}catch(s){c("An error occurred while updating the user"),o(!1)}},children:[L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),L.jsx("input",{type:"text",name:"username",value:n.username,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),L.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsx("div",{className:"mb-6",children:L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",name:"isAdmin",checked:n.isAdmin,onChange:d,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),L.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Admin Privileges"})]})}),L.jsxs("div",{className:"flex justify-end gap-2",children:[L.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),L.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":"Save Changes"})]})]})]})})}function tl({onClose:e,onSave:s}){const[r,n]=t.useState({username:"",email:"",password:"",isAdmin:!1}),[a,i]=t.useState(!1),[o,l]=t.useState(null),[c,d]=t.useState(!1),u=e=>{const{name:t,value:s,type:r,checked:a}=e.target;n((e=>({...e,[t]:"checkbox"===r?a:s})))};return L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Add New User"}),L.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:L.jsx(Qo,{className:"h-6 w-6"})})]}),o&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault(),i(!0),l(null);try{if(!r.username||!r.email||!r.password)throw new Error("All fields are required");if(r.password.length<6)throw new Error("Password must be at least 6 characters long");const t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to create user")}const n=await t.json();if(r.isAdmin){const e=await fetch(`/api/user/role/${n._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!0}),credentials:"include"});if(e.ok){const t=await e.json();s(t)}else s({...n,isAdmin:!1})}else s(n);e()}catch(n){l(n.message)}finally{i(!1)}},className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),L.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter username",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),L.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),L.jsxs("div",{className:"relative",children:[L.jsx("input",{type:c?"text":"password",id:"password",name:"password",value:r.password,onChange:u,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password (min 6 characters)",required:!0,minLength:6}),L.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?L.jsx(Ao,{className:"h-5 w-5 text-gray-400"}):L.jsx(Co,{className:"h-5 w-5 text-gray-400"})})]})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:"isAdmin",name:"isAdmin",checked:r.isAdmin,onChange:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),L.jsx("label",{htmlFor:"isAdmin",className:"ml-2 block text-sm text-gray-700",children:"Grant admin privileges"})]}),L.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[L.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:a,children:"Cancel"}),L.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",disabled:a,children:a?"Creating...":"Create User"})]})]})]})})}function sl(){const[e,s]=t.useState([]),[r,n]=t.useState(!0),[a,i]=t.useState(""),[o,l]=t.useState(null),[c,d]=t.useState(null),[u,h]=t.useState(!1),[m,p]=t.useState(null),[x,g]=t.useState(!1),{currentUser:f}=w((e=>e.user)),b=t.useMemo((()=>{if(!a)return e;const t=a.toLowerCase();return e.filter((e=>{var s,r;return(null==(s=e.username)?void 0:s.toLowerCase().includes(t))||(null==(r=e.email)?void 0:r.toLowerCase().includes(t))}))}),[e,a]),y=t.useMemo((()=>({total:e.length,admin:e.filter((e=>e.isAdmin)).length,regular:e.filter((e=>!e.isAdmin)).length})),[e]);t.useEffect((()=>{(null==f?void 0:f.isAdmin)?v():f?(l("Admin access required"),n(!1)):(l("Please sign in to access user management"),n(!1))}),[f]);const v=async(e=!1)=>{try{e?g(!0):n(!0),l(null);const t=new AbortController,r=setTimeout((()=>t.abort()),1e4),a=await fetch("/api/user/all",{credentials:"include",headers:{"Content-Type":"application/json"},signal:t.signal});if(clearTimeout(r),!a.ok)throw new Error(`Failed to fetch users: ${a.status} ${a.statusText}`);const i=await a.json();s(i)}catch(t){"AbortError"===t.name?l("Request timed out. Please check your connection and try again."):l(`Failed to load users: ${t.message}`)}finally{n(!1),g(!1)}},j=async t=>{try{const r=e.find((e=>e._id===t));if(!window.confirm(`Are you sure you want to delete user "${null==r?void 0:r.username}"? This action cannot be undone.`))return;p(t);const n=await fetch(`/api/user/delete/${t}`,{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error(`Failed to delete user: ${n.status} ${n.statusText}`);s(e.filter((e=>e._id!==t))),alert("User deleted successfully")}catch(r){l("Failed to delete user. Please try again later.")}finally{p(null)}},N=async(t,r)=>{try{const n=e.find((e=>e._id===t)),a=r?"remove admin privileges from":"grant admin privileges to";if(!window.confirm(`Are you sure you want to ${a} "${null==n?void 0:n.username}"?`))return;p(t);const i=await fetch(`/api/user/role/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!r}),credentials:"include"});if(!i.ok){await i.text();throw new Error(`Failed to update user role: ${i.status} ${i.statusText}`)}const o=await i.json();s(e.map((e=>e._id===t?o:e)));const l=o.isAdmin?"granted admin privileges":"removed admin privileges";alert(`Successfully ${l} for ${o.username}`)}catch(n){l(`Failed to update user role: ${n.message}`)}finally{p(null)}},_=e=>{d(e)};return f?f&&!f.isAdmin?L.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center px-4",children:[L.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-4",children:"Admin Access Required"}),L.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"You need administrator privileges to access this page."})]}):L.jsxs("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[L.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"User Management"}),L.jsx("p",{className:"text-gray-600 mt-1 text-sm md:text-base",children:"Manage users, roles, and permissions"})]}),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[L.jsxs("button",{onClick:()=>v(!0),disabled:x,className:"flex items-center justify-center bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors disabled:opacity-50",children:[L.jsx(Do,{className:"mr-2 h-4 w-4 "+(x?"animate-spin":"")}),x?"Refreshing...":"Refresh"]}),L.jsxs("button",{onClick:()=>h(!0),className:"flex items-center justify-center bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:[L.jsx(Xo,{className:"mr-2 h-4 w-4"}),"Add User"]})]})]}),L.jsx("div",{className:"mb-6",children:L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(Fo,{className:"h-5 w-5 text-gray-400"})}),L.jsx("input",{type:"text",placeholder:"Search users by name or email...",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:a,onChange:e=>i(e.target.value)})]})}),o&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:L.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[L.jsx("span",{className:"text-sm",children:o}),L.jsx("button",{onClick:()=>v(),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})}),L.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[L.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.total}),L.jsx("div",{className:"text-sm text-gray-500",children:"Total Users"})]}),L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[L.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.admin}),L.jsx("div",{className:"text-sm text-gray-500",children:"Admin Users"})]}),L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[L.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y.regular}),L.jsx("div",{className:"text-sm text-gray-500",children:"Regular Users"})]})]}),r?L.jsx("div",{className:"flex justify-center items-center h-64",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"hidden lg:block bg-white shadow-sm rounded-lg overflow-hidden border",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?L.jsx("tr",{children:L.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:a?"No users found matching your search":"No users found"})}):b.map((e=>L.jsxs("tr",{className:"hover:bg-gray-50 transition-colors "+(m===e._id?"opacity-50":""),children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:L.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:e.avatar||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:e.username,loading:"lazy"})}),L.jsxs("div",{className:"ml-4",children:[L.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.username}),L.jsxs("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:["ID: ",e._id]})]})]})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsx("div",{className:"text-sm text-gray-900 truncate max-w-[200px]",children:e.email})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.isAdmin?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.isAdmin?"Admin":"User"})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 transition-colors",onClick:()=>_(e),disabled:m===e._id,title:"Edit user",children:L.jsx(Vo,{className:"h-4 w-4"})}),L.jsx("button",{className:"transition-colors "+(e.isAdmin?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),onClick:()=>N(e._id,e.isAdmin),disabled:m===e._id,title:e.isAdmin?"Remove admin privileges":"Grant admin privileges",children:e.isAdmin?L.jsx($o,{className:"h-4 w-4"}):L.jsx(qo,{className:"h-4 w-4"})}),L.jsx("button",{className:"text-red-600 hover:text-red-900 transition-colors",onClick:()=>j(e._id),disabled:m===e._id,title:"Delete user",children:L.jsx(Wo,{className:"h-4 w-4"})})]})})]},e._id)))})]})}),L.jsx("div",{className:"lg:hidden space-y-4",children:0===b.length?L.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center text-gray-500",children:a?"No users found matching your search":"No users found"}):b.map((e=>L.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 "+(m===e._id?"opacity-50":""),children:[L.jsxs("div",{className:"flex items-start justify-between mb-3",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:e.avatar||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:e.username,loading:"lazy"}),L.jsxs("div",{children:[L.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.username}),L.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:e.email})]})]}),L.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full "+(e.isAdmin?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.isAdmin?"Admin":"User"})]}),L.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:["Joined: ",new Date(e.createdAt).toLocaleDateString()]}),L.jsxs("div",{className:"flex justify-end space-x-2",children:[L.jsx("button",{className:"p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded transition-colors",onClick:()=>_(e),disabled:m===e._id,title:"Edit user",children:L.jsx(Vo,{className:"h-4 w-4"})}),L.jsx("button",{className:"p-2 rounded transition-colors "+(e.isAdmin?"text-orange-600 hover:text-orange-900 hover:bg-orange-50":"text-green-600 hover:text-green-900 hover:bg-green-50"),onClick:()=>N(e._id,e.isAdmin),disabled:m===e._id,title:e.isAdmin?"Remove admin privileges":"Grant admin privileges",children:e.isAdmin?L.jsx($o,{className:"h-4 w-4"}):L.jsx(qo,{className:"h-4 w-4"})}),L.jsx("button",{className:"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded transition-colors",onClick:()=>j(e._id),disabled:m===e._id,title:"Delete user",children:L.jsx(Wo,{className:"h-4 w-4"})})]})]},e._id)))})]}),c&&L.jsx(el,{user:c,onClose:()=>d(null),onSave:t=>{s(e.map((e=>e._id===t._id?t:e))),d(null)}}),u&&L.jsx(tl,{onClose:()=>h(!1),onSave:t=>{s([t,...e]),h(!1),alert(`User "${t.username}" created successfully!`)}})]}):L.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center px-4",children:[L.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),L.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"Please sign in to access the user management panel."}),L.jsx("a",{href:"/sign-in",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Sign In"})]})}function rl({listing:e,onClose:s,onSave:r}){const[n,a]=t.useState({name:"",address:"",description:"",regularPrice:0,discountPrice:0,type:"rent",bedrooms:1,bathrooms:1,furnished:!1,parking:!1,offer:!1}),[i,o]=t.useState(!1),[l,c]=t.useState(null);t.useEffect((()=>{e&&a({name:e.name||"",address:e.address||"",description:e.description||"",regularPrice:e.regularPrice||0,discountPrice:e.discountPrice||0,type:e.type||"rent",bedrooms:e.bedrooms||1,bathrooms:e.bathrooms||1,furnished:e.furnished||!1,parking:e.parking||!1,offer:e.offer||!1})}),[e]);const d=e=>{const{name:t,value:s,type:r,checked:i}=e.target;a({...n,[t]:"checkbox"===r?i:"number"===r?Number(s):s})};return L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl my-8",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Edit Listing"}),L.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:L.jsx(Qo,{className:"h-6 w-6"})})]}),l&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),L.jsxs("form",{onSubmit:async t=>{t.preventDefault(),o(!0),c(null);try{const t=await fetch(`/api/listing/update/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,imageUrls:e.imageUrls})}),s=await t.json();if(!1===s.success)return c(s.message),void o(!1);o(!1),r(s)}catch(s){c("An error occurred while updating the listing"),o(!1)}},className:"space-y-4",children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),L.jsx("input",{type:"text",name:"name",value:n.name,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),L.jsx("input",{type:"text",name:"address",value:n.address,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{className:"md:col-span-2",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),L.jsx("textarea",{name:"description",value:n.description,onChange:d,rows:"3",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Regular Price"}),L.jsx("input",{type:"number",name:"regularPrice",value:n.regularPrice,onChange:d,min:"1",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),n.offer&&L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Price"}),L.jsx("input",{type:"number",name:"discountPrice",value:n.discountPrice,onChange:d,min:"0",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),L.jsxs("select",{name:"type",value:n.type,onChange:d,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",children:[L.jsx("option",{value:"rent",children:"For Rent"}),L.jsx("option",{value:"sale",children:"For Sale"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),L.jsx("input",{type:"number",name:"bedrooms",value:n.bedrooms,onChange:d,min:"1",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),L.jsx("input",{type:"number",name:"bathrooms",value:n.bathrooms,onChange:d,min:"1",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0})]})]}),L.jsxs("div",{className:"flex flex-wrap gap-4",children:[L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",name:"furnished",checked:n.furnished,onChange:d,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),L.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Furnished"})]}),L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",name:"parking",checked:n.parking,onChange:d,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),L.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Parking"})]}),L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",name:"offer",checked:n.offer,onChange:d,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),L.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Offer"})]})]}),L.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[L.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),L.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":"Save Changes"})]})]})]})})}function nl(){const[e,s]=t.useState([]),[r,n]=t.useState(!0),[i,o]=t.useState(""),[l,c]=t.useState("all"),[d,u]=t.useState("all"),[h,m]=t.useState(null),[p,x]=t.useState(null),[g,f]=t.useState(!1),{currentUser:b}=w((e=>e.user)),y=a();t.useEffect((()=>{if(!b||!b.isAdmin)return void y("/sign-in");(async()=>{try{n(!0),m(null);let e="/api/listing/get";const t=new URLSearchParams;"all"!==d&&t.append("approved","approved"===d?"true":"false"),t.toString()&&(e+=`?${t.toString()}`);const r=await fetch(e,{credentials:"include"});if(!r.ok){const e=await r.text();throw new Error(`Failed to fetch listings: ${r.status} ${r.statusText} - ${e}`)}const a=await r.json(),i=Array.isArray(a)?a:a.listings||[];s(i),n(!1)}catch(e){m(`Failed to load listings: ${e.message}`),n(!1)}})()}),[b,y,d]);const v=e.filter((e=>{var t,s;const r=(null==(t=e.name)?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null==(s=e.address)?void 0:s.toLowerCase().includes(i.toLowerCase())),n="all"===l||e.type===l;return r&&n})),j=e.filter((e=>!e.approved)).length;return L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h1",{className:"text-2xl font-bold",children:"Manage Listings"}),L.jsxs("div",{className:"flex gap-3",children:[j>0&&L.jsxs("button",{onClick:async()=>{try{if(!window.confirm("Are you sure you want to approve all pending listings?"))return;f(!0);const t=await fetch("/api/listing/bulk-approve",{method:"POST",credentials:"include"});if(!t.ok)throw new Error(`Failed to bulk approve listings: ${t.status} ${t.statusText}`);const r=await t.json();s(e.map((e=>({...e,approved:!0})))),alert(`Successfully approved ${r.modifiedCount} listings`),f(!1)}catch(t){m("Failed to bulk approve listings. Please try again later."),f(!1)}},disabled:g,className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition disabled:opacity-50",children:[L.jsx(yo,{className:"mr-2 h-5 w-5"}),g?"Approving...":`Approve All (${j})`]}),L.jsxs("button",{onClick:()=>{y("/create-listing")},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[L.jsx(Lo,{className:"mr-2 h-5 w-5"}),"Create Listing"]})]})]}),L.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[L.jsxs("div",{className:"relative flex-1",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(Fo,{className:"h-5 w-5 text-gray-400"})}),L.jsx("input",{type:"text",placeholder:"Search listings...",className:"pl-10 pr-4 py-2 border rounded-md w-full",value:i,onChange:e=>o(e.target.value)})]}),L.jsxs("select",{className:"border rounded-md px-3 py-2",value:l,onChange:e=>c(e.target.value),children:[L.jsx("option",{value:"all",children:"All Types"}),L.jsx("option",{value:"rent",children:"For Rent"}),L.jsx("option",{value:"sale",children:"For Sale"})]}),L.jsxs("select",{className:"border rounded-md px-3 py-2",value:d,onChange:e=>u(e.target.value),children:[L.jsx("option",{value:"all",children:"All Status"}),L.jsx("option",{value:"approved",children:"Approved"}),L.jsx("option",{value:"pending",children:"Pending Approval"})]})]}),h&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:h}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[L.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),L.jsx("div",{className:"text-sm text-gray-500",children:"Total Listings"})]}),L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[L.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter((e=>e.approved)).length}),L.jsx("div",{className:"text-sm text-gray-500",children:"Approved"})]}),L.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[L.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j}),L.jsx("div",{className:"text-sm text-gray-500",children:"Pending Approval"})]})]}),r?L.jsx("div",{className:"flex justify-center my-8",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===v.length?L.jsx("tr",{children:L.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No listings found"})}):v.map((t=>{var r,n;return L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:L.jsx("img",{className:"h-10 w-10 rounded object-cover",src:(null==(r=t.imageUrls)?void 0:r[0])||"https://cdn.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg",alt:t.name})}),L.jsxs("div",{className:"ml-4",children:[L.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),L.jsx("div",{className:"text-sm text-gray-500",children:t.address})]})]})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("rent"===t.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"rent"===t.type?"For Rent":"For Sale"})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"rent"===t.type?`$${t.regularPrice}/month`:`$${(null==(n=t.regularPrice)?void 0:n.toLocaleString())||0}`}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.approved?L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Approved"}):L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[L.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",onClick:()=>window.open(`/listing/${t._id}`,"_blank"),children:L.jsx(Co,{className:"h-5 w-5"})}),L.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3",onClick:()=>x(t),children:L.jsx(Vo,{className:"h-5 w-5"})}),!t.approved&&L.jsx("button",{className:"text-green-600 hover:text-green-900 mr-3",onClick:()=>(async t=>{try{const r=await fetch(`/api/listing/approve/${t}`,{method:"POST",credentials:"include"});if(!r.ok)throw new Error(`Failed to approve listing: ${r.status} ${r.statusText}`);s(e.map((e=>e._id===t?{...e,approved:!0}:e)))}catch(r){m("Failed to approve listing. Please try again later.")}})(t._id),children:L.jsx(No,{className:"h-5 w-5"})}),L.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>(async t=>{try{if(!window.confirm("Are you sure you want to delete this listing?"))return;const r=await fetch(`/api/listing/delete/${t}`,{method:"DELETE",credentials:"include"});if(!r.ok)throw new Error(`Failed to delete listing: ${r.status} ${r.statusText}`);s(e.filter((e=>e._id!==t)))}catch(r){m("Failed to delete listing. Please try again later.")}})(t._id),children:L.jsx(Jo,{className:"h-5 w-5"})})]})]},t._id)}))})]})}),p&&L.jsx(rl,{listing:p,onClose:()=>x(null),onSave:t=>{s(e.map((e=>e._id===t._id?t:e))),x(null)}})]})}function al(){const[e,s]=t.useState([]),[r,n]=t.useState(!0),[a,i]=t.useState(""),[o,l]=t.useState("all");t.useEffect((()=>{(async()=>{try{s([{_id:"1",userId:"user123",username:"John Doe",amount:49.99,paymentMethod:"Credit Card",status:"completed",date:"2023-05-15",description:"Premium Listing Fee"},{_id:"2",userId:"user456",username:"Jane Smith",amount:99.99,paymentMethod:"PayPal",status:"completed",date:"2023-05-10",description:"Featured Listing - 30 days"},{_id:"3",userId:"user789",username:"Robert Johnson",amount:29.99,paymentMethod:"Credit Card",status:"pending",date:"2023-05-18",description:"Basic Listing Fee"},{_id:"4",userId:"user101",username:"Sarah Williams",amount:149.99,paymentMethod:"Bank Transfer",status:"failed",date:"2023-05-12",description:"Annual Subscription"}]),n(!1)}catch(e){n(!1)}})()}),[]);const c=e.filter((e=>{const t=e.username.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase()),s="all"===o||e.status===o;return t&&s})),d=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h1",{className:"text-2xl font-bold",children:"Payment Management"}),L.jsxs("button",{className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:[L.jsx(To,{className:"mr-2 h-5 w-5"}),"Export"]})]}),L.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[L.jsxs("div",{className:"relative flex-1",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(Fo,{className:"h-5 w-5 text-gray-400"})}),L.jsx("input",{type:"text",placeholder:"Search payments...",className:"pl-10 pr-4 py-2 border rounded-md w-full",value:a,onChange:e=>i(e.target.value)})]}),L.jsxs("select",{className:"border rounded-md px-4 py-2",value:o,onChange:e=>l(e.target.value),children:[L.jsx("option",{value:"all",children:"All Status"}),L.jsx("option",{value:"completed",children:"Completed"}),L.jsx("option",{value:"pending",children:"Pending"}),L.jsx("option",{value:"failed",children:"Failed"})]})]}),r?L.jsx("div",{className:"text-center py-4",children:"Loading payments..."}):L.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e=>L.jsxs("tr",{children:[L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["#",e._id]}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[L.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.username}),L.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",e.userId]})]}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount]}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:L.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:L.jsx(Co,{className:"h-5 w-5"})})})]},e._id)))})]})})]})}function il(){const[e,s]=t.useState("last30"),[r,n]=t.useState("listings"),[a,i]=t.useState({forRent:0,forSale:0,total:0,active:0}),[o,l]=t.useState(!0),[c,d]=t.useState(null);t.useEffect((()=>{(async()=>{try{l(!0),d(null);const e=await fetch("/api/listing/stats");if(!e.ok)throw new Error(`Failed to fetch listing stats: ${e.status} ${e.statusText}`);const t=await e.json();i({forRent:t.forRent||0,forSale:t.forSale||0,total:t.total||0,active:t.active||0}),l(!1)}catch(e){d("Failed to load listing statistics. Please try again later."),l(!1),i({forRent:86,forSale:42,total:128,active:110})}})()}),[]);const u=e=>{n(r===e?null:e)};return L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h1",{className:"text-2xl font-bold",children:"Reports & Analytics"}),L.jsxs("div",{className:"flex items-center gap-4",children:[L.jsxs("div",{className:"flex items-center border rounded-md",children:[L.jsxs("select",{className:"border-0 rounded-md px-4 py-2",value:e,onChange:e=>s(e.target.value),children:[L.jsx("option",{value:"last7",children:"Last 7 Days"}),L.jsx("option",{value:"last30",children:"Last 30 Days"}),L.jsx("option",{value:"last90",children:"Last 90 Days"}),L.jsx("option",{value:"year",children:"This Year"}),L.jsx("option",{value:"custom",children:"Custom Range"})]}),L.jsx("div",{className:"px-3 py-2 border-l",children:L.jsx(go,{className:"h-5 w-5 text-gray-500"})})]}),L.jsxs("button",{className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:[L.jsx(To,{className:"mr-2 h-5 w-5"}),"Export"]})]})]}),c&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:c}),o?L.jsx("div",{className:"flex justify-center my-8",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Total Listings"}),L.jsx("p",{className:"text-3xl font-bold mt-2",children:a.total}),L.jsx("p",{className:"text-sm text-green-600 mt-1",children:"All properties on platform"})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Active Listings"}),L.jsx("p",{className:"text-3xl font-bold mt-2",children:a.active}),L.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Currently available"})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"For Rent"}),L.jsx("p",{className:"text-3xl font-bold mt-2",children:a.forRent}),L.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Rental properties"})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"For Sale"}),L.jsx("p",{className:"text-3xl font-bold mt-2",children:a.forSale}),L.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Properties for sale"})]})]}),L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[L.jsxs("button",{className:"w-full px-6 py-4 flex justify-between items-center text-left",onClick:()=>u("listings"),children:[L.jsx("h3",{className:"text-lg font-semibold",children:"Listings Report"}),"listings"===r?L.jsx(wo,{className:"h-5 w-5 text-gray-500"}):L.jsx(vo,{className:"h-5 w-5 text-gray-500"})]}),"listings"===r&&L.jsx("div",{className:"px-6 py-4 border-t",children:L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),L.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"For Rent"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.forRent}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.forRent}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[a.total>0?Math.round(a.forRent/a.total*100):0,"%"]})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"For Sale"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.forSale}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.forSale}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[a.total>0?Math.round(a.forSale/a.total*100):0,"%"]})]})]})]})})})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[L.jsxs("button",{className:"w-full px-6 py-4 flex justify-between items-center text-left",onClick:()=>u("users"),children:[L.jsx("h3",{className:"text-lg font-semibold",children:"User Activity Report"}),"users"===r?L.jsx(wo,{className:"h-5 w-5 text-gray-500"}):L.jsx(vo,{className:"h-5 w-5 text-gray-500"})]}),"users"===r&&L.jsx("div",{className:"px-6 py-4 border-t",children:L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Period"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previous Period"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"})]})}),L.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"New Registrations"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"145"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"134"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+8.2%"})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Active Users"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"892"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"845"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+5.6%"})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Premium Subscriptions"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"68"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"52"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+30.8%"})]})]})]})})})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[L.jsxs("button",{className:"w-full px-6 py-4 flex justify-between items-center text-left",onClick:()=>u("revenue"),children:[L.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Report"}),"revenue"===r?L.jsx(wo,{className:"h-5 w-5 text-gray-500"}):L.jsx(vo,{className:"h-5 w-5 text-gray-500"})]}),"revenue"===r&&L.jsx("div",{className:"px-6 py-4 border-t",children:L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue Source"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previous Period"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"})]})}),L.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Premium Listings"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$12,450"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$10,890"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+14.3%"})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Featured Properties"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$8,320"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$7,650"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+8.8%"})]}),L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Subscriptions"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$3,810"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"$3,420"}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:"+11.4%"})]})]})]})})})]})]})]})]})}function ol(){const[e,s]=t.useState({siteName:"Real Time Estate",siteDescription:"Find your dream property with Real Time Estate",contactEmail:"contact@realtimeestate.com",phoneNumber:"+1 (555) 123-4567",address:"123 Main Street, New York, NY 10001"}),[r,n]=t.useState({smtpServer:"smtp.example.com",smtpPort:"587",smtpUsername:"notifications@realtimeestate.com",smtpPassword:"••••••••••••",senderName:"Real Time Estate",senderEmail:"notifications@realtimeestate.com"}),[a,i]=t.useState({currency:"USD",paypalClientId:"••••••••••••••••••••••••••",stripePublicKey:"pk_••••••••••••••••••••••••••",stripeSecretKey:"sk_••••••••••••••••••••••••••"}),o=t=>{s({...e,[t.target.name]:t.target.value})},l=e=>{n({...r,[e.target.name]:e.target.value})},c=e=>{i({...a,[e.target.name]:e.target.value})};return L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold mb-6",children:"System Settings"}),L.jsxs("div",{className:"space-y-8",children:[L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h2",{className:"text-xl font-semibold mb-4",children:"General Settings"}),L.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert("General settings saved successfully!")},children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Name"}),L.jsx("input",{type:"text",name:"siteName",value:e.siteName,onChange:o,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),L.jsx("input",{type:"email",name:"contactEmail",value:e.contactEmail,onChange:o,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),L.jsx("input",{type:"text",name:"phoneNumber",value:e.phoneNumber,onChange:o,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),L.jsx("input",{type:"text",name:"address",value:e.address,onChange:o,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{className:"md:col-span-2",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Description"}),L.jsx("textarea",{name:"siteDescription",value:e.siteDescription,onChange:o,rows:"3",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]})]}),L.jsx("div",{className:"mt-6",children:L.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[L.jsx(Mo,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Email Settings"}),L.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert("Email settings saved successfully!")},children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Server"}),L.jsx("input",{type:"text",name:"smtpServer",value:r.smtpServer,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Port"}),L.jsx("input",{type:"text",name:"smtpPort",value:r.smtpPort,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Username"}),L.jsx("input",{type:"text",name:"smtpUsername",value:r.smtpUsername,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Password"}),L.jsx("input",{type:"password",name:"smtpPassword",value:r.smtpPassword,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Name"}),L.jsx("input",{type:"text",name:"senderName",value:r.senderName,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Email"}),L.jsx("input",{type:"email",name:"senderEmail",value:r.senderEmail,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]})]}),L.jsx("div",{className:"mt-6",children:L.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[L.jsx(Mo,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[L.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payment Settings"}),L.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert("Payment settings saved successfully!")},children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),L.jsxs("select",{name:"currency",value:a.currency,onChange:c,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",children:[L.jsx("option",{value:"USD",children:"USD - UGX"}),L.jsx("option",{value:"EUR",children:"EUR - US Dollar"}),L.jsx("option",{value:"GBP",children:"GBP - British Pound"}),L.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"}),L.jsx("option",{value:"AUD",children:"AUD - Australian Dollar"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Client ID"}),L.jsx("input",{type:"password",name:"paypalClientId",value:a.paypalClientId,onChange:c,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stripe Public Key"}),L.jsx("input",{type:"password",name:"stripePublicKey",value:a.stripePublicKey,onChange:c,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stripe Secret Key"}),L.jsx("input",{type:"password",name:"stripeSecretKey",value:a.stripeSecretKey,onChange:c,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]})]}),L.jsx("div",{className:"mt-6",children:L.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[L.jsx(Mo,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})]})]})}function ll(){const[e,s]=t.useState({total:0,active:0,forRent:0,forSale:0,pendingApproval:0,revenue:0,totalUsers:0,adminUsers:0,regularUsers:0}),[r,n]=t.useState([]),[i,o]=t.useState(!0),[l,c]=t.useState(null),{currentUser:d}=w((e=>e.user)),u=a();t.useEffect((()=>{if(!d||!d.isAdmin)return void u("/sign-in");(async()=>{try{o(!0),c(null);const e=await fetch("/api/listing/stats",{credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch listing stats: ${e.status} ${e.statusText}`);const t=await e.json(),r=await fetch("/api/user/count",{credentials:"include"});let a={totalUsers:0,adminUsers:0,regularUsers:0};if(r.ok){const e=await r.json(),t=await fetch("/api/user/all",{credentials:"include"});if(t.ok){const e=await t.json();a={totalUsers:e.length,adminUsers:e.filter((e=>e.isAdmin)).length,regularUsers:e.filter((e=>!e.isAdmin)).length}}else a.totalUsers=e.count||0}s({...t,...a});const i=await fetch("/api/listing/recent",{credentials:"include"});if(!i.ok)throw new Error(`Failed to fetch recent listings: ${i.status} ${i.statusText}`);const l=await i.json();n(l),o(!1)}catch(e){c("Failed to load dashboard data. Please try again later."),o(!1)}})()}),[d,u]);return i?L.jsx("div",{className:"flex justify-center items-center h-64",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?L.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[L.jsx("p",{children:l}),L.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]}):L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:L.jsx(Ro,{className:"h-6 w-6"})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-gray-500",children:"Total Listings"}),L.jsx("p",{className:"text-2xl font-semibold",children:e.total})]})]}),L.jsxs("div",{className:"mt-4 flex justify-between text-sm",children:[L.jsxs("div",{children:[L.jsx("p",{className:"text-gray-500",children:"For Rent"}),L.jsx("p",{className:"font-medium",children:e.forRent})]}),L.jsxs("div",{children:[L.jsx("p",{className:"text-gray-500",children:"For Sale"}),L.jsx("p",{className:"font-medium",children:e.forSale})]})]})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"p-3 rounded-full bg-green-100 text-green-600 mr-4",children:L.jsx(Eo,{className:"h-6 w-6"})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),L.jsxs("p",{className:"text-2xl font-semibold",children:["$",e.revenue.toLocaleString()]})]})]}),L.jsx("div",{className:"mt-4",children:L.jsx("p",{className:"text-sm text-gray-500",children:"Based on listing prices"})})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4",children:L.jsx(Zo,{className:"h-6 w-6"})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),L.jsx("p",{className:"text-2xl font-semibold",children:e.totalUsers})]})]}),L.jsxs("div",{className:"mt-4 flex justify-between text-sm",children:[L.jsxs("div",{children:[L.jsx("p",{className:"text-gray-500",children:"Admins"}),L.jsx("p",{className:"font-medium",children:e.adminUsers})]}),L.jsxs("div",{children:[L.jsx("p",{className:"text-gray-500",children:"Regular"}),L.jsx("p",{className:"font-medium",children:e.regularUsers})]})]})]}),L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4",children:L.jsx(Ko,{className:"h-6 w-6"})}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"}),L.jsx("p",{className:"text-2xl font-semibold",children:e.pendingApproval})]})]}),L.jsx("div",{className:"mt-4",children:e.pendingApproval>0?L.jsxs("div",{className:"flex flex-col gap-2",children:[L.jsx("button",{onClick:()=>u("/admin?tab=approvals"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Review pending listings"}),L.jsx("button",{onClick:async()=>{try{if(!window.confirm("Are you sure you want to approve all pending listings?"))return;const e=await fetch("/api/listing/bulk-approve",{method:"POST",credentials:"include"});if(!e.ok)throw new Error(`Failed to bulk approve listings: ${e.status} ${e.statusText}`);const t=await e.json();alert(`Successfully approved ${t.modifiedCount} listings`),window.location.reload()}catch(e){alert("Failed to bulk approve listings. Please try again later.")}},className:"text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Approve All"})]}):L.jsx("p",{className:"text-sm text-gray-500",children:"No listings pending approval"})})]})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[L.jsx("button",{onClick:()=>u("/admin?tab=users"),className:"bg-blue-50 hover:bg-blue-100 p-6 rounded-lg border border-blue-200 text-left transition",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(Zo,{className:"h-8 w-8 text-blue-600 mr-3"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-semibold text-blue-900",children:"Manage Users"}),L.jsx("p",{className:"text-sm text-blue-700",children:"View and edit user accounts"})]})]})}),L.jsx("button",{onClick:()=>u("/admin?tab=listings"),className:"bg-green-50 hover:bg-green-100 p-6 rounded-lg border border-green-200 text-left transition",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(Ro,{className:"h-8 w-8 text-green-600 mr-3"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-semibold text-green-900",children:"Manage Listings"}),L.jsx("p",{className:"text-sm text-green-700",children:"Review and approve properties"})]})]})}),L.jsx("button",{onClick:()=>u("/admin?tab=approvals"),className:"bg-yellow-50 hover:bg-yellow-100 p-6 rounded-lg border border-yellow-200 text-left transition",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(Ko,{className:"h-8 w-8 text-yellow-600 mr-3"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-semibold text-yellow-900",children:"Pending Approvals"}),L.jsx("p",{className:"text-sm text-yellow-700",children:"Review listings awaiting approval"})]})]})})]}),L.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:[L.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Database Migration"}),L.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"If you're not seeing existing listings, you may need to run a migration to add the approval field to existing listings."}),L.jsx("button",{onClick:async()=>{try{if(!window.confirm("This will set all existing listings as approved. Continue?"))return;const e=await fetch("/api/listing/migrate",{method:"POST",credentials:"include"});if(!e.ok)throw new Error(`Migration failed: ${e.status} ${e.statusText}`);const t=await e.json();alert(`Migration completed successfully. Updated ${t.modifiedCount} listings.`),window.location.reload()}catch(e){alert("Migration failed. Please try again later.")}},className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",children:"Run Migration"})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-lg font-semibold",children:"Recent Listings"}),L.jsx("button",{onClick:()=>u("/admin?tab=listings"),className:"text-sm text-blue-600 hover:text-blue-800",children:"View all"})]}),L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),L.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===r.length?L.jsx("tr",{children:L.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No recent listings found"})}):r.map((t=>{var a,i;return L.jsxs("tr",{children:[L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:L.jsx("img",{className:"h-10 w-10 rounded object-cover",src:(null==(a=t.imageUrls)?void 0:a[0])||"https://cdn.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg",alt:t.name})}),L.jsxs("div",{className:"ml-4",children:[L.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),L.jsx("div",{className:"text-sm text-gray-500",children:t.address})]})]})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("rent"===t.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"rent"===t.type?"For Rent":"For Sale"})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"rent"===t.type?`$${t.regularPrice}/month`:`$${(null==(i=t.regularPrice)?void 0:i.toLocaleString())||0}`}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.approved?L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Approved"}):L.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),L.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.createdAt).toLocaleDateString()}),L.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[L.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",onClick:()=>window.open(`/listing/${t._id}`,"_blank"),children:"View"}),!t.approved&&L.jsx("button",{className:"text-green-600 hover:text-green-900",onClick:()=>(async t=>{try{const a=await fetch(`/api/listing/approve/${t}`,{method:"POST",credentials:"include"});if(!a.ok)throw new Error(`Failed to approve listing: ${a.status} ${a.statusText}`);n(r.map((e=>e._id===t?{...e,approved:!0}:e))),s({...e,pendingApproval:Math.max(0,e.pendingApproval-1)})}catch(a){c("Failed to approve listing. Please try again later.")}})(t._id),children:"Approve"})]})]},t._id)}))})]})})]})]})}function cl(){const[e,s]=t.useState([]),[r,n]=t.useState(!0),[i,o]=t.useState(null),[l,c]=t.useState(""),[d,u]=t.useState(null),[h,m]=t.useState(null),{currentUser:p}=w((e=>e.user)),x=a();t.useEffect((()=>{p&&p.isAdmin?g():x("/sign-in")}),[p,x]);const g=async()=>{try{n(!0),o(null);const e=await fetch("/api/listing/get?approved=false",{credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch pending listings: ${e.status} ${e.statusText}`);const t=await e.json();Array.isArray(t)?s(t):t.listings&&Array.isArray(t.listings)?s(t.listings):s([]),n(!1)}catch(e){o("Failed to load pending listings. Please try again later."),n(!1)}};return r?L.jsx("div",{className:"flex justify-center my-8",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):i?L.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[i,L.jsx("button",{onClick:g,className:"ml-4 bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"Retry"})]}):0===e.length?L.jsxs("div",{className:"text-center py-8",children:[L.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:L.jsxs("div",{className:"flex items-center justify-center",children:[L.jsx(No,{className:"h-5 w-5 mr-2"}),"No listings pending approval. All listings are up to date!"]})}),L.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Refresh"})]}):L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold",children:"Pending Approvals"}),L.jsxs("p",{className:"text-gray-600 mt-1",children:[e.length," listing",1!==e.length?"s":""," waiting for approval"]})]}),e.length>0&&L.jsxs("div",{className:"flex gap-3",children:[L.jsx("button",{onClick:g,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition",children:"Refresh"}),L.jsxs("button",{onClick:async()=>{try{if(!window.confirm(`Are you sure you want to approve all ${e.length} pending listings? This will make them live on the website.`))return;n(!0);const t=await fetch("/api/listing/bulk-approve",{method:"POST",credentials:"include"});if(!t.ok)throw new Error(`Failed to bulk approve listings: ${t.status} ${t.statusText}`);const r=await t.json();s([]),alert(`Successfully approved ${r.modifiedCount} listings! They are now live on the website.`),n(!1)}catch(t){o("Failed to bulk approve listings. Please try again later."),n(!1)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition",children:["Approve All (",e.length,")"]})]})]}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t=>L.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border",children:[L.jsxs("div",{className:"relative h-48",children:[L.jsx("img",{src:t.imageUrls[0]||"/placeholder.svg",alt:t.name,className:"w-full h-full object-cover"}),L.jsx("div",{className:"absolute top-2 right-2",children:L.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 flex items-center",children:[L.jsx(ko,{className:"h-3 w-3 mr-1"}),"Pending"]})}),L.jsx("div",{className:"absolute top-2 left-2",children:L.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full "+("rent"===t.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"rent"===t.type?"For Rent":"For Sale"})})]}),L.jsxs("div",{className:"p-4",children:[L.jsx("h2",{className:"text-lg font-semibold mb-2 line-clamp-1",children:t.name}),L.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-1",children:t.address}),L.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["$",t.regularPrice.toLocaleString(),"rent"===t.type&&" / month"]}),L.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[L.jsxs("p",{children:[t.bedrooms," ",t.bedrooms>1?"beds":"bed"," · ",t.bathrooms," ",t.bathrooms>1?"baths":"bath"]}),L.jsxs("p",{className:"flex items-center mt-1",children:[L.jsx(Yo,{className:"h-3 w-3 mr-1"}),"Submitted: ",new Date(t.createdAt).toLocaleDateString()]})]}),d===t._id?L.jsxs("div",{className:"mt-4",children:[L.jsx("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"Reason for rejection (optional)",className:"w-full p-2 border rounded-md mb-2 text-sm",rows:2}),L.jsxs("div",{className:"flex justify-between",children:[L.jsx("button",{onClick:()=>(async t=>{try{m(t);const r=await fetch(`/api/listing/reject/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:l}),credentials:"include"});if(!r.ok)throw new Error(`Failed to reject listing: ${r.status} ${r.statusText}`);const n=await r.json();c(""),u(null),s(e.filter((e=>e._id!==t))),alert(`Listing "${n.name}" has been rejected.`),m(null)}catch(r){o("Failed to reject listing. Please try again later."),m(null)}})(t._id),disabled:h===t._id,className:"bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700 transition disabled:opacity-50",children:h===t._id?"Rejecting...":"Confirm Reject"}),L.jsx("button",{onClick:()=>{u(null),c("")},className:"bg-gray-300 text-gray-800 px-3 py-1 rounded-md hover:bg-gray-400 transition",children:"Cancel"})]})]}):L.jsxs("div",{className:"flex justify-between mt-4",children:[L.jsxs("button",{onClick:()=>window.open(`/listing/${t._id}`,"_blank"),className:"flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[L.jsx(Co,{className:"h-4 w-4 mr-1"}),"Preview"]}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsxs("button",{onClick:()=>(async t=>{try{m(t);const r=await fetch(`/api/listing/approve/${t}`,{method:"POST",credentials:"include"});if(!r.ok)throw new Error(`Failed to approve listing: ${r.status} ${r.statusText}`);const n=await r.json();s(e.filter((e=>e._id!==t))),alert(`Listing "${n.name}" has been approved and is now live!`),m(null)}catch(r){o("Failed to approve listing. Please try again later."),m(null)}})(t._id),disabled:h===t._id,className:"flex items-center text-green-600 hover:text-green-800 text-sm disabled:opacity-50",children:[L.jsx(No,{className:"h-4 w-4 mr-1"}),h===t._id?"Approving...":"Approve"]}),L.jsxs("button",{onClick:()=>u(t._id),disabled:h===t._id,className:"flex items-center text-red-600 hover:text-red-800 text-sm disabled:opacity-50",children:[L.jsx(_o,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})]},t._id)))})]})}function dl(){const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState("dashboard"),[n,o]=t.useState(!1),[l,c]=t.useState(!0),[d,u]=t.useState(null),[h,m]=t.useState(!1),p=a(),x=i(),g=v();t.useEffect((()=>{(async()=>{if(!h){c(!0),u(null);try{if(!e)return void p("/sign-in");if(!0===e.isAdmin)return o(!0),c(!1),void m(!0);const t=await fetch(`/api/user/check-admin/${e._id}`);if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to check admin status")}(await t.json()).isAdmin?(o(!0),g(we(!0))):p("/")}catch(t){u(t.message),p("/")}finally{c(!1),m(!0)}}})()}),[e,p,h,g]),t.useEffect((()=>{const e=new URLSearchParams(x.search).get("tab");e&&r(e)}),[x.search]);const f=e=>{r(e),p(`/admin?tab=${e}`)};return l?L.jsx("div",{className:"flex h-screen items-center justify-center",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),L.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):d?L.jsx("div",{className:"flex h-screen items-center justify-center",children:L.jsxs("div",{className:"text-center max-w-md p-6 bg-red-50 rounded-lg",children:[L.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Access Error"}),L.jsx("p",{className:"text-gray-700 mb-4",children:d}),L.jsx("button",{onClick:()=>p("/"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Return to Home"})]})}):n?L.jsxs("div",{className:"flex h-screen bg-gray-100",children:[L.jsxs("div",{className:"w-64 bg-white shadow-md",children:[L.jsx("div",{className:"p-4 border-b",children:L.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Panel"})}),L.jsx("nav",{className:"mt-4",children:L.jsxs("ul",{children:[L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("dashboard"),className:"flex items-center w-full px-4 py-3 "+("dashboard"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(Io,{className:"mr-3 h-5 w-5"}),"Dashboard"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("users"),className:"flex items-center w-full px-4 py-3 "+("users"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(Zo,{className:"mr-3 h-5 w-5"}),"Users"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("listings"),className:"flex items-center w-full px-4 py-3 "+("listings"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(Ro,{className:"mr-3 h-5 w-5"}),"Listings"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("approvals"),className:"flex items-center w-full px-4 py-3 "+("approvals"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(zo,{className:"mr-3 h-5 w-5"}),"Approvals"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("payments"),className:"flex items-center w-full px-4 py-3 "+("payments"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(So,{className:"mr-3 h-5 w-5"}),"Payments"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("reports"),className:"flex items-center w-full px-4 py-3 "+("reports"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(bo,{className:"mr-3 h-5 w-5"}),"Reports"]})}),L.jsx("li",{children:L.jsxs("button",{onClick:()=>f("settings"),className:"flex items-center w-full px-4 py-3 "+("settings"===s?"bg-slate-100 text-slate-900 font-medium":"text-gray-600 hover:bg-slate-50"),children:[L.jsx(Bo,{className:"mr-3 h-5 w-5"}),"Settings"]})}),L.jsx("li",{children:L.jsxs("a",{href:"/",className:"flex items-center w-full px-4 py-3 text-gray-600 hover:bg-slate-50",children:[L.jsx(Oo,{className:"mr-3 h-5 w-5"}),"Back to Site"]})})]})})]}),L.jsx("div",{className:"flex-1 overflow-auto",children:L.jsx("div",{className:"p-6",children:(()=>{switch(s){case"dashboard":default:return L.jsx(ll,{});case"users":return L.jsx(sl,{});case"listings":return L.jsx(nl,{},"listings");case"approvals":return L.jsx(cl,{},"approvals");case"payments":return L.jsx(al,{});case"reports":return L.jsx(il,{});case"settings":return L.jsx(ol,{})}})()})})]}):null}function ul(){const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState([]),[o,l]=t.useState(!0),[c,d]=t.useState("");t.useState("all");const u=a(),h=i(),m=h.search.includes("postingPath=true"),p=new URLSearchParams(h.search).get("subNavFilterType")||"all";t.useEffect((()=>{e?x():l(!1)}),[e,h.search]);const x=async()=>{try{if(l(!0),e){const t=await fetch(`/api/listing/get?userRef=${e._id}`,{method:"GET",credentials:"include"});if(!t.ok)throw new Error("Failed to fetch properties");const s=await t.json();r(s)}l(!1)}catch(t){r([{_id:"1",name:"Modern Apartment in Downtown",address:"123 Main St, New York, NY",imageUrls:["https://cdn.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg"],regularPrice:2500,rentalStatus:"occupied",tenant:"John Smith",leaseEnd:"2023-12-31",nextPayment:"2023-06-01",approved:!0},{_id:"2",name:"Cozy Studio Near Campus",address:"789 College Blvd, Boston, MA",imageUrls:["https://cdn.pixabay.com/photo/2014/07/31/21/41/apartment-1867187_1280.jpg"],regularPrice:1200,rentalStatus:"vacant",tenant:null,leaseEnd:null,nextPayment:null,approved:!1},{_id:"3",name:"Suburban Family Home",address:"456 Oak St, Chicago, IL",imageUrls:["https://cdn.pixabay.com/photo/2016/11/29/03/53/house-1867187_1280.jpg"],regularPrice:3200,rentalStatus:"occupied",tenant:"Jane Doe",leaseEnd:"2024-05-15",nextPayment:"2023-06-01",approved:!0}]),l(!1)}},g=()=>{if(e)u("/post-listing-preview");else{u(`/rental-manager/login?url=${encodeURIComponent("/post-listing-preview")}`)}},f=s.filter((e=>{var t,s;const r=(null==(t=e.name)?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null==(s=e.address)?void 0:s.toLowerCase().includes(c.toLowerCase())),n="all"===p||"approved"===p&&e.approved||"pending"===p&&!e.approved||"occupied"===p&&"occupied"===e.rentalStatus||"vacant"===p&&"vacant"===e.rentalStatus||"maintenance"===p&&"maintenance"===e.rentalStatus;return r&&n})),b=e=>{switch(e){case"occupied":return"bg-green-100 text-green-800";case"vacant":return"bg-yellow-100 text-yellow-800";case"maintenance":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=m||e;return L.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[L.jsx("div",{className:"border-b",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsxs("div",{className:"flex justify-between items-center py-4",children:[L.jsx("div",{className:"flex items-center",children:L.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Rental Manager"})}),L.jsxs("div",{className:"flex space-x-4",children:[L.jsx("button",{className:"text-blue-600 font-medium",children:"Contact sales"}),L.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:"Post your listing"})]})]})})}),y?L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[L.jsx("div",{className:"mb-8 border-b",children:L.jsxs("div",{className:"flex space-x-8",children:[L.jsx(n,{to:"/rental-manager/properties?postingPath=true",className:"pb-4 px-1 border-b-2 border-blue-600 text-blue-600 font-medium",children:"Properties"}),L.jsx(n,{to:"/rental-manager/tenants",className:"pb-4 px-1 text-gray-500 hover:text-gray-700",children:"Tenants"}),L.jsx(n,{to:"/rental-manager/leases",className:"pb-4 px-1 text-gray-500 hover:text-gray-700",children:"Leases"}),L.jsx(n,{to:"/rental-manager/payments",className:"pb-4 px-1 text-gray-500 hover:text-gray-700",children:"Payments"}),L.jsx(n,{to:"/rental-manager/maintenance",className:"pb-4 px-1 text-gray-500 hover:text-gray-700",children:"Maintenance"})]})}),L.jsxs("div",{className:"mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"My Listings"}),L.jsx("p",{className:"text-gray-600",children:"Manage your rental properties and listings in one place."})]}),L.jsx("div",{className:"border-b mb-6",children:L.jsxs("div",{className:"flex space-x-8 overflow-x-auto",children:[L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=all",className:"pb-4 px-1 whitespace-nowrap "+("all"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"All"}),L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=approved",className:"pb-4 px-1 whitespace-nowrap "+("approved"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"Approved"}),L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=pending",className:"pb-4 px-1 whitespace-nowrap "+("pending"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"Pending Approval"}),L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=occupied",className:"pb-4 px-1 whitespace-nowrap "+("occupied"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"Occupied"}),L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=vacant",className:"pb-4 px-1 whitespace-nowrap "+("vacant"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"Vacant"}),L.jsx(n,{to:"/rental-manager/properties?postingPath=true&subNavFilterType=maintenance",className:"pb-4 px-1 whitespace-nowrap "+("maintenance"===p?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-500"),children:"Maintenance"})]})}),L.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[L.jsxs("div",{className:"relative w-full sm:w-auto",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(Fo,{className:"h-5 w-5 text-gray-400"})}),L.jsx("input",{type:"text",placeholder:"Search properties...",className:"pl-10 pr-4 py-2 border rounded-md w-full sm:w-80",value:c,onChange:e=>d(e.target.value)})]}),L.jsxs("button",{onClick:g,className:"w-full sm:w-auto flex items-center justify-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[L.jsx(Lo,{className:"mr-2 h-5 w-5"}),"Add Property"]})]}),o?L.jsxs("div",{className:"text-center py-8",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),L.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your properties..."})]}):f.length>0?L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((e=>{return L.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border",children:[L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${e.imageUrls[0]})`}}),L.jsx("div",{className:"absolute top-2 right-2",children:L.jsx("div",{className:"flex items-center px-2 py-1 rounded-full text-xs font-semibold "+(t=e.approved,t?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:e.approved?L.jsxs(L.Fragment,{children:[L.jsx(No,{className:"h-3 w-3 mr-1"}),"Approved"]}):L.jsxs(L.Fragment,{children:[L.jsx(ko,{className:"h-3 w-3 mr-1"}),"Pending Approval"]})})})]}),L.jsxs("div",{className:"p-4",children:[L.jsx("h3",{className:"text-lg font-semibold mb-1",children:e.name}),L.jsx("p",{className:"text-gray-500 text-sm mb-3",children:e.address}),L.jsxs("div",{className:"flex justify-between items-center mb-3",children:[L.jsxs("span",{className:"text-gray-700 font-medium",children:["$",e.regularPrice,"rent"===e.type?"/month":""]}),e.rentalStatus&&L.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${b(e.rentalStatus)}`,children:e.rentalStatus.charAt(0).toUpperCase()+e.rentalStatus.slice(1)})]}),!e.approved&&L.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-2 mb-3",children:L.jsxs("div",{className:"flex items-start",children:[L.jsx(Ko,{className:"h-4 w-4 text-amber-500 mt-0.5 mr-2 flex-shrink-0"}),L.jsx("p",{className:"text-xs text-amber-800",children:"This listing is pending approval by an administrator and is not visible to the public yet."})]})}),"occupied"===e.rentalStatus&&L.jsxs("div",{className:"border-t pt-3 mt-3",children:[L.jsxs("p",{className:"text-sm text-gray-600",children:[L.jsx("span",{className:"font-medium",children:"Tenant:"})," ",e.tenant]}),L.jsxs("p",{className:"text-sm text-gray-600",children:[L.jsx("span",{className:"font-medium",children:"Lease ends:"})," ",e.leaseEnd?new Date(e.leaseEnd).toLocaleDateString():"N/A"]}),L.jsxs("p",{className:"text-sm text-gray-600",children:[L.jsx("span",{className:"font-medium",children:"Next payment:"})," ",e.nextPayment?new Date(e.nextPayment).toLocaleDateString():"N/A"]})]}),L.jsxs("div",{className:"mt-4 flex justify-between",children:[L.jsx(n,{to:`/listing/${e._id}`,className:"text-blue-600 text-sm font-medium hover:underline",children:"View Details"}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsxs("button",{className:"text-blue-600 text-sm font-medium hover:underline flex items-center",children:[L.jsx(go,{className:"h-4 w-4 mr-1"}),"occupied"===e.rentalStatus?"Manage Lease":"List Property"]}),L.jsx("button",{className:"text-gray-500 text-sm font-medium hover:underline flex items-center",children:L.jsx(Bo,{className:"h-4 w-4 mr-1"})})]})]})]})]},e._id);var t}))}):L.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[L.jsx(Ro,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),L.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No properties found"}),L.jsx("p",{className:"text-gray-500 mb-6",children:c||"all"!==p?"Try adjusting your search or filters":"Get started by adding your first property"}),L.jsxs("button",{onClick:g,className:"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition font-medium",children:[L.jsx(Lo,{className:"mr-2 h-5 w-5"}),"Add Property"]})]})]}):L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[L.jsxs("div",{children:[L.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-6",children:"Level up your landlording simply and confidently"}),L.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Take the extra legwork out of running your rental. From leases and payments to maintenance and move-out, Rental Manager has the tools to help you get more done."}),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[L.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition font-medium",children:"Get started"}),L.jsxs("div",{className:"flex items-center mt-4 sm:mt-0",children:[L.jsx("span",{className:"text-gray-600 mr-2",children:"Already have an account?"}),L.jsx(n,{to:"/sign-in",className:"text-blue-600 font-medium hover:underline",children:"Sign in"})]})]})]}),L.jsx("div",{className:"hidden md:block",children:L.jsx("img",{src:"https://cdn.pixabay.com/photo/2017/08/01/00/38/man-2562325_1280.jpg",alt:"Landlord managing property",className:"rounded-lg shadow-lg"})})]})})}),L.jsx("div",{className:"bg-blue-900 text-white",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[L.jsxs("div",{className:"mb-12",children:[L.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Rent like a pro with Rental Manager"}),L.jsx("p",{className:"text-lg max-w-3xl",children:"Posting a listing is just the beginning. Build and sign leases, screen tenants, collect rent and fill vacancies with over 30 million monthly visitors."}),L.jsx("button",{onClick:g,className:"mt-6 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition font-medium",children:"Get started for free"}),L.jsx("div",{className:"mt-4 flex items-center",children:L.jsxs(n,{to:"#",className:"text-white font-medium hover:underline flex items-center",children:["View paid services ",L.jsx(xo,{className:"ml-2 h-4 w-4"})]})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[L.jsxs("div",{className:"bg-white text-gray-800 p-6 rounded-lg shadow-md",children:[L.jsx("div",{className:"mb-4 text-blue-600",children:L.jsx(Ro,{className:"h-10 w-10"})}),L.jsx("h3",{className:"text-xl font-bold mb-3",children:"Post listings & find renters quickly and easily"}),L.jsx("p",{className:"mb-4",children:"Create listings in minutes to reach the most visitors of any rentals network."}),L.jsx(n,{to:"#",className:"text-blue-600 font-medium hover:underline",children:"Learn more"})]}),L.jsxs("div",{className:"bg-white text-gray-800 p-6 rounded-lg shadow-md",children:[L.jsx("div",{className:"mb-4 text-blue-600",children:L.jsx(Po,{className:"h-10 w-10"})}),L.jsx("h3",{className:"text-xl font-bold mb-3",children:"Create & send leases for signing"}),L.jsx("p",{className:"mb-4",children:"Build a new lease online or upload your own for signing. Our lease tools make it simple."}),L.jsx(n,{to:"#",className:"text-blue-600 font-medium hover:underline",children:"Learn more"})]}),L.jsxs("div",{className:"bg-white text-gray-800 p-6 rounded-lg shadow-md",children:[L.jsx("div",{className:"mb-4 text-blue-600",children:L.jsx(Eo,{className:"h-10 w-10"})}),L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reliable Payments"}),L.jsx("p",{className:"mb-4",children:"Get paid on time with automatic rent collection and payment tracking."}),L.jsx(n,{to:"#",className:"text-blue-600 font-medium hover:underline",children:"Learn more"})]})]})]})}),L.jsx("div",{className:"bg-gray-50",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[L.jsxs("div",{className:"text-center mb-12",children:[L.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Why use Rental Manager?"}),L.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Our all-in-one platform helps landlords save time, reduce stress, and maximize rental income."})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 inline-flex mb-4",children:L.jsx(Zo,{className:"h-8 w-8"})}),L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Quality Tenants"}),L.jsx("p",{className:"text-gray-600",children:"Screen tenants with background and credit checks to find reliable renters."})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 inline-flex mb-4",children:L.jsx(Eo,{className:"h-8 w-8"})}),L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reliable Payments"}),L.jsx("p",{className:"text-gray-600",children:"Get paid on time with automatic rent collection and payment tracking."})]}),L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full p-4 inline-flex mb-4",children:L.jsx(Po,{className:"h-8 w-8"})}),L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Digital Leases"}),L.jsx("p",{className:"text-gray-600",children:"Create, send, and sign leases online with legally binding e-signatures."})]})]})]})}),L.jsx("div",{className:"bg-blue-600 text-white",children:L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center",children:[L.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to simplify your rental management?"}),L.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"Join thousands of landlords who are saving time and increasing profits with our platform."}),L.jsx("button",{onClick:g,className:"bg-white text-blue-600 px-8 py-3 rounded-md font-medium hover:bg-gray-100 transition",children:"Get started for free"})]})})]})]})}function hl(){const[e,s]=t.useState({email:"",password:""}),[r,o]=t.useState("signin"),{loading:l,error:c,currentUser:d}=w((e=>e.user)),u=a(),h=v(),m=i(),p=new URLSearchParams(m.search).get("url")||"/rental-manager";t.useEffect((()=>{d&&u(p)}),[d,u,p]);const x=t=>{s({...e,[t.target.id]:t.target.value})};return L.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen",children:[L.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-12 flex flex-col",children:[L.jsx("div",{className:"mb-8",children:L.jsxs(n,{to:"/",className:"flex items-center",children:[L.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"Estate"}),L.jsx("span",{className:"text-2xl font-bold text-slate-700",children:"App"})]})}),L.jsxs("div",{className:"max-w-md mx-auto w-full",children:[L.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Sign up for Estate Rental Manager"}),L.jsxs("div",{className:"flex border-b mb-6",children:[L.jsx("button",{className:"pb-2 px-4 "+("signin"===r?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500"),onClick:()=>o("signin"),children:"Sign in"}),L.jsx("button",{className:"pb-2 px-4 "+("newaccount"===r?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500"),onClick:()=>o("newaccount"),children:"New account"})]}),"signin"===r?L.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{h(le());const t=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!1===s.success)return void h(de(s.message));h(ce(s)),u(p)}catch(s){h(de(s.message))}},className:"flex flex-col gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),L.jsx("input",{type:"email",id:"email",placeholder:"Enter email",className:"w-full p-3 border border-gray-300 rounded-md",onChange:x,required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),L.jsx("input",{type:"password",id:"password",placeholder:"Enter password",className:"w-full p-3 border border-gray-300 rounded-md",onChange:x,required:!0})]}),L.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-md font-medium mt-2",children:l?"Loading...":"Sign in"}),L.jsx("div",{className:"text-center",children:L.jsx(n,{to:"/forgot-password",className:"text-blue-600 hover:underline text-sm",children:"Forgot your password?"})}),L.jsxs("div",{className:"mt-4",children:[L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-0 flex items-center",children:L.jsx("div",{className:"w-full border-t border-gray-300"})}),L.jsx("div",{className:"relative flex justify-center text-sm",children:L.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or connect with"})})]}),L.jsxs("div",{className:"mt-4 grid gap-3",children:[L.jsx(oa,{}),L.jsx(ga,{})]})]}),c&&L.jsx("p",{className:"text-red-500 mt-3 text-center",children:c})]}):L.jsxs("div",{className:"text-center py-8",children:[L.jsx("p",{className:"mb-4",children:"Create a new account to get started"}),L.jsx(n,{to:"/sign-up"+("/"!==p?`?redirect=${encodeURIComponent(p)}`:""),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-md font-medium inline-block",children:"Create account"})]})]})]}),L.jsx("div",{className:"w-full md:w-1/2 bg-blue-50 p-6 md:p-12 flex items-center",children:L.jsxs("div",{className:"max-w-md mx-auto",children:[L.jsx("div",{className:"mb-6",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx("span",{className:"text-xl font-bold text-blue-600",children:"Estate"}),L.jsx("span",{className:"text-xl font-bold text-slate-700",children:"Rental Manager"})]})}),L.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-4",children:["It's easier than ever",L.jsx("br",{}),"to be a landlord."]}),L.jsx("p",{className:"text-gray-700 mb-8",children:"Save time with our property management tools that help you get what you need — signed leases and rent payments."}),L.jsx("div",{className:"mt-8",children:L.jsx("img",{src:"https://cdn.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg",alt:"Property management illustration",className:"max-w-full h-auto rounded-lg shadow-md"})})]})})]})}function ml(){const{currentUser:e}=w((e=>e.user)),s=a(),[r,n]=t.useState(1),[i,o]=t.useState([]),[l,c]=t.useState(!1),[d,u]=t.useState(!1),[h,m]=t.useState(!1),[p,x]=t.useState(null),[g,f]=t.useState(!1),[b,y]=t.useState({propertyType:"house",address:"",bedrooms:3,bathrooms:2,squareFootage:"",imageUrls:[],name:"",description:"",regularPrice:1e3,discountPrice:0,offer:!1,parking:!1,furnished:!1,type:"rent",rentalManagement:!0}),[v,j]=t.useState({}),[N,_]=t.useState({});t.useEffect((()=>{if(!e){s(`/rental-manager/login?url=${encodeURIComponent("/post-listing-preview")}`)}}),[e,s]),t.useEffect((()=>{if(b.address&&b.propertyType&&b.bedrooms){const e=0===b.bedrooms?"Studio":`${b.bedrooms} bedroom`,t=`${e} ${b.propertyType} for ${b.type} in ${b.address.split(",")[0]}`,s=`Beautiful ${e} ${b.propertyType} ${"rent"===b.type?"for rent":"for sale"} with ${b.bathrooms} bathroom${b.bathrooms>1?"s":""}${b.squareFootage?` and ${b.squareFootage} sq ft of space`:""}. Located at ${b.address}.${b.parking?" Includes parking.":""}${b.furnished?" Fully furnished.":""}`;y((e=>({...e,name:t,description:s})))}}),[b.address,b.propertyType,b.bedrooms,b.bathrooms,b.squareFootage,b.type,b.parking,b.furnished]);const k=e=>{y({...b,propertyType:e}),_({...N,propertyType:!0})},S=e=>{y({...b,type:e})},E=e=>{const{id:t,checked:s}=e.target;y({...b,[t]:s})},T=e=>{const{id:t,value:s}=e.target;y({...b,[t]:s}),_({...N,[t]:!0}),v[t]&&j({...v,[t]:null})},A=e=>{const{id:t}=e.target;_({...N,[t]:!0}),C(t,b[t])},C=(e,t)=>{const s={...v};switch(e){case"address":t.trim()?t.length<5?s.address="Please enter a complete address":s.address=null:s.address="Address is required";break;case"squareFootage":t&&(isNaN(t)||t<=0)?s.squareFootage="Please enter a valid number":s.squareFootage=null;break;case"regularPrice":!t||isNaN(t)||t<=0?s.regularPrice="Please enter a valid price":s.regularPrice=null}return j(s),!s[e]},P=async e=>new Promise(((t,s)=>{const r=Ji(Gi(Xi(ia),(new Date).getTime()+e.name),e);r.on("state_changed",(e=>{e.bytesTransferred,e.totalBytes}),(e=>{s(e)}),(()=>{Ki(r.snapshot.ref).then((e=>{t(e)}))}))}));return e?L.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[L.jsx("div",{className:"border-b",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsx("div",{className:"flex justify-between items-center py-4",children:L.jsx("div",{className:"flex items-center",children:L.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Post Your Rental"})})})})}),L.jsx("div",{className:"bg-gray-50 border-b",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:L.jsxs("div",{className:"flex items-center overflow-x-auto",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:(1===r?"bg-blue-600 text-white":"bg-gray-200 text-gray-600")+" rounded-full w-8 h-8 flex items-center justify-center font-medium",children:"1"}),L.jsx("span",{className:"ml-2 font-medium "+(1===r?"text-blue-600":"text-gray-600"),children:"Property Details"})]}),L.jsx("div",{className:"h-px bg-gray-300 w-12 mx-4"}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:(2===r?"bg-blue-600 text-white":"bg-gray-200 text-gray-600")+" rounded-full w-8 h-8 flex items-center justify-center font-medium",children:"2"}),L.jsx("span",{className:"ml-2 font-medium "+(2===r?"text-blue-600":"text-gray-600"),children:"Photos & Pricing"})]}),L.jsx("div",{className:"h-px bg-gray-300 w-12 mx-4"}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("div",{className:(3===r?"bg-blue-600 text-white":"bg-gray-200 text-gray-600")+" rounded-full w-8 h-8 flex items-center justify-center font-medium",children:"3"}),L.jsx("span",{className:"ml-2 font-medium "+(3===r?"text-blue-600":"text-gray-600"),children:"Review & Publish"})]})]})})}),L.jsx("div",{className:"flex-grow bg-white",children:L.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[1===r&&L.jsxs(L.Fragment,{children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Tell us about your property"}),L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),L.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[L.jsxs("div",{onClick:()=>k("house"),className:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("house"===b.propertyType?"bg-blue-50 border-blue-500":""),children:[L.jsx(Ro,{className:`h-6 w-6 ${"house"===b.propertyType?"text-blue-600":"text-gray-400"} mb-2`}),L.jsx("span",{className:"text-sm "+("house"===b.propertyType?"font-medium":""),children:"House"})]}),L.jsxs("div",{onClick:()=>k("apartment"),className:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("apartment"===b.propertyType?"bg-blue-50 border-blue-500":""),children:[L.jsx(Ro,{className:`h-6 w-6 ${"apartment"===b.propertyType?"text-blue-600":"text-gray-400"} mb-2`}),L.jsx("span",{className:"text-sm "+("apartment"===b.propertyType?"font-medium":""),children:"Apartment"})]}),L.jsxs("div",{onClick:()=>k("condo"),className:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("condo"===b.propertyType?"bg-blue-50 border-blue-500":""),children:[L.jsx(Ro,{className:`h-6 w-6 ${"condo"===b.propertyType?"text-blue-600":"text-gray-400"} mb-2`}),L.jsx("span",{className:"text-sm "+("condo"===b.propertyType?"font-medium":""),children:"Condo"})]}),L.jsxs("div",{onClick:()=>k("townhouse"),className:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("townhouse"===b.propertyType?"bg-blue-50 border-blue-500":""),children:[L.jsx(Ro,{className:`h-6 w-6 ${"townhouse"===b.propertyType?"text-blue-600":"text-gray-400"} mb-2`}),L.jsx("span",{className:"text-sm "+("townhouse"===b.propertyType?"font-medium":""),children:"Townhouse"})]})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Type"}),L.jsxs("div",{className:"flex space-x-4",children:[L.jsx("div",{onClick:()=>S("rent"),className:"flex-1 border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("rent"===b.type?"bg-blue-50 border-blue-500":""),children:L.jsx("span",{className:"text-sm "+("rent"===b.type?"font-medium text-blue-600":""),children:"For Rent"})}),L.jsx("div",{onClick:()=>S("sale"),className:"flex-1 border rounded-lg p-4 hover:border-blue-500 cursor-pointer "+("sale"===b.type?"bg-blue-50 border-blue-500":""),children:L.jsx("span",{className:"text-sm "+("sale"===b.type?"font-medium text-blue-600":""),children:"For Sale"})})]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Address"}),L.jsxs("div",{className:"relative",children:[L.jsx(Uo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),L.jsx("input",{type:"text",id:"address",placeholder:"Enter your property address",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 "+(N.address&&v.address?"border-red-500":""),value:b.address,onChange:T,onBlur:A})]}),N.address&&v.address&&L.jsxs("div",{className:"mt-1 text-red-500 text-sm flex items-center",children:[L.jsx(jo,{className:"h-4 w-4 mr-1"}),v.address]})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),L.jsx("div",{className:"flex space-x-2",children:[0,1,2,3,4,5].map((e=>L.jsx("button",{type:"button",onClick:()=>{return t=e,y({...b,bedrooms:t}),void _({...N,bedrooms:!0});var t},className:"flex-1 py-2 border rounded-md "+(b.bedrooms===e?"bg-blue-50 border-blue-500 text-blue-600":"text-gray-700"),children:0===e?"Studio":e},e)))})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),L.jsx("div",{className:"flex space-x-2",children:[1,1.5,2,2.5,3,3.5].map((e=>L.jsx("button",{type:"button",onClick:()=>{return t=e,y({...b,bathrooms:t}),void _({...N,bathrooms:!0});var t},className:"flex-1 py-2 border rounded-md "+(b.bathrooms===e?"bg-blue-50 border-blue-500 text-blue-600":"text-gray-700"),children:e},e)))})]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"squareFootage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Square Footage"}),L.jsxs("div",{className:"relative",children:[L.jsx(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),L.jsx("input",{type:"text",id:"squareFootage",placeholder:"Enter square footage",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 "+(N.squareFootage&&v.squareFootage?"border-red-500":""),value:b.squareFootage,onChange:T,onBlur:A})]}),N.squareFootage&&v.squareFootage&&L.jsxs("div",{className:"mt-1 text-red-500 text-sm flex items-center",children:[L.jsx(jo,{className:"h-4 w-4 mr-1"}),v.squareFootage]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:"parking",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:b.parking,onChange:E}),L.jsx("label",{htmlFor:"parking",className:"ml-2 block text-sm text-gray-700",children:"Parking Available"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:"furnished",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:b.furnished,onChange:E}),L.jsx("label",{htmlFor:"furnished",className:"ml-2 block text-sm text-gray-700",children:"Furnished"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:"offer",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:b.offer,onChange:E}),L.jsx("label",{htmlFor:"offer",className:"ml-2 block text-sm text-gray-700",children:"Special Offer"})]})]})]}),L.jsx("div",{className:"pt-6",children:L.jsxs("button",{type:"button",onClick:()=>n(2),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition font-medium flex items-center justify-center",children:["Continue ",L.jsx(xo,{className:"ml-2 h-5 w-5"})]})})]})]}),2===r&&L.jsxs(L.Fragment,{children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add photos and set pricing"}),L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Property Photos ",L.jsx("span",{className:"text-red-500",children:"*"})]}),L.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[0===b.imageUrls.length?L.jsxs(L.Fragment,{children:[L.jsx(fo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),L.jsx("p",{className:"text-gray-600 mb-2",children:"Add photos to get more responses"}),L.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"The first image will be the cover (max 6 images)"})]}):L.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:b.imageUrls.map(((e,t)=>L.jsxs("div",{className:"relative group",children:[L.jsx("img",{src:e||"/placeholder.svg",alt:`Property ${t+1}`,className:"h-24 w-full object-cover rounded-md"}),L.jsx("button",{type:"button",onClick:()=>(e=>{y({...b,imageUrls:b.imageUrls.filter(((t,s)=>s!==e))})})(t),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:L.jsx(Qo,{className:"h-4 w-4"})}),0===t&&L.jsx("span",{className:"absolute bottom-1 left-1 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:"Cover"})]},e)))}),L.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[L.jsx("input",{type:"file",onChange:e=>o(e.target.files),className:"hidden",id:"images",accept:"image/*",multiple:!0}),L.jsxs("label",{htmlFor:"images",className:"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 cursor-pointer inline-flex items-center justify-center",children:[L.jsx(Go,{className:"h-4 w-4 mr-2"}),"Browse Photos"]}),L.jsx("button",{type:"button",onClick:()=>{if(i.length>0&&i.length+b.imageUrls.length<7){c(!0),u(!1);const e=[];for(let t=0;t<i.length;t++)e.push(P(i[t]));Promise.all(e).then((e=>{y({...b,imageUrls:b.imageUrls.concat(e)}),u(!1),c(!1)})).catch((e=>{u("Image upload failed (2MB max per image)"),c(!1),setTimeout((()=>{u(!1)}),4e3)}))}else u("You can only upload up to 6 images per listing"),c(!1),setTimeout((()=>{u(!1)}),4e3)},disabled:!i.length||l,className:(!i.length||l?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700")+" text-white px-4 py-2 rounded-md transition inline-flex items-center justify-center",children:l?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):L.jsxs(L.Fragment,{children:[L.jsx(Go,{className:"h-4 w-4 mr-2"}),"Upload"]})})]}),d&&L.jsx("p",{className:"text-red-500 text-sm mt-2",children:d}),N.images&&v.images&&L.jsx("p",{className:"text-red-500 text-sm mt-2",children:v.images})]})]}),L.jsxs("div",{children:[L.jsxs("label",{htmlFor:"regularPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:["rent"===b.type?"Monthly Rent":"Listing Price"," ",L.jsx("span",{className:"text-red-500",children:"*"})]}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),L.jsx("input",{type:"number",id:"regularPrice",placeholder:"rent"===b.type?"Enter monthly rent":"Enter listing price",className:"pl-7 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 "+(N.regularPrice&&v.regularPrice?"border-red-500":""),value:b.regularPrice,onChange:T,onBlur:A,min:"1"})]}),N.regularPrice&&v.regularPrice&&L.jsxs("div",{className:"mt-1 text-red-500 text-sm flex items-center",children:[L.jsx(jo,{className:"h-4 w-4 mr-1"}),v.regularPrice]})]}),b.offer&&L.jsxs("div",{children:[L.jsx("label",{htmlFor:"discountPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discounted Price"}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),L.jsx("input",{type:"number",id:"discountPrice",placeholder:"Enter discounted price",className:"pl-7 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500",value:b.discountPrice,onChange:T,min:"0"})]})]}),L.jsxs("div",{className:"pt-6 flex justify-between",children:[L.jsx("button",{type:"button",onClick:()=>n(1),className:"px-6 py-3 border border-gray-300 rounded-md hover:bg-gray-50 transition font-medium",children:"Back"}),L.jsxs("button",{type:"button",onClick:()=>n(3),className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition font-medium flex items-center",children:["Continue ",L.jsx(xo,{className:"ml-2 h-5 w-5"})]})]})]})]}),3===r&&L.jsxs(L.Fragment,{children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Review and publish your listing"}),L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:[b.imageUrls.length>0?L.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${b.imageUrls[0]})`}}):L.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:L.jsx(fo,{className:"h-12 w-12 text-gray-400"})}),L.jsxs("div",{className:"p-4",children:[L.jsxs("div",{className:"flex justify-between items-start",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"text-lg font-semibold",children:[0===b.bedrooms?"Studio":`${b.bedrooms} bedroom`," ",b.bathrooms," ","bath ",b.propertyType]}),L.jsx("p",{className:"text-gray-500",children:b.address})]}),L.jsxs("div",{className:"text-right",children:[L.jsxs("p",{className:"text-xl font-bold",children:["$",b.regularPrice.toLocaleString(),"rent"===b.type&&L.jsx("span",{className:"text-sm font-normal",children:"/month"})]}),b.offer&&L.jsxs("p",{className:"text-sm text-green-600",children:["$",(b.regularPrice-b.discountPrice).toLocaleString()," off"]})]})]}),L.jsxs("div",{className:"mt-4",children:[L.jsx("h4",{className:"font-medium",children:"Features"}),L.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[L.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:0===b.bedrooms?"Studio":`${b.bedrooms} Bedrooms`}),L.jsxs("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:[b.bathrooms," Bathrooms"]}),b.squareFootage&&L.jsxs("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:[b.squareFootage," sq ft"]}),b.parking&&L.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:"Parking"}),b.furnished&&L.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:"Furnished"})]})]}),L.jsxs("div",{className:"mt-4",children:[L.jsx("h4",{className:"font-medium",children:"Description"}),L.jsx("p",{className:"text-gray-600 text-sm mt-1",children:b.description})]})]})]}),g&&L.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded flex items-center",children:[L.jsx(yo,{className:"h-5 w-5 mr-2"}),L.jsxs("div",{className:"flex-1",children:[L.jsx("p",{className:"font-medium",children:"Your listing has been successfully created!"}),L.jsx("p",{className:"text-sm mt-1",children:"You'll be redirected to your listings dashboard in a moment."})]}),L.jsx("button",{onClick:()=>s("/rental-manager?postingPath=true"),className:"ml-4 bg-green-600 text-white px-3 py-1 rounded-md text-sm hover:bg-green-700 transition",children:"View My Listings"})]}),p&&L.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded flex items-center",children:[L.jsx(jo,{className:"h-5 w-5 mr-2"}),L.jsx("span",{children:p})]}),L.jsxs("div",{className:"pt-6 flex justify-between",children:[L.jsx("button",{type:"button",onClick:()=>n(2),className:"px-6 py-3 border border-gray-300 rounded-md hover:bg-gray-50 transition font-medium",children:"Back"}),L.jsx("button",{type:"button",onClick:async()=>{if(!(()=>{const e={};let t=!0;return b.address.trim()?b.address.length<5&&(e.address="Please enter a complete address",t=!1):(e.address="Address is required",t=!1),b.squareFootage&&(isNaN(b.squareFootage)||b.squareFootage<=0)&&(e.squareFootage="Please enter a valid number",t=!1),(!b.regularPrice||isNaN(b.regularPrice)||b.regularPrice<=0)&&(e.regularPrice="Please enter a valid price",t=!1),0===b.imageUrls.length&&(e.images="Please upload at least one image",t=!1),j(e),t})()){const e={};return Object.keys(b).forEach((t=>{e[t]=!0})),void _(e)}m(!0),x(null);try{const t={...b,userRef:e._id},r=await fetch("/api/listing/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}),n=await r.json();if(m(!1),!1===n.success||!r.ok)return void x(n.message||"Failed to create listing");f(!0),setTimeout((()=>{s("/rental-manager?postingPath=true")}),1e3)}catch(t){x(t.message||"Something went wrong"),m(!1)}},disabled:h||g,className:(h||g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700")+" text-white px-6 py-3 rounded-md transition font-medium flex items-center",children:h?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Publishing..."]}):L.jsx(L.Fragment,{children:"Publish Listing"})})]})]})]})]})})]}):null}function pl(){const[e,s]=t.useState([]),[r,a]=t.useState(!1),[i,o]=t.useState(null),{currentUser:l}=w((e=>e.user));t.useEffect((()=>{(async()=>{try{a(!0),o(null);const e=await fetch(`/api/user/listings/${l._id}`),t=await e.json();if(!1===t.success)return o(t.message),void a(!1);s(t),a(!1)}catch(e){o("Failed to fetch listings"),a(!1)}})()}),[l._id]);return L.jsxs("div",{className:"p-3 max-w-4xl mx-auto",children:[L.jsx("h1",{className:"text-3xl font-semibold text-center my-7",children:"My Listings"}),r&&L.jsx("p",{className:"text-center text-2xl",children:"Loading..."}),i&&L.jsx("p",{className:"text-center text-red-700",children:i}),!r&&!i&&0===e.length&&L.jsxs("div",{className:"text-center",children:[L.jsx("p",{className:"text-xl mb-4",children:"You have no listings yet"}),L.jsx(n,{to:"/create-listing",children:L.jsx("button",{className:"bg-slate-700 text-white p-3 rounded-lg uppercase hover:opacity-95",children:"Create a listing"})})]}),!r&&!i&&e.length>0&&L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>L.jsxs("div",{className:"bg-white shadow-md hover:shadow-lg transition-shadow rounded-lg overflow-hidden",children:[L.jsx(n,{to:`/listing/${e._id}`,children:L.jsx("img",{src:e.imageUrls[0]||"/placeholder.svg",alt:"listing cover",className:"h-48 w-full object-cover"})}),L.jsxs("div",{className:"p-4",children:[L.jsx(n,{to:`/listing/${e._id}`,children:L.jsx("h2",{className:"text-lg font-semibold truncate",children:e.name})}),L.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:e.description}),L.jsxs("p",{className:"text-slate-700 mt-2",children:[L.jsxs("span",{className:"font-semibold",children:["$",e.regularPrice.toLocaleString()]}),"rent"===e.type&&" / month"]}),L.jsxs("div",{className:"flex justify-between mt-4",children:[L.jsx(n,{to:`/update-listing/${e._id}`,children:L.jsx("button",{className:"bg-green-700 text-white p-2 rounded uppercase text-sm hover:opacity-95",children:"Edit"})}),L.jsx("button",{onClick:()=>(async e=>{try{const t=await fetch(`/api/listing/delete/${e}`,{method:"DELETE"});if(!1===(await t.json()).success)return;s((t=>t.filter((t=>t._id!==e))))}catch(t){}})(e._id),className:"bg-red-700 text-white p-2 rounded uppercase text-sm hover:opacity-95",children:"Delete"})]})]})]},e._id)))})]})}function xl(){const{currentUser:e}=w((e=>e.user)),[s,r]=t.useState([]),[i,o]=t.useState(!0),[l,c]=t.useState(null),d=a();t.useEffect((()=>{e?u():d("/sign-in")}),[e,d]);const u=async()=>{try{o(!0);const t=await fetch(`/api/user/listings/${e._id}`),s=await t.json();if(!1===s.success)return void c(s.message);const n=s.filter((e=>!0===e.approved));r(n)}catch(t){c("Failed to fetch listings")}finally{o(!1)}};return i?L.jsx("div",{className:"flex justify-center items-center min-h-screen",children:L.jsx("div",{className:"text-lg",children:"Loading your listings..."})}):L.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[L.jsxs("div",{className:"mb-8",children:[L.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Advertise Your Properties"}),L.jsx("p",{className:"text-gray-600",children:"Promote your approved listings to reach more potential buyers and renters."})]}),l&&L.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:l}),0===s.length?L.jsxs("div",{className:"text-center py-12",children:[L.jsx("div",{className:"text-gray-500 text-lg mb-4",children:"You don't have any approved listings to advertise yet."}),L.jsx(n,{to:"/create-listing",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200",children:"Create Your First Listing"})]}):L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e=>L.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[L.jsx("img",{src:e.imageUrls[0]||"/placeholder.svg?height=200&width=300",alt:e.name,className:"w-full h-48 object-cover"}),L.jsxs("div",{className:"p-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:e.name}),L.jsx("p",{className:"text-gray-600 text-sm mb-2 truncate",children:e.address}),L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",e.regularPrice.toLocaleString(),"rent"===e.type&&"/month"]}),L.jsx("span",{className:"text-sm text-gray-500 capitalize",children:e.type})]}),L.jsxs("div",{className:"flex gap-2 text-sm text-gray-600 mb-4",children:[L.jsxs("span",{children:[e.bedrooms," beds"]}),L.jsx("span",{children:"•"}),L.jsxs("span",{children:[e.bathrooms," baths"]})]}),L.jsx(n,{to:`/advertise/promote/${e._id}`,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200 text-center block",children:"Promote This Listing"})]})]},e._id)))})]})}function gl(){var e;const{id:s}=c(),{currentUser:r}=w((e=>e.user)),[i,o]=t.useState(null),[l,d]=t.useState(!0),[u,h]=t.useState("featured"),m=a(),p=[{id:"featured",name:"Featured",price:29,duration:"7 days",features:["Featured in search results","Homepage banner placement","Priority in category listings","Basic analytics"],popular:!1},{id:"premium",name:"Premium",price:59,duration:"14 days",features:["All Featured benefits","Top of search results","Social media promotion","Advanced analytics","Email marketing inclusion"],popular:!0},{id:"spotlight",name:"Spotlight",price:99,duration:"30 days",features:["All Premium benefits","Dedicated homepage section","Newsletter feature","Professional photography tips","Priority customer support","Extended analytics"],popular:!1}];t.useEffect((()=>{r?s&&x():m("/sign-in")}),[s]);const x=async()=>{try{d(!0);const e=await fetch(`/api/listing/get/${s}`),t=await e.json();if(!1===t.success)return o(null),void d(!1);if(t.userRef!==r._id)return o(null),void d(!1);o(t)}catch(e){o(null)}finally{d(!1)}};return l?L.jsx("div",{className:"flex justify-center items-center min-h-screen",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),L.jsx("p",{children:"Loading listing details..."})]})}):i?L.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Promote Your Listing"}),L.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[L.jsx("img",{src:i.imageUrls[0]||"/placeholder.svg?height=200&width=300",alt:i.name,className:"w-full md:w-64 h-48 object-cover rounded-lg"}),L.jsxs("div",{className:"flex-1",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:i.name}),L.jsx("p",{className:"text-gray-600 mb-2",children:i.address}),L.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[L.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["$",i.regularPrice.toLocaleString(),"rent"===i.type&&"/month"]}),L.jsx("span",{className:"text-sm text-gray-500 capitalize bg-gray-100 px-2 py-1 rounded",children:i.type})]}),L.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[L.jsxs("span",{children:[i.bedrooms," beds"]}),L.jsx("span",{children:"•"}),L.jsxs("span",{children:[i.bathrooms," baths"]}),i.parking&&L.jsxs(L.Fragment,{children:[L.jsx("span",{children:"•"}),L.jsx("span",{children:"Parking"})]}),i.furnished&&L.jsxs(L.Fragment,{children:[L.jsx("span",{children:"•"}),L.jsx("span",{children:"Furnished"})]})]})]})]})]}),L.jsxs("div",{className:"mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Choose Your Promotion Plan"}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:p.map((e=>L.jsxs("div",{className:`relative bg-white rounded-lg shadow-md p-6 cursor-pointer transition-all ${u===e.id?"ring-2 ring-blue-500 transform scale-105":"hover:shadow-lg"} ${e.popular?"border-2 border-blue-500":""}`,onClick:()=>h(e.id),children:[e.popular&&L.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:L.jsx("span",{className:"bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:e.name}),L.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:["$",e.price]}),L.jsx("div",{className:"text-gray-600 text-sm",children:e.duration})]}),L.jsx("ul",{className:"space-y-3 mb-6",children:e.features.map(((e,t)=>L.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[L.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e]},t)))}),L.jsx("div",{className:"text-center",children:L.jsx("div",{className:"w-4 h-4 rounded-full mx-auto "+(u===e.id?"bg-blue-500":"bg-gray-300")})})]},e.id)))})]}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx(n,{to:"/advertise",className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Back to Listings"}),L.jsxs("button",{onClick:()=>{const e=p.find((e=>e.id===u));m(`/advertise/payment/${s}`,{state:{listing:i,plan:e}})},className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-medium",children:["Proceed to Payment - $",null==(e=p.find((e=>e.id===u)))?void 0:e.price]})]})]}):L.jsx("div",{className:"flex justify-center items-center min-h-screen",children:L.jsxs("div",{className:"text-center",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Unable to Load Listing"}),L.jsx("p",{className:"text-gray-600 mb-4",children:"This listing may not exist or you don't have permission to promote it."}),L.jsx(n,{to:"/advertise",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Back to Advertise"})]})})}function fl(){var e;c();const s=i(),r=a(),{currentUser:n}=w((e=>e.user)),[o,l]=t.useState(!1),[d,u]=t.useState("card"),{listing:h,plan:m}=s.state||{};t.useEffect((()=>{if(!n)return void r("/sign-in");const e=setTimeout((()=>{h&&m||r("/advertise")}),100);return()=>clearTimeout(e)}),[n]);return h&&m?L.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[L.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Complete Your Payment"}),L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Order Summary"}),L.jsx("div",{className:"border-b pb-4 mb-4",children:L.jsxs("div",{className:"flex gap-4",children:[L.jsx("img",{src:(null==(e=h.imageUrls)?void 0:e[0])||"/placeholder.svg?height=100&width=150",alt:h.name,className:"w-20 h-16 object-cover rounded"}),L.jsxs("div",{className:"flex-1",children:[L.jsx("h3",{className:"font-semibold text-gray-800",children:h.name}),L.jsx("p",{className:"text-sm text-gray-600",children:h.address})]})]})}),L.jsxs("div",{className:"space-y-3",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-gray-600",children:"Promotion Plan:"}),L.jsx("span",{className:"font-medium",children:m.name})]}),L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-gray-600",children:"Duration:"}),L.jsx("span",{className:"font-medium",children:m.duration})]}),L.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[L.jsx("span",{children:"Total:"}),L.jsxs("span",{className:"text-blue-600",children:["$",m.price]})]})]})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Payment Details"}),L.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{await new Promise((e=>setTimeout(e,2e3))),r("/advertise/success",{state:{listing:h,plan:m,paymentMethod:d}})}catch(t){alert("Payment failed. Please try again.")}finally{l(!1)}},children:[L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),L.jsxs("div",{className:"space-y-2",children:[L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===d,onChange:e=>u(e.target.value),className:"mr-2"}),L.jsx("span",{children:"Credit/Debit Card"})]}),L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"radio",name:"paymentMethod",value:"paypal",checked:"paypal"===d,onChange:e=>u(e.target.value),className:"mr-2"}),L.jsx("span",{children:"PayPal"})]}),L.jsxs("label",{className:"flex items-center",children:[L.jsx("input",{type:"radio",name:"paymentMethod",value:"mobile",checked:"mobile"===d,onChange:e=>u(e.target.value),className:"mr-2"}),L.jsx("span",{children:"Mobile Money"})]})]})]}),"card"===d&&L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),L.jsx("input",{type:"text",placeholder:"1234 5678 9012 3456",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),L.jsx("input",{type:"text",placeholder:"MM/YY",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),L.jsx("input",{type:"text",placeholder:"123",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),L.jsx("input",{type:"text",placeholder:"John Doe",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),"paypal"===d&&L.jsx("div",{className:"text-center py-8",children:L.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[L.jsx("p",{className:"text-gray-600 mb-4",children:"You will be redirected to PayPal to complete your payment."}),L.jsx("div",{className:"text-4xl mb-2",children:"💳"})]})}),"mobile"===d&&L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),L.jsx("input",{type:"tel",placeholder:"+256 700 000 000",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider"}),L.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[L.jsx("option",{value:"mtn",children:"MTN Mobile Money"}),L.jsx("option",{value:"airtel",children:"Airtel Money"})]})]})]}),L.jsxs("div",{className:"flex gap-4 mt-6",children:[L.jsx("button",{type:"button",onClick:()=>r(-1),className:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors",children:"Back"}),L.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:o?L.jsxs("div",{className:"flex items-center justify-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"}),"Processing..."]}):`Pay $${m.price}`})]})]})]})]})]}):L.jsx("div",{className:"flex justify-center items-center min-h-screen",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),L.jsx("p",{children:"Loading payment details..."}),L.jsx("button",{onClick:()=>r("/advertise"),className:"mt-4 text-blue-600 hover:underline",children:"Go back to Advertise"})]})})}function bl(){const e=i(),s=a(),{listing:r,plan:n}=e.state||{};return t.useEffect((()=>{r&&n||s("/advertise")}),[r,n,s]),r&&n?L.jsx("div",{className:"max-w-2xl mx-auto p-6 text-center",children:L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[L.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:L.jsx("span",{className:"text-white text-2xl",children:"✓"})}),L.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-4",children:"Payment Successful!"}),L.jsxs("p",{className:"text-gray-600 mb-6",children:['Your listing "',r.name,'" has been successfully promoted with the ',n.name," package."]}),L.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[L.jsx("h3",{className:"font-semibold mb-2",children:"Promotion Details:"}),L.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[L.jsxs("p",{children:["Plan: ",n.name]}),L.jsxs("p",{children:["Duration: ",n.duration]}),L.jsxs("p",{children:["Amount Paid: $",n.price]}),L.jsx("p",{children:"Status: Active"})]})]}),L.jsxs("div",{className:"space-y-3",children:[L.jsx("button",{onClick:()=>s("/show-listings"),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"View My Listings"}),L.jsx("button",{onClick:()=>s("/advertise"),className:"w-full border border-gray-300 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"Promote Another Listing"})]})]})}):null}function yl(){return L.jsxs(d,{children:[L.jsx(Qi,{}),L.jsxs(u,{children:[L.jsx(h,{path:"/",element:L.jsx(ie,{})}),L.jsx(h,{path:"/sign-in",element:L.jsx(fa,{})}),L.jsx(h,{path:"/sign-up",element:L.jsx(ba,{})}),L.jsx(h,{path:"/about",element:L.jsx(ya,{})}),L.jsx(h,{path:"/search",element:L.jsx(ao,{})}),L.jsx(h,{path:"/listing/:listingId",element:L.jsx(no,{})}),L.jsx(h,{path:"/forgot-password",element:L.jsx(io,{})}),L.jsx(h,{path:"/reset-password",element:L.jsx(oo,{})}),L.jsx(h,{path:"/rental-manager",element:L.jsx(ul,{})}),L.jsx(h,{path:"/rental-manager/login",element:L.jsx(hl,{})}),L.jsx(h,{path:"/rental-manager-login",element:L.jsx(hl,{})}),L.jsx(h,{path:"/post-listing-preview",element:L.jsx(ml,{})}),L.jsx(h,{path:"/show-listings",element:L.jsx(pl,{})}),L.jsx(h,{path:"/advertise",element:L.jsx(xl,{})}),L.jsx(h,{path:"/advertise/promote/:id",element:L.jsx(gl,{})}),L.jsx(h,{path:"/advertise/payment/:id",element:L.jsx(fl,{})}),L.jsx(h,{path:"/advertise/success",element:L.jsx(bl,{})}),L.jsxs(h,{element:L.jsx(eo,{}),children:[L.jsx(h,{path:"/profile",element:L.jsx(Zi,{})}),L.jsx(h,{path:"/create-listing",element:L.jsx(to,{})}),L.jsx(h,{path:"/update-listing/:listingId",element:L.jsx(so,{})}),L.jsx(h,{path:"/admin",element:L.jsx(dl,{})})]})]})]})}var vl={},wl={};function jl(e){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nl(){}wl.__esModule=!0,wl.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":jl(self))||!(e in self))return!1;try{var t=self[e],s="redux-persist ".concat(e," test");t.setItem(s,"test"),t.getItem(s),t.removeItem(s)}catch(r){return!1}return!0}(t)?self[t]:_l};var _l={getItem:Nl,setItem:Nl,removeItem:Nl};vl.__esModule=!0,vl.default=function(e){var t=(0,Sl.default)(e);return{getItem:function(e){return new Promise((function(s,r){s(t.getItem(e))}))},setItem:function(e,s){return new Promise((function(r,n){r(t.setItem(e,s))}))},removeItem:function(e){return new Promise((function(s,r){s(t.removeItem(e))}))}}};var kl,Sl=(kl=wl)&&kl.__esModule?kl:{default:kl};var El=function(e){return e&&e.__esModule?e:{default:e}}(vl);const Tl=_({reducer:N({key:"root",storage:(0,El.default)("local"),version:1},j({user:je})),middleware:e=>e({serializableCheck:!1})}),Al=k(Tl);function Cl(e){return(Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pl(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rl(e){return(Rl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ul(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ll=function(){function e(){var t,s,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=this,n=(t=Rl(e)).call.apply(t,[this].concat(i)),s=!n||"object"!==Cl(n)&&"function"!=typeof n?Il(r):n,Ul(Il(s),"state",{bootstrapped:!1}),Ul(Il(s),"_unsubscribe",void 0),Ul(Il(s),"handlePersistorState",(function(){s.props.persistor.getState().bootstrapped&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally((function(){return s.setState({bootstrapped:!0})})):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())})),s}var s,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(e,t.PureComponent),s=e,(r=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&Pl(s.prototype,r),n&&Pl(s,n),e}();function Dl(e,t){return function(){return e.apply(t,arguments)}}Ul(Ll,"defaultProps",{children:null,loading:null});const{toString:Ml}=Object.prototype,{getPrototypeOf:Fl}=Object,{iterator:Bl,toStringTag:$l}=Symbol,ql=(e=>t=>{const s=Ml.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),zl=e=>(e=e.toLowerCase(),t=>ql(t)===e),Vl=e=>t=>typeof t===e,{isArray:Hl}=Array,Wl=Vl("undefined");const Jl=zl("ArrayBuffer");const Kl=Vl("string"),Gl=Vl("function"),Xl=Vl("number"),Yl=e=>null!==e&&"object"==typeof e,Zl=e=>{if("object"!==ql(e))return!1;const t=Fl(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||$l in e||Bl in e)},Ql=zl("Date"),ec=zl("File"),tc=zl("Blob"),sc=zl("FileList"),rc=zl("URLSearchParams"),[nc,ac,ic,oc]=["ReadableStream","Request","Response","Headers"].map(zl);function lc(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let r,n;if("object"!=typeof e&&(e=[e]),Hl(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let i;for(r=0;r<a;r++)i=n[r],t.call(null,e[i],i,e)}}function cc(e,t){t=t.toLowerCase();const s=Object.keys(e);let r,n=s.length;for(;n-- >0;)if(r=s[n],t===r.toLowerCase())return r;return null}const dc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,uc=e=>!Wl(e)&&e!==dc;const hc=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Fl(Uint8Array)),mc=zl("HTMLFormElement"),pc=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),xc=zl("RegExp"),gc=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};lc(s,((s,n)=>{let a;!1!==(a=t(s,n,e))&&(r[n]=a||s)})),Object.defineProperties(e,r)};const fc=zl("AsyncFunction"),bc=(yc="function"==typeof setImmediate,vc=Gl(dc.postMessage),yc?setImmediate:vc?(wc=`axios@${Math.random()}`,jc=[],dc.addEventListener("message",(({source:e,data:t})=>{e===dc&&t===wc&&jc.length&&jc.shift()()}),!1),e=>{jc.push(e),dc.postMessage(wc,"*")}):e=>setTimeout(e));var yc,vc,wc,jc;const Nc="undefined"!=typeof queueMicrotask?queueMicrotask.bind(dc):"undefined"!=typeof process&&process.nextTick||bc,_c={isArray:Hl,isArrayBuffer:Jl,isBuffer:function(e){return null!==e&&!Wl(e)&&null!==e.constructor&&!Wl(e.constructor)&&Gl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Gl(e.append)&&("formdata"===(t=ql(e))||"object"===t&&Gl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jl(e.buffer),t},isString:Kl,isNumber:Xl,isBoolean:e=>!0===e||!1===e,isObject:Yl,isPlainObject:Zl,isReadableStream:nc,isRequest:ac,isResponse:ic,isHeaders:oc,isUndefined:Wl,isDate:Ql,isFile:ec,isBlob:tc,isRegExp:xc,isFunction:Gl,isStream:e=>Yl(e)&&Gl(e.pipe),isURLSearchParams:rc,isTypedArray:hc,isFileList:sc,forEach:lc,merge:function e(){const{caseless:t}=uc(this)&&this||{},s={},r=(r,n)=>{const a=t&&cc(s,n)||n;Zl(s[a])&&Zl(r)?s[a]=e(s[a],r):Zl(r)?s[a]=e({},r):Hl(r)?s[a]=r.slice():s[a]=r};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&lc(arguments[n],r);return s},extend:(e,t,s,{allOwnKeys:r}={})=>(lc(t,((t,r)=>{s&&Gl(t)?e[r]=Dl(t,s):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,r)=>{let n,a,i;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)i=n[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==s&&Fl(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:ql,kindOfTest:zl,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return-1!==r&&r===s},toArray:e=>{if(!e)return null;if(Hl(e))return e;let t=e.length;if(!Xl(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Bl]).call(e);let r;for(;(r=s.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const r=[];for(;null!==(s=e.exec(t));)r.push(s);return r},isHTMLForm:mc,hasOwnProperty:pc,hasOwnProp:pc,reduceDescriptors:gc,freezeMethods:e=>{gc(e,((t,s)=>{if(Gl(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const r=e[s];Gl(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))}))},toObjectSet:(e,t)=>{const s={},r=e=>{e.forEach((e=>{s[e]=!0}))};return Hl(e)?r(e):r(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,s){return t.toUpperCase()+s})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:cc,global:dc,isContextDefined:uc,isSpecCompliantForm:function(e){return!!(e&&Gl(e.append)&&"FormData"===e[$l]&&e[Bl])},toJSONObject:e=>{const t=new Array(10),s=(e,r)=>{if(Yl(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const n=Hl(e)?[]:{};return lc(e,((e,t)=>{const a=s(e,r+1);!Wl(a)&&(n[t]=a)})),t[r]=void 0,n}}return e};return s(e,0)},isAsyncFn:fc,isThenable:e=>e&&(Yl(e)||Gl(e))&&Gl(e.then)&&Gl(e.catch),setImmediate:bc,asap:Nc,isIterable:e=>null!=e&&Gl(e[Bl])};function kc(e,t,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}_c.inherits(kc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_c.toJSONObject(this.config),code:this.code,status:this.status}}});const Sc=kc.prototype,Ec={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ec[e]={value:e}})),Object.defineProperties(kc,Ec),Object.defineProperty(Sc,"isAxiosError",{value:!0}),kc.from=(e,t,s,r,n,a)=>{const i=Object.create(Sc);return _c.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),kc.call(i,e.message,t,s,r,n),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};function Tc(e){return _c.isPlainObject(e)||_c.isArray(e)}function Ac(e){return _c.endsWith(e,"[]")?e.slice(0,-2):e}function Cc(e,t,s){return e?e.concat(t).map((function(e,t){return e=Ac(e),!s&&t?"["+e+"]":e})).join(s?".":""):t}const Pc=_c.toFlatObject(_c,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Rc(e,t,s){if(!_c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(s=_c.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!_c.isUndefined(t[e])}))).metaTokens,n=s.visitor||c,a=s.dots,i=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&_c.isSpecCompliantForm(t);if(!_c.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(_c.isDate(e))return e.toISOString();if(!o&&_c.isBlob(e))throw new kc("Blob is not supported. Use a Buffer instead.");return _c.isArrayBuffer(e)||_c.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,n){let o=e;if(e&&!n&&"object"==typeof e)if(_c.endsWith(s,"{}"))s=r?s:s.slice(0,-2),e=JSON.stringify(e);else if(_c.isArray(e)&&function(e){return _c.isArray(e)&&!e.some(Tc)}(e)||(_c.isFileList(e)||_c.endsWith(s,"[]"))&&(o=_c.toArray(e)))return s=Ac(s),o.forEach((function(e,r){!_c.isUndefined(e)&&null!==e&&t.append(!0===i?Cc([s],r,a):null===i?s:s+"[]",l(e))})),!1;return!!Tc(e)||(t.append(Cc(n,s,a),l(e)),!1)}const d=[],u=Object.assign(Pc,{defaultVisitor:c,convertValue:l,isVisitable:Tc});if(!_c.isObject(e))throw new TypeError("data must be an object");return function e(s,r){if(!_c.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+r.join("."));d.push(s),_c.forEach(s,(function(s,a){!0===(!(_c.isUndefined(s)||null===s)&&n.call(t,s,_c.isString(a)?a.trim():a,r,u))&&e(s,r?r.concat(a):[a])})),d.pop()}}(e),t}function Ic(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Oc(e,t){this._pairs=[],e&&Rc(e,this,t)}const Uc=Oc.prototype;function Lc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dc(e,t,s){if(!t)return e;const r=s&&s.encode||Lc;_c.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let a;if(a=n?n(t,s):_c.isURLSearchParams(t)?t.toString():new Oc(t,s).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}Uc.append=function(e,t){this._pairs.push([e,t])},Uc.toString=function(e){const t=e?function(t){return e.call(this,t,Ic)}:Ic;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Mc{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_c.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Fc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bc={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Oc,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},$c="undefined"!=typeof window&&"undefined"!=typeof document,qc="object"==typeof navigator&&navigator||void 0,zc=$c&&(!qc||["ReactNative","NativeScript","NS"].indexOf(qc.product)<0),Vc="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Hc=$c&&window.location.href||"http://localhost",Wc={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$c,hasStandardBrowserEnv:zc,hasStandardBrowserWebWorkerEnv:Vc,navigator:qc,origin:Hc},Symbol.toStringTag,{value:"Module"})),...Bc};function Jc(e){function t(e,s,r,n){let a=e[n++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=n>=e.length;if(a=!a&&_c.isArray(r)?r.length:a,o)return _c.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!i;r[a]&&_c.isObject(r[a])||(r[a]=[]);return t(e,s,r[a],n)&&_c.isArray(r[a])&&(r[a]=function(e){const t={},s=Object.keys(e);let r;const n=s.length;let a;for(r=0;r<n;r++)a=s[r],t[a]=e[a];return t}(r[a])),!i}if(_c.isFormData(e)&&_c.isFunction(e.entries)){const s={};return _c.forEachEntry(e,((e,r)=>{t(function(e){return _c.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,s,0)})),s}return null}const Kc={transitional:Fc,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,n=_c.isObject(e);n&&_c.isHTMLForm(e)&&(e=new FormData(e));if(_c.isFormData(e))return r?JSON.stringify(Jc(e)):e;if(_c.isArrayBuffer(e)||_c.isBuffer(e)||_c.isStream(e)||_c.isFile(e)||_c.isBlob(e)||_c.isReadableStream(e))return e;if(_c.isArrayBufferView(e))return e.buffer;if(_c.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Rc(e,new Wc.classes.URLSearchParams,Object.assign({visitor:function(e,t,s,r){return Wc.isNode&&_c.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=_c.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Rc(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,s){if(_c.isString(e))try{return(t||JSON.parse)(e),_c.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Kc.transitional,s=t&&t.forcedJSONParsing,r="json"===this.responseType;if(_c.isResponse(e)||_c.isReadableStream(e))return e;if(e&&_c.isString(e)&&(s&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(n){if(s){if("SyntaxError"===n.name)throw kc.from(n,kc.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wc.classes.FormData,Blob:Wc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_c.forEach(["delete","get","head","post","put","patch"],(e=>{Kc.headers[e]={}}));const Gc=Kc,Xc=_c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yc=Symbol("internals");function Zc(e){return e&&String(e).trim().toLowerCase()}function Qc(e){return!1===e||null==e?e:_c.isArray(e)?e.map(Qc):String(e)}function ed(e,t,s,r,n){return _c.isFunction(r)?r.call(this,t,s):(n&&(t=s),_c.isString(t)?_c.isString(r)?-1!==t.indexOf(r):_c.isRegExp(r)?r.test(t):void 0:void 0)}class td{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function n(e,t,s){const n=Zc(t);if(!n)throw new Error("header name must be a non-empty string");const a=_c.findKey(r,n);(!a||void 0===r[a]||!0===s||void 0===s&&!1!==r[a])&&(r[a||t]=Qc(e))}const a=(e,t)=>_c.forEach(e,((e,s)=>n(e,s,t)));if(_c.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(_c.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let s,r,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),s=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!s||t[s]&&Xc[s]||("set-cookie"===s?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)})),t})(e),t);else if(_c.isObject(e)&&_c.isIterable(e)){let s,r,n={};for(const t of e){if(!_c.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[r=t[0]]=(s=n[r])?_c.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}a(n,t)}else null!=e&&n(t,e,s);return this}get(e,t){if(e=Zc(e)){const s=_c.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}(e);if(_c.isFunction(t))return t.call(this,e,s);if(_c.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zc(e)){const s=_c.findKey(this,e);return!(!s||void 0===this[s]||t&&!ed(0,this[s],s,t))}return!1}delete(e,t){const s=this;let r=!1;function n(e){if(e=Zc(e)){const n=_c.findKey(s,e);!n||t&&!ed(0,s[n],n,t)||(delete s[n],r=!0)}}return _c.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const n=t[s];e&&!ed(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,s={};return _c.forEach(this,((r,n)=>{const a=_c.findKey(s,n);if(a)return t[a]=Qc(r),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,s)=>t.toUpperCase()+s))}(n):String(n).trim();i!==n&&delete t[n],t[i]=Qc(r),s[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _c.forEach(this,((s,r)=>{null!=s&&!1!==s&&(t[r]=e&&_c.isArray(s)?s.join(", "):s)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach((e=>s.set(e))),s}static accessor(e){const t=(this[Yc]=this[Yc]={accessors:{}}).accessors,s=this.prototype;function r(e){const r=Zc(e);t[r]||(!function(e,t){const s=_c.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+s,{value:function(e,s,n){return this[r].call(this,t,e,s,n)},configurable:!0})}))}(s,e),t[r]=!0)}return _c.isArray(e)?e.forEach(r):r(e),this}}td.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_c.reduceDescriptors(td.prototype,(({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}})),_c.freezeMethods(td);const sd=td;function rd(e,t){const s=this||Gc,r=t||s,n=sd.from(r.headers);let a=r.data;return _c.forEach(e,(function(e){a=e.call(s,a,n.normalize(),t?t.status:void 0)})),n.normalize(),a}function nd(e){return!(!e||!e.__CANCEL__)}function ad(e,t,s){kc.call(this,null==e?"canceled":e,kc.ERR_CANCELED,t,s),this.name="CanceledError"}function id(e,t,s){const r=s.config.validateStatus;s.status&&r&&!r(s.status)?t(new kc("Request failed with status code "+s.status,[kc.ERR_BAD_REQUEST,kc.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}_c.inherits(ad,kc,{__CANCEL__:!0});const od=(e,t,s=3)=>{let r=0;const n=function(e,t){e=e||10;const s=new Array(e),r=new Array(e);let n,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];n||(n=l),s[a]=o,r[a]=l;let d=i,u=0;for(;d!==a;)u+=s[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-n<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let s,r,n=0,a=1e3/t;const i=(t,a=Date.now())=>{n=a,s=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-n;o>=a?i(e,t):(s=e,r||(r=setTimeout((()=>{r=null,i(s)}),a-o)))},()=>s&&i(s)]}((s=>{const a=s.loaded,i=s.lengthComputable?s.total:void 0,o=a-r,l=n(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),s)},ld=(e,t)=>{const s=null!=e;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},cd=e=>(...t)=>_c.asap((()=>e(...t))),dd=Wc.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Wc.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Wc.origin),Wc.navigator&&/(msie|trident)/i.test(Wc.navigator.userAgent)):()=>!0,ud=Wc.hasStandardBrowserEnv?{write(e,t,s,r,n,a){const i=[e+"="+encodeURIComponent(t)];_c.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),_c.isString(r)&&i.push("path="+r),_c.isString(n)&&i.push("domain="+n),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function hd(e,t,s){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const md=e=>e instanceof sd?{...e}:e;function pd(e,t){t=t||{};const s={};function r(e,t,s,r){return _c.isPlainObject(e)&&_c.isPlainObject(t)?_c.merge.call({caseless:r},e,t):_c.isPlainObject(t)?_c.merge({},t):_c.isArray(t)?t.slice():t}function n(e,t,s,n){return _c.isUndefined(t)?_c.isUndefined(e)?void 0:r(void 0,e,0,n):r(e,t,0,n)}function a(e,t){if(!_c.isUndefined(t))return r(void 0,t)}function i(e,t){return _c.isUndefined(t)?_c.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(s,n,a){return a in t?r(s,n):a in e?r(void 0,s):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,s)=>n(md(e),md(t),0,!0)};return _c.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||n,i=a(e[r],t[r],r);_c.isUndefined(i)&&a!==o||(s[r]=i)})),s}const xd=e=>{const t=pd({},e);let s,{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=sd.from(o),t.url=Dc(hd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),_c.isFormData(r))if(Wc.hasStandardBrowserEnv||Wc.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(s=o.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Wc.hasStandardBrowserEnv&&(n&&_c.isFunction(n)&&(n=n(t)),n||!1!==n&&dd(t.url))){const e=a&&i&&ud.read(i);e&&o.set(a,e)}return t},gd="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,s){const r=xd(e);let n=r.data;const a=sd.from(r.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function g(){if(!x)return;const r=sd.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());id((function(e){t(e),p()}),(function(e){s(e),p()}),{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x}),x=null}x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout,"onloadend"in x?x.onloadend=g:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(g)},x.onabort=function(){x&&(s(new kc("Request aborted",kc.ECONNABORTED,e,x)),x=null)},x.onerror=function(){s(new kc("Network Error",kc.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const n=r.transitional||Fc;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),s(new kc(t,n.clarifyTimeoutError?kc.ETIMEDOUT:kc.ECONNABORTED,e,x)),x=null},void 0===n&&a.setContentType(null),"setRequestHeader"in x&&_c.forEach(a.toJSON(),(function(e,t){x.setRequestHeader(t,e)})),_c.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),u&&"json"!==u&&(x.responseType=r.responseType),m&&([l,d]=od(m,!0),x.addEventListener("progress",l)),h&&x.upload&&([o,c]=od(h),x.upload.addEventListener("progress",o),x.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{x&&(s(!t||t.type?new ad(null,e,x):t),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);f&&-1===Wc.protocols.indexOf(f)?s(new kc("Unsupported protocol "+f+":",kc.ERR_BAD_REQUEST,e)):x.send(n||null)}))},fd=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,r=new AbortController;const n=function(e){if(!s){s=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof kc?t:new ad(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,n(new kc(`timeout ${t} of ms exceeded`,kc.ETIMEDOUT))}),t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:o}=r;return o.unsubscribe=()=>_c.asap(i),o}},bd=function*(e,t){let s=e.byteLength;if(!t||s<t)return void(yield e);let r,n=0;for(;n<s;)r=n+t,yield e.slice(n,r),n=r},yd=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},vd=(e,t,s,r)=>{const n=async function*(e,t){for await(const s of yd(e))yield*bd(s,t)}(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await n.next();if(t)return o(),void e.close();let a=r.byteLength;if(s){let e=i+=a;s(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},wd="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,jd=wd&&"function"==typeof ReadableStream,Nd=wd&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),_d=(e,...t)=>{try{return!!e(...t)}catch(s){return!1}},kd=jd&&_d((()=>{let e=!1;const t=new Request(Wc.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Sd=jd&&_d((()=>_c.isReadableStream(new Response("").body))),Ed={stream:Sd&&(e=>e.body)};var Td;wd&&(Td=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ed[e]&&(Ed[e]=_c.isFunction(Td[e])?t=>t[e]():(t,s)=>{throw new kc(`Response type '${e}' is not supported`,kc.ERR_NOT_SUPPORT,s)})})));const Ad=async(e,t)=>{const s=_c.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(_c.isBlob(e))return e.size;if(_c.isSpecCompliantForm(e)){const t=new Request(Wc.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return _c.isArrayBufferView(e)||_c.isArrayBuffer(e)?e.byteLength:(_c.isURLSearchParams(e)&&(e+=""),_c.isString(e)?(await Nd(e)).byteLength:void 0)})(t):s},Cd={http:null,xhr:gd,fetch:wd&&(async e=>{let{url:t,method:s,data:r,signal:n,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=xd(e);c=c?(c+"").toLowerCase():"text";let m,p=fd([n,a&&a.toAbortSignal()],i);const x=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&kd&&"get"!==s&&"head"!==s&&0!==(g=await Ad(d,r))){let e,s=new Request(t,{method:"POST",body:r,duplex:"half"});if(_c.isFormData(r)&&(e=s.headers.get("content-type"))&&d.setContentType(e),s.body){const[e,t]=ld(g,od(cd(l)));r=vd(s.body,65536,e,t)}}_c.isString(u)||(u=u?"include":"omit");const n="credentials"in Request.prototype;m=new Request(t,{...h,signal:p,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:n?u:void 0});let a=await fetch(m);const i=Sd&&("stream"===c||"response"===c);if(Sd&&(o||i&&x)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=_c.toFiniteNumber(a.headers.get("content-length")),[s,r]=o&&ld(t,od(cd(o),!0))||[];a=new Response(vd(a.body,65536,s,(()=>{r&&r(),x&&x()})),e)}c=c||"text";let f=await Ed[_c.findKey(Ed,c)||"text"](a,e);return!i&&x&&x(),await new Promise(((t,s)=>{id(t,s,{data:f,headers:sd.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:m})}))}catch(f){if(x&&x(),f&&"TypeError"===f.name&&/Load failed|fetch/i.test(f.message))throw Object.assign(new kc("Network Error",kc.ERR_NETWORK,e,m),{cause:f.cause||f});throw kc.from(f,f&&f.code,e,m)}})};_c.forEach(Cd,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(s){}Object.defineProperty(e,"adapterName",{value:t})}}));const Pd=e=>`- ${e}`,Rd=e=>_c.isFunction(e)||null===e||!1===e,Id=e=>{e=_c.isArray(e)?e:[e];const{length:t}=e;let s,r;const n={};for(let a=0;a<t;a++){let t;if(s=e[a],r=s,!Rd(s)&&(r=Cd[(t=String(s)).toLowerCase()],void 0===r))throw new kc(`Unknown adapter '${t}'`);if(r)break;n[t||"#"+a]=r}if(!r){const e=Object.entries(n).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new kc("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Pd).join("\n"):" "+Pd(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Od(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ad(null,e)}function Ud(e){Od(e),e.headers=sd.from(e.headers),e.data=rd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Id(e.adapter||Gc.adapter)(e).then((function(t){return Od(e),t.data=rd.call(e,e.transformResponse,t),t.headers=sd.from(t.headers),t}),(function(t){return nd(t)||(Od(e),t&&t.response&&(t.response.data=rd.call(e,e.transformResponse,t.response),t.response.headers=sd.from(t.response.headers))),Promise.reject(t)}))}const Ld="1.9.0",Dd={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Dd[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));const Md={};Dd.transitional=function(e,t,s){return(r,n,a)=>{if(!1===e)throw new kc(function(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(s?". "+s:"")}(n," has been removed"+(t?" in "+t:"")),kc.ERR_DEPRECATED);return t&&!Md[n]&&(Md[n]=!0),!e||e(r,n,a)}},Dd.spelling=function(e){return(e,t)=>!0};const Fd={assertOptions:function(e,t,s){if("object"!=typeof e)throw new kc("options must be an object",kc.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const a=r[n],i=t[a];if(i){const t=e[a],s=void 0===t||i(t,a,e);if(!0!==s)throw new kc("option "+a+" must be "+s,kc.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new kc("Unknown option "+a,kc.ERR_BAD_OPTION)}},validators:Dd},Bd=Fd.validators;class $d{constructor(e){this.defaults=e||{},this.interceptors={request:new Mc,response:new Mc}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(r){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=pd(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:n}=t;void 0!==s&&Fd.assertOptions(s,{silentJSONParsing:Bd.transitional(Bd.boolean),forcedJSONParsing:Bd.transitional(Bd.boolean),clarifyTimeoutError:Bd.transitional(Bd.boolean)},!1),null!=r&&(_c.isFunction(r)?t.paramsSerializer={serialize:r}:Fd.assertOptions(r,{encode:Bd.function,serialize:Bd.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fd.assertOptions(t,{baseUrl:Bd.spelling("baseURL"),withXsrfToken:Bd.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=n&&_c.merge(n.common,n[t.method]);n&&_c.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=sd.concat(a,n);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[Ud.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Ud.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Dc(hd((e=pd(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}_c.forEach(["delete","get","head","options"],(function(e){$d.prototype[e]=function(t,s){return this.request(pd(s||{},{method:e,url:t,data:(s||{}).data}))}})),_c.forEach(["post","put","patch"],(function(e){function t(t){return function(s,r,n){return this.request(pd(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}$d.prototype[e]=t(),$d.prototype[e+"Form"]=t(!0)}));const qd=$d;class zd{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const s=this;this.promise.then((e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{s.subscribe(e),t=e})).then(e);return r.cancel=function(){s.unsubscribe(t)},r},e((function(e,r,n){s.reason||(s.reason=new ad(e,r,n),t(s.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new zd((function(t){e=t})),cancel:e}}}const Vd=zd;const Hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hd).forEach((([e,t])=>{Hd[t]=e}));const Wd=Hd;const Jd=function e(t){const s=new qd(t),r=Dl(qd.prototype.request,s);return _c.extend(r,qd.prototype,s,{allOwnKeys:!0}),_c.extend(r,s,null,{allOwnKeys:!0}),r.create=function(s){return e(pd(t,s))},r}(Gc);Jd.Axios=qd,Jd.CanceledError=ad,Jd.CancelToken=Vd,Jd.isCancel=nd,Jd.VERSION=Ld,Jd.toFormData=Rc,Jd.AxiosError=kc,Jd.Cancel=Jd.CanceledError,Jd.all=function(e){return Promise.all(e)},Jd.spread=function(e){return function(t){return e.apply(null,t)}},Jd.isAxiosError=function(e){return _c.isObject(e)&&!0===e.isAxiosError},Jd.mergeConfig=pd,Jd.AxiosHeaders=sd,Jd.formToJSON=e=>Jc(_c.isHTMLForm(e)?new FormData(e):e),Jd.getAdapter=Id,Jd.HttpStatusCode=Wd,Jd.default=Jd;const Kd=()=>L.jsx("div",{className:"flex justify-center items-center h-screen bg-slate-50",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mx-auto mb-4"}),L.jsx("p",{className:"text-slate-600 text-lg",children:"Loading EstateApp..."})]})});Jd.get("https://real-estate-webapp-client.onrender.com").then((e=>{})).catch((e=>{})),(()=>{const e=document.createElement("link");e.rel="preload",e.href="/src/assets/logo.png",e.as="image",document.head.appendChild(e)})(),D.createRoot(document.getElementById("root")).render(L.jsx(S,{store:Tl,children:L.jsx(Ll,{loading:L.jsx(Kd,{}),persistor:Al,children:L.jsx(yl,{})})}));
//# sourceMappingURL=index-VsgHYdQN.js.map
